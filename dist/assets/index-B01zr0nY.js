(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function vT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Om={exports:{}},iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function T1(){if(o0)return iu;o0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var p in o)p!=="key"&&(l[p]=o[p])}else l=o;return o=l.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:l}}return iu.Fragment=e,iu.jsx=t,iu.jsxs=t,iu}var l0;function b1(){return l0||(l0=1,Om.exports=T1()),Om.exports}var b=b1(),Mm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function S1(){if(u0)return Ne;u0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(R){return R===null||typeof R!="object"?null:(R=E&&R[E]||R["@@iterator"],typeof R=="function"?R:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,P={};function M(R,q,J){this.props=R,this.context=q,this.refs=P,this.updater=J||I}M.prototype.isReactComponent={},M.prototype.setState=function(R,q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,q,"setState")},M.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function Y(){}Y.prototype=M.prototype;function ee(R,q,J){this.props=R,this.context=q,this.refs=P,this.updater=J||I}var $=ee.prototype=new Y;$.constructor=ee,x($,M.prototype),$.isPureReactComponent=!0;var oe=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ve=Object.prototype.hasOwnProperty;function V(R,q,J,K,he,de){return J=de.ref,{$$typeof:r,type:R,key:q,ref:J!==void 0?J:null,props:de}}function C(R,q){return V(R.type,q,void 0,void 0,void 0,R.props)}function N(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function k(R){var q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(J){return q[J]})}var L=/\/+/g;function z(R,q){return typeof R=="object"&&R!==null&&R.key!=null?k(""+R.key):q.toString(36)}function D(){}function ot(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(D,D):(R.status="pending",R.then(function(q){R.status==="pending"&&(R.status="fulfilled",R.value=q)},function(q){R.status==="pending"&&(R.status="rejected",R.reason=q)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function lt(R,q,J,K,he){var de=typeof R;(de==="undefined"||de==="boolean")&&(R=null);var ye=!1;if(R===null)ye=!0;else switch(de){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(R.$$typeof){case r:case e:ye=!0;break;case v:return ye=R._init,lt(ye(R._payload),q,J,K,he)}}if(ye)return he=he(R),ye=K===""?"."+z(R,0):K,oe(he)?(J="",ye!=null&&(J=ye.replace(L,"$&/")+"/"),lt(he,q,J,"",function(_t){return _t})):he!=null&&(N(he)&&(he=C(he,J+(he.key==null||R&&R.key===he.key?"":(""+he.key).replace(L,"$&/")+"/")+ye)),q.push(he)),1;ye=0;var Qe=K===""?".":K+":";if(oe(R))for(var Ie=0;Ie<R.length;Ie++)K=R[Ie],de=Qe+z(K,Ie),ye+=lt(K,q,J,de,he);else if(Ie=S(R),typeof Ie=="function")for(R=Ie.call(R),Ie=0;!(K=R.next()).done;)K=K.value,de=Qe+z(K,Ie++),ye+=lt(K,q,J,de,he);else if(de==="object"){if(typeof R.then=="function")return lt(ot(R),q,J,K,he);throw q=String(R),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ye}function te(R,q,J){if(R==null)return R;var K=[],he=0;return lt(R,K,"","",function(de){return q.call(J,de,he++)}),K}function ce(R){if(R._status===-1){var q=R._result;q=q(),q.then(function(J){(R._status===0||R._status===-1)&&(R._status=1,R._result=J)},function(J){(R._status===0||R._status===-1)&&(R._status=2,R._result=J)}),R._status===-1&&(R._status=0,R._result=q)}if(R._status===1)return R._result.default;throw R._result}var _e=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function W(){}return Ne.Children={map:te,forEach:function(R,q,J){te(R,function(){q.apply(this,arguments)},J)},count:function(R){var q=0;return te(R,function(){q++}),q},toArray:function(R){return te(R,function(q){return q})||[]},only:function(R){if(!N(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ne.Component=M,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ee,Ne.StrictMode=s,Ne.Suspense=d,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(R){return le.H.useMemoCache(R)}},Ne.cache=function(R){return function(){return R.apply(null,arguments)}},Ne.cloneElement=function(R,q,J){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var K=x({},R.props),he=R.key,de=void 0;if(q!=null)for(ye in q.ref!==void 0&&(de=void 0),q.key!==void 0&&(he=""+q.key),q)!ve.call(q,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&q.ref===void 0||(K[ye]=q[ye]);var ye=arguments.length-2;if(ye===1)K.children=J;else if(1<ye){for(var Qe=Array(ye),Ie=0;Ie<ye;Ie++)Qe[Ie]=arguments[Ie+2];K.children=Qe}return V(R.type,he,void 0,void 0,de,K)},Ne.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},Ne.createElement=function(R,q,J){var K,he={},de=null;if(q!=null)for(K in q.key!==void 0&&(de=""+q.key),q)ve.call(q,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(he[K]=q[K]);var ye=arguments.length-2;if(ye===1)he.children=J;else if(1<ye){for(var Qe=Array(ye),Ie=0;Ie<ye;Ie++)Qe[Ie]=arguments[Ie+2];he.children=Qe}if(R&&R.defaultProps)for(K in ye=R.defaultProps,ye)he[K]===void 0&&(he[K]=ye[K]);return V(R,de,void 0,void 0,null,he)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(R){return{$$typeof:p,render:R}},Ne.isValidElement=N,Ne.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:ce}},Ne.memo=function(R,q){return{$$typeof:m,type:R,compare:q===void 0?null:q}},Ne.startTransition=function(R){var q=le.T,J={};le.T=J;try{var K=R(),he=le.S;he!==null&&he(J,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(W,_e)}catch(de){_e(de)}finally{le.T=q}},Ne.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ne.use=function(R){return le.H.use(R)},Ne.useActionState=function(R,q,J){return le.H.useActionState(R,q,J)},Ne.useCallback=function(R,q){return le.H.useCallback(R,q)},Ne.useContext=function(R){return le.H.useContext(R)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(R,q){return le.H.useDeferredValue(R,q)},Ne.useEffect=function(R,q,J){var K=le.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(R,q)},Ne.useId=function(){return le.H.useId()},Ne.useImperativeHandle=function(R,q,J){return le.H.useImperativeHandle(R,q,J)},Ne.useInsertionEffect=function(R,q){return le.H.useInsertionEffect(R,q)},Ne.useLayoutEffect=function(R,q){return le.H.useLayoutEffect(R,q)},Ne.useMemo=function(R,q){return le.H.useMemo(R,q)},Ne.useOptimistic=function(R,q){return le.H.useOptimistic(R,q)},Ne.useReducer=function(R,q,J){return le.H.useReducer(R,q,J)},Ne.useRef=function(R){return le.H.useRef(R)},Ne.useState=function(R){return le.H.useState(R)},Ne.useSyncExternalStore=function(R,q,J){return le.H.useSyncExternalStore(R,q,J)},Ne.useTransition=function(){return le.H.useTransition()},Ne.version="19.1.0",Ne}var c0;function rf(){return c0||(c0=1,Mm.exports=S1()),Mm.exports}var j=rf();const wt=vT(j);var Pm={exports:{}},su={},km={exports:{}},Vm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function w1(){return h0||(h0=1,function(r){function e(te,ce){var _e=te.length;te.push(ce);e:for(;0<_e;){var W=_e-1>>>1,R=te[W];if(0<o(R,ce))te[W]=ce,te[_e]=R,_e=W;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ce=te[0],_e=te.pop();if(_e!==ce){te[0]=_e;e:for(var W=0,R=te.length,q=R>>>1;W<q;){var J=2*(W+1)-1,K=te[J],he=J+1,de=te[he];if(0>o(K,_e))he<R&&0>o(de,K)?(te[W]=de,te[he]=_e,W=he):(te[W]=K,te[J]=_e,W=J);else if(he<R&&0>o(de,_e))te[W]=de,te[he]=_e,W=he;else break e}}return ce}function o(te,ce){var _e=te.sortIndex-ce.sortIndex;return _e!==0?_e:te.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var d=[],m=[],v=1,E=null,S=3,I=!1,x=!1,P=!1,M=!1,Y=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function oe(te){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=te)s(m),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=t(m)}}function le(te){if(P=!1,oe(te),!x)if(t(d)!==null)x=!0,ve||(ve=!0,z());else{var ce=t(m);ce!==null&&lt(le,ce.startTime-te)}}var ve=!1,V=-1,C=5,N=-1;function k(){return M?!0:!(r.unstable_now()-N<C)}function L(){if(M=!1,ve){var te=r.unstable_now();N=te;var ce=!0;try{e:{x=!1,P&&(P=!1,ee(V),V=-1),I=!0;var _e=S;try{t:{for(oe(te),E=t(d);E!==null&&!(E.expirationTime>te&&k());){var W=E.callback;if(typeof W=="function"){E.callback=null,S=E.priorityLevel;var R=W(E.expirationTime<=te);if(te=r.unstable_now(),typeof R=="function"){E.callback=R,oe(te),ce=!0;break t}E===t(d)&&s(d),oe(te)}else s(d);E=t(d)}if(E!==null)ce=!0;else{var q=t(m);q!==null&&lt(le,q.startTime-te),ce=!1}}break e}finally{E=null,S=_e,I=!1}ce=void 0}}finally{ce?z():ve=!1}}}var z;if(typeof $=="function")z=function(){$(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ot=D.port2;D.port1.onmessage=L,z=function(){ot.postMessage(null)}}else z=function(){Y(L,0)};function lt(te,ce){V=Y(function(){te(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(te){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var _e=S;S=ce;try{return te()}finally{S=_e}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var _e=S;S=te;try{return ce()}finally{S=_e}},r.unstable_scheduleCallback=function(te,ce,_e){var W=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?W+_e:W):_e=W,te){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=_e+R,te={id:v++,callback:ce,priorityLevel:te,startTime:_e,expirationTime:R,sortIndex:-1},_e>W?(te.sortIndex=_e,e(m,te),t(d)===null&&te===t(m)&&(P?(ee(V),V=-1):P=!0,lt(le,_e-W))):(te.sortIndex=R,e(d,te),x||I||(x=!0,ve||(ve=!0,z()))),te},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(te){var ce=S;return function(){var _e=S;S=ce;try{return te.apply(this,arguments)}finally{S=_e}}}}(Vm)),Vm}var f0;function A1(){return f0||(f0=1,km.exports=w1()),km.exports}var Lm={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function R1(){if(d0)return vn;d0=1;var r=rf();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:d,containerInfo:m,implementation:v}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vn.createPortal=function(d,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(d,m,null,v)},vn.flushSync=function(d){var m=h.T,v=s.p;try{if(h.T=null,s.p=2,d)return d()}finally{h.T=m,s.p=v,s.d.f()}},vn.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(d,m))},vn.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},vn.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var v=m.as,E=p(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&s.d.X(d,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},vn.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);s.d.M(d,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(d)},vn.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=p(v,m.crossOrigin);s.d.L(d,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},vn.preloadModule=function(d,m){if(typeof d=="string")if(m){var v=p(m.as,m.crossOrigin);s.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(d)},vn.requestFormReset=function(d){s.d.r(d)},vn.unstable_batchedUpdates=function(d,m){return d(m)},vn.useFormState=function(d,m,v){return h.H.useFormState(d,m,v)},vn.useFormStatus=function(){return h.H.useHostTransitionStatus()},vn.version="19.1.0",vn}var m0;function I1(){if(m0)return Lm.exports;m0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lm.exports=R1(),Lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function C1(){if(p0)return su;p0=1;var r=A1(),e=rf(),t=I1();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(s(188))}function d(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var a=n,u=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return p(f),n;if(g===u)return p(f),i;g=g.sibling}throw Error(s(188))}if(a.return!==u.return)a=f,u=g;else{for(var T=!1,w=f.child;w;){if(w===a){T=!0,a=f,u=g;break}if(w===u){T=!0,u=f,a=g;break}w=w.sibling}if(!T){for(w=g.child;w;){if(w===a){T=!0,a=g,u=f;break}if(w===u){T=!0,u=g,a=f;break}w=w.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),$=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ot(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case M:return"Profiler";case P:return"StrictMode";case le:return"Suspense";case ve:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case $:return(n.displayName||"Context")+".Provider";case ee:return(n._context.displayName||"Context")+".Consumer";case oe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return i=n.displayName||null,i!==null?i:ot(n.type)||"Memo";case C:i=n._payload,n=n._init;try{return ot(n(i))}catch{}}return null}var lt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},W=[],R=-1;function q(n){return{current:n}}function J(n){0>R||(n.current=W[R],W[R]=null,R--)}function K(n,i){R++,W[R]=n.current,n.current=i}var he=q(null),de=q(null),ye=q(null),Qe=q(null);function Ie(n,i){switch(K(ye,i),K(de,n),K(he,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?k_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=k_(i),n=V_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(he),K(he,n)}function _t(){J(he),J(de),J(ye)}function Zt(n){n.memoizedState!==null&&K(Qe,n);var i=he.current,a=V_(i,n.type);i!==a&&(K(de,n),K(he,a))}function Ye(n){de.current===n&&(J(he),J(de)),Qe.current===n&&(J(Qe),Jl._currentValue=_e)}var ht=Object.prototype.hasOwnProperty,Ht=r.unstable_scheduleCallback,xt=r.unstable_cancelCallback,pt=r.unstable_shouldYield,Nt=r.unstable_requestPaint,ft=r.unstable_now,wn=r.unstable_getCurrentPriorityLevel,Et=r.unstable_ImmediatePriority,Tt=r.unstable_UserBlockingPriority,Xe=r.unstable_NormalPriority,ze=r.unstable_LowPriority,nt=r.unstable_IdlePriority,dt=r.log,bt=r.unstable_setDisableYieldValue,fe=null,Be=null;function Me(n){if(typeof dt=="function"&&bt(n),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(fe,n)}catch{}}var Le=Math.clz32?Math.clz32:Jr,Jt=Math.log,Cr=Math.LN2;function Jr(n){return n>>>=0,n===0?32:31-(Jt(n)/Cr|0)|0}var ei=256,xr=4194304;function Nn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function xa(n,i,a){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~g,u!==0?f=Nn(u):(T&=w,T!==0?f=Nn(T):a||(a=w&~n,a!==0&&(f=Nn(a))))):(w=u&~g,w!==0?f=Nn(w):T!==0?f=Nn(T):a||(a=u&~n,a!==0&&(f=Nn(a)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:f}function ks(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Jo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function el(){var n=ei;return ei<<=1,(ei&4194048)===0&&(ei=256),n}function tl(){var n=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),n}function ti(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ni(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nl(n,i,a,u,f,g){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,O=n.expirationTimes,G=n.hiddenUpdates;for(a=T&~a;0<a;){var ne=31-Le(a),ie=1<<ne;w[ne]=0,O[ne]=-1;var Q=G[ne];if(Q!==null)for(G[ne]=null,ne=0;ne<Q.length;ne++){var X=Q[ne];X!==null&&(X.lane&=-536870913)}a&=~ie}u!==0&&Nr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(T&~i))}function Nr(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Le(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|a&4194090}function rl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-Le(a),f=1<<u;f&i|n[u]&i&&(n[u]|=i),a&=~f}}function ji(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Na(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function zi(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:t0(n.type))}function Qu(n,i){var a=ce.p;try{return ce.p=n,i()}finally{ce.p=a}}var gt=Math.random().toString(36).slice(2),Ft="__reactFiber$"+gt,kt="__reactProps$"+gt,Xn="__reactContainer$"+gt,il="__reactEvents$"+gt,kf="__reactListeners$"+gt,Bi="__reactHandles$"+gt,Yu="__reactResources$"+gt,Vs="__reactMarker$"+gt;function qi(n){delete n[Ft],delete n[kt],delete n[il],delete n[kf],delete n[Bi]}function ri(n){var i=n[Ft];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Xn]||a[Ft]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=z_(n);n!==null;){if(a=n[Ft])return a;n=z_(n)}return i}n=a,a=n.parentNode}return null}function Dr(n){if(n=n[Ft]||n[Xn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Or(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function An(n){var i=n[Yu];return i||(i=n[Yu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Dt(n){n[Vs]=!0}var sl=new Set,Da={};function mr(n,i){ii(n,i),ii(n+"Capture",i)}function ii(n,i){for(Da[n]=i,n=0;n<i.length;n++)sl.add(i[n])}var Xu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wu={},Ls={};function Zu(n){return ht.call(Ls,n)?!0:ht.call(Wu,n)?!1:Xu.test(n)?Ls[n]=!0:(Wu[n]=!0,!1)}function Hi(n,i,a){if(Zu(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Mr(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function ln(n,i,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+u)}}var Us,Ju;function si(n){if(Us===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Us=i&&i[1]||"",Ju=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+n+Ju}var Oa=!1;function Ma(n,i){if(!n||Oa)return"";Oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var Q=X}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(X){Q=X}n.call(ie.prototype)}}else{try{throw Error()}catch(X){Q=X}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],w=g[1];if(T&&w){var O=T.split(`
`),G=w.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===G.length)for(u=O.length-1,f=G.length-1;1<=u&&0<=f&&O[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==G[f]){var ne=`
`+O[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=f);break}}}finally{Oa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?si(a):""}function al(n){switch(n.tag){case 26:case 27:case 5:return si(n.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return Ma(n.type,!1);case 11:return Ma(n.type.render,!1);case 1:return Ma(n.type,!0);case 31:return si("Activity");default:return""}}function Pa(n){try{var i="";do i+=al(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Rn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ol(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vf(n){var i=ol(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){u=""+T,g.call(this,T)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ka(n){n._valueTracker||(n._valueTracker=Vf(n))}function ll(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return n&&(u=ol(n)?n.checked?"true":"false":n.value),n=u,n!==a?(i.setValue(n),!0):!1}function js(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Lf=/[\n"\\]/g;function Vt(n){return n.replace(Lf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function jn(n,i,a,u,f,g,T,w){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),i!=null?T==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Rn(i)):n.value!==""+Rn(i)&&(n.value=""+Rn(i)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),i!=null?Fi(n,T,Rn(i)):a!=null?Fi(n,T,Rn(a)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Rn(w):n.removeAttribute("name")}function zs(n,i,a,u,f,g,T,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;a=a!=null?""+Rn(a):"",i=i!=null?""+Rn(i):a,w||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Fi(n,i,a){i==="number"&&js(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ai(n,i,a,u){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Rn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function rt(n,i,a){if(i!=null&&(i=""+Rn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Rn(a):""}function Bs(n,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(lt(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Rn(i),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u)}function Wn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ec(n,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,a):typeof a!="number"||a===0||qs.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function ul(n,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&a[f]!==u&&ec(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&ec(n,g,i[g])}function cl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(n){return jf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var oi=null;function Zn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var li=null,ui=null;function hl(n){var i=Dr(n);if(i&&(n=i.stateNode)){var a=n[kt]||null;e:switch(n=i.stateNode,i.type){case"input":if(jn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Vt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==n&&u.form===n.form){var f=u[kt]||null;if(!f)throw Error(s(90));jn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===n.form&&ll(u)}break e;case"textarea":rt(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ai(n,!!a.multiple,i,!1)}}}var Pr=!1;function tc(n,i,a){if(Pr)return n(i,a);Pr=!0;try{var u=n(i);return u}finally{if(Pr=!1,(li!==null||ui!==null)&&(Qc(),li&&(i=li,n=ui,ui=li=null,hl(i),n)))for(i=0;i<n.length;i++)hl(n[i])}}function Hs(n,i){var a=n.stateNode;if(a===null)return null;var u=a[kt]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jn=!1;if(pr)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Jn=!1}var kr=null,Gi=null,ci=null;function fl(){if(ci)return ci;var n,i=Gi,a=i.length,u,f="value"in kr?kr.value:kr.textContent,g=f.length;for(n=0;n<a&&i[n]===f[n];n++);var T=a-n;for(u=1;u<=T&&i[a-u]===f[g-u];u++);return ci=f.slice(n,1<u?1-u:void 0)}function Vr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Lr(){return!0}function dl(){return!1}function en(n){function i(a,u,f,g,T){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Lr:dl,this.isPropagationStopped=dl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),i}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=en(Ze),Gs=v({},Ze,{view:0,detail:0}),nc=en(Gs),Ua,ja,Ur,$s=v({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ur&&(Ur&&n.type==="mousemove"?(Ua=n.screenX-Ur.screenX,ja=n.screenY-Ur.screenY):ja=Ua=0,Ur=n),Ua)},movementY:function(n){return"movementY"in n?n.movementY:ja}}),er=en($s),rc=v({},$s,{dataTransfer:0}),zf=en(rc),Ks=v({},Gs,{relatedTarget:0}),za=en(Ks),ml=v({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=en(ml),ic=v({},Ze,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qa=en(ic),Bf=v({},Ze,{data:0}),pl=en(Bf),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ac[n])?!!i[n]:!1}function Ys(){return gl}var oc=v({},Gs,{key:function(n){if(n.key){var i=Qs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Vr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(n){return n.type==="keypress"?Vr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ha=en(oc),lc=v({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yl=en(lc),hi=v({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),uc=en(hi),cc=v({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),hc=en(cc),fc=v({},$s,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fa=en(fc),In=v({},Ze,{newState:0,oldState:0}),dc=en(In),mc=[9,13,27,32],jr=pr&&"CompositionEvent"in window,c=null;pr&&"documentMode"in document&&(c=document.documentMode);var y=pr&&"TextEvent"in window&&!c,_=pr&&(!jr||c&&8<c&&11>=c),A=" ",H=!1;function Z(n,i){switch(n){case"keyup":return mc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qe=!1;function Gt(n,i){switch(n){case"compositionend":return ue(i);case"keypress":return i.which!==32?null:(H=!0,A);case"textInput":return n=i.data,n===A&&H?null:n;default:return null}}function He(n,i){if(qe)return n==="compositionend"||!jr&&Z(n,i)?(n=fl(),ci=Gi=kr=null,qe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $t(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!tn[n.type]:i==="textarea"}function fi(n,i,a,u){li?ui?ui.push(u):ui=[u]:li=u,i=eh(i,"onChange"),0<i.length&&(a=new La("onChange","change",null,a,u),n.push({event:a,listeners:i}))}var un=null,zr=null;function vl(n){N_(n,0)}function pc(n){var i=Or(n);if(ll(i))return n}function Wg(n,i){if(n==="change")return i}var Zg=!1;if(pr){var qf;if(pr){var Hf="oninput"in document;if(!Hf){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),Hf=typeof Jg.oninput=="function"}qf=Hf}else qf=!1;Zg=qf&&(!document.documentMode||9<document.documentMode)}function ey(){un&&(un.detachEvent("onpropertychange",ty),zr=un=null)}function ty(n){if(n.propertyName==="value"&&pc(zr)){var i=[];fi(i,zr,n,Zn(n)),tc(vl,i)}}function Ww(n,i,a){n==="focusin"?(ey(),un=i,zr=a,un.attachEvent("onpropertychange",ty)):n==="focusout"&&ey()}function Zw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pc(zr)}function Jw(n,i){if(n==="click")return pc(i)}function eA(n,i){if(n==="input"||n==="change")return pc(i)}function tA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var zn=typeof Object.is=="function"?Object.is:tA;function _l(n,i){if(zn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!ht.call(i,f)||!zn(n[f],i[f]))return!1}return!0}function ny(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ry(n,i){var a=ny(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=i&&u>=i)return{node:a,offset:i-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ny(a)}}function iy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?iy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function sy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=js(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=js(n.document)}return i}function Ff(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var nA=pr&&"documentMode"in document&&11>=document.documentMode,Ga=null,Gf=null,El=null,$f=!1;function ay(n,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$f||Ga==null||Ga!==js(u)||(u=Ga,"selectionStart"in u&&Ff(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&_l(El,u)||(El=u,u=eh(Gf,"onSelect"),0<u.length&&(i=new La("onSelect","select",null,i,a),n.push({event:i,listeners:u}),i.target=Ga)))}function Xs(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var $a={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Kf={},oy={};pr&&(oy=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Ws(n){if(Kf[n])return Kf[n];if(!$a[n])return n;var i=$a[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in oy)return Kf[n]=i[a];return n}var ly=Ws("animationend"),uy=Ws("animationiteration"),cy=Ws("animationstart"),rA=Ws("transitionrun"),iA=Ws("transitionstart"),sA=Ws("transitioncancel"),hy=Ws("transitionend"),fy=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function gr(n,i){fy.set(n,i),mr(i,[n])}var dy=new WeakMap;function tr(n,i){if(typeof n=="object"&&n!==null){var a=dy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Pa(i)},dy.set(n,i),i)}return{value:n,source:i,stack:Pa(i)}}var nr=[],Ka=0,Yf=0;function gc(){for(var n=Ka,i=Yf=Ka=0;i<n;){var a=nr[i];nr[i++]=null;var u=nr[i];nr[i++]=null;var f=nr[i];nr[i++]=null;var g=nr[i];if(nr[i++]=null,u!==null&&f!==null){var T=u.pending;T===null?f.next=f:(f.next=T.next,T.next=f),u.pending=f}g!==0&&my(a,f,g)}}function yc(n,i,a,u){nr[Ka++]=n,nr[Ka++]=i,nr[Ka++]=a,nr[Ka++]=u,Yf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Xf(n,i,a,u){return yc(n,i,a,u),vc(n)}function Qa(n,i){return yc(n,null,null,i),vc(n)}function my(n,i,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var f=!1,g=n.return;g!==null;)g.childLanes|=a,u=g.alternate,u!==null&&(u.childLanes|=a),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-Le(a),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=a|536870912),g):null}function vc(n){if(50<Gl)throw Gl=0,nm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ya={};function aA(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(n,i,a,u){return new aA(n,i,a,u)}function Wf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function di(n,i){var a=n.alternate;return a===null?(a=Bn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function py(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function _c(n,i,a,u,f,g){var T=0;if(u=n,typeof n=="function")Wf(n)&&(T=1);else if(typeof n=="string")T=l1(n,a,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Bn(31,a,i,f),n.elementType=N,n.lanes=g,n;case x:return Zs(a.children,f,g,i);case P:T=8,f|=24;break;case M:return n=Bn(12,a,i,f|2),n.elementType=M,n.lanes=g,n;case le:return n=Bn(13,a,i,f),n.elementType=le,n.lanes=g,n;case ve:return n=Bn(19,a,i,f),n.elementType=ve,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:case $:T=10;break e;case ee:T=9;break e;case oe:T=11;break e;case V:T=14;break e;case C:T=16,u=null;break e}T=29,a=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=Bn(T,a,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function Zs(n,i,a,u){return n=Bn(7,n,u,i),n.lanes=a,n}function Zf(n,i,a){return n=Bn(6,n,null,i),n.lanes=a,n}function Jf(n,i,a){return i=Bn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Xa=[],Wa=0,Ec=null,Tc=0,rr=[],ir=0,Js=null,mi=1,pi="";function ea(n,i){Xa[Wa++]=Tc,Xa[Wa++]=Ec,Ec=n,Tc=i}function gy(n,i,a){rr[ir++]=mi,rr[ir++]=pi,rr[ir++]=Js,Js=n;var u=mi;n=pi;var f=32-Le(u)-1;u&=~(1<<f),a+=1;var g=32-Le(i)+f;if(30<g){var T=f-f%5;g=(u&(1<<T)-1).toString(32),u>>=T,f-=T,mi=1<<32-Le(i)+f|a<<f|u,pi=g+n}else mi=1<<g|a<<f|u,pi=n}function ed(n){n.return!==null&&(ea(n,1),gy(n,1,0))}function td(n){for(;n===Ec;)Ec=Xa[--Wa],Xa[Wa]=null,Tc=Xa[--Wa],Xa[Wa]=null;for(;n===Js;)Js=rr[--ir],rr[ir]=null,pi=rr[--ir],rr[ir]=null,mi=rr[--ir],rr[ir]=null}var Cn=null,Rt=null,We=!1,ta=null,Br=!1,nd=Error(s(519));function na(n){var i=Error(s(418,""));throw Sl(tr(i,n)),nd}function yy(n){var i=n.stateNode,a=n.type,u=n.memoizedProps;switch(i[Ft]=n,i[kt]=u,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<Kl.length;a++)Ve(Kl[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),zs(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ka(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),Bs(i,u.value,u.defaultValue,u.children),ka(i)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||P_(i.textContent,a)?(u.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),u.onScroll!=null&&Ve("scroll",i),u.onScrollEnd!=null&&Ve("scrollend",i),u.onClick!=null&&(i.onclick=th),i=!0):i=!1,i||na(n)}function vy(n){for(Cn=n.return;Cn;)switch(Cn.tag){case 5:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Cn=Cn.return}}function Tl(n){if(n!==Cn)return!1;if(!We)return vy(n),We=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||vm(n.type,n.memoizedProps)),a=!a),a&&Rt&&na(n),vy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){Rt=vr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}Rt=null}}else i===27?(i=Rt,os(n.type)?(n=bm,bm=null,Rt=n):Rt=i):Rt=Cn?vr(n.stateNode.nextSibling):null;return!0}function bl(){Rt=Cn=null,We=!1}function _y(){var n=ta;return n!==null&&(Mn===null?Mn=n:Mn.push.apply(Mn,n),ta=null),n}function Sl(n){ta===null?ta=[n]:ta.push(n)}var rd=q(null),ra=null,gi=null;function $i(n,i,a){K(rd,i._currentValue),i._currentValue=a}function yi(n){n._currentValue=rd.current,J(rd)}function id(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function sd(n,i,a,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var T=f.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=f;for(var O=0;O<i.length;O++)if(w.context===i[O]){g.lanes|=a,w=g.alternate,w!==null&&(w.lanes|=a),id(g.return,a,n),u||(T=null);break e}g=w.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=a,g=T.alternate,g!==null&&(g.lanes|=a),id(T,a,n),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===n){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function wl(n,i,a,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=f.type;zn(f.pendingProps.value,T.value)||(n!==null?n.push(w):n=[w])}}else if(f===Qe.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Jl):n=[Jl])}f=f.return}n!==null&&sd(i,n,a,u),i.flags|=262144}function bc(n){for(n=n.firstContext;n!==null;){if(!zn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){ra=n,gi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function yn(n){return Ey(ra,n)}function Sc(n,i){return ra===null&&ia(n),Ey(n,i)}function Ey(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},gi===null){if(n===null)throw Error(s(308));gi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else gi=gi.next=i;return a}var oA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},lA=r.unstable_scheduleCallback,uA=r.unstable_NormalPriority,Kt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ad(){return{controller:new oA,data:new Map,refCount:0}}function Al(n){n.refCount--,n.refCount===0&&lA(uA,function(){n.controller.abort()})}var Rl=null,od=0,Za=0,Ja=null;function cA(n,i){if(Rl===null){var a=Rl=[];od=0,Za=um(),Ja={status:"pending",value:void 0,then:function(u){a.push(u)}}}return od++,i.then(Ty,Ty),i}function Ty(){if(--od===0&&Rl!==null){Ja!==null&&(Ja.status="fulfilled");var n=Rl;Rl=null,Za=0,Ja=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function hA(n,i){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var by=te.S;te.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&cA(n,i),by!==null&&by(n,i)};var sa=q(null);function ld(){var n=sa.current;return n!==null?n:ct.pooledCache}function wc(n,i){i===null?K(sa,sa.current):K(sa,i.pool)}function Sy(){var n=ld();return n===null?null:{parent:Kt._currentValue,pool:n}}var Il=Error(s(460)),wy=Error(s(474)),Ac=Error(s(542)),ud={then:function(){}};function Ay(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Rc(){}function Ry(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Rc,Rc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Cy(n),n;default:if(typeof i.status=="string")i.then(Rc,Rc);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Cy(n),n}throw Cl=i,Il}}var Cl=null;function Iy(){if(Cl===null)throw Error(s(459));var n=Cl;return Cl=null,n}function Cy(n){if(n===Il||n===Ac)throw Error(s(483))}var Ki=!1;function cd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Qi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Yi(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(et&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=vc(n),my(n,null,a),i}return yc(n,u,i,a),vc(n)}function xl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,rl(n,a)}}function fd(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?f=g=T:g=g.next=T,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var dd=!1;function Nl(){if(dd){var n=Ja;if(n!==null)throw n}}function Dl(n,i,a,u){dd=!1;var f=n.updateQueue;Ki=!1;var g=f.firstBaseUpdate,T=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var O=w,G=O.next;O.next=null,T===null?g=G:T.next=G,T=O;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,w=ne.lastBaseUpdate,w!==T&&(w===null?ne.firstBaseUpdate=G:w.next=G,ne.lastBaseUpdate=O))}if(g!==null){var ie=f.baseState;T=0,ne=G=O=null,w=g;do{var Q=w.lane&-536870913,X=Q!==w.lane;if(X?(Fe&Q)===Q:(u&Q)===Q){Q!==0&&Q===Za&&(dd=!0),ne!==null&&(ne=ne.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=n,be=w;Q=i;var at=a;switch(be.tag){case 1:if(Re=be.payload,typeof Re=="function"){ie=Re.call(at,ie,Q);break e}ie=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=be.payload,Q=typeof Re=="function"?Re.call(at,ie,Q):Re,Q==null)break e;ie=v({},ie,Q);break e;case 2:Ki=!0}}Q=w.callback,Q!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ne===null?(G=ne=X,O=ie):ne=ne.next=X,T|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;X=w,w=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);ne===null&&(O=ie),f.baseState=O,f.firstBaseUpdate=G,f.lastBaseUpdate=ne,g===null&&(f.shared.lanes=0),rs|=T,n.lanes=T,n.memoizedState=ie}}function xy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Ny(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)xy(a[n],i)}var eo=q(null),Ic=q(0);function Dy(n,i){n=wi,K(Ic,n),K(eo,i),wi=n|i.baseLanes}function md(){K(Ic,wi),K(eo,eo.current)}function pd(){wi=Ic.current,J(eo),J(Ic)}var Xi=0,De=null,it=null,Lt=null,Cc=!1,to=!1,aa=!1,xc=0,Ol=0,no=null,fA=0;function Ot(){throw Error(s(321))}function gd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!zn(n[a],i[a]))return!1;return!0}function yd(n,i,a,u,f,g){return Xi=g,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,te.H=n===null||n.memoizedState===null?mv:pv,aa=!1,g=a(u,f),aa=!1,to&&(g=My(i,a,u,f)),Oy(n),g}function Oy(n){te.H=kc;var i=it!==null&&it.next!==null;if(Xi=0,Lt=it=De=null,Cc=!1,Ol=0,no=null,i)throw Error(s(300));n===null||nn||(n=n.dependencies,n!==null&&bc(n)&&(nn=!0))}function My(n,i,a,u){De=n;var f=0;do{if(to&&(no=null),Ol=0,to=!1,25<=f)throw Error(s(301));if(f+=1,Lt=it=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}te.H=_A,g=i(a,u)}while(to);return g}function dA(){var n=te.H,i=n.useState()[0];return i=typeof i.then=="function"?Ml(i):i,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(De.flags|=1024),i}function vd(){var n=xc!==0;return xc=0,n}function _d(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Ed(n){if(Cc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Cc=!1}Xi=0,Lt=it=De=null,to=!1,Ol=xc=0,no=null}function Dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?De.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function Ut(){if(it===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var i=Lt===null?De.memoizedState:Lt.next;if(i!==null)Lt=i,it=n;else{if(n===null)throw De.alternate===null?Error(s(467)):Error(s(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Lt===null?De.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function Td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(n){var i=Ol;return Ol+=1,no===null&&(no=[]),n=Ry(no,n,i),i=De,(Lt===null?i.memoizedState:Lt.next)===null&&(i=i.alternate,te.H=i===null||i.memoizedState===null?mv:pv),n}function Nc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ml(n);if(n.$$typeof===$)return yn(n)}throw Error(s(438,String(n)))}function bd(n){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Td(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),u=0;u<n;u++)a[u]=k;return i.index++,a}function vi(n,i){return typeof i=="function"?i(n):i}function Dc(n){var i=Ut();return Sd(i,it,n)}function Sd(n,i,a){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var T=f.next;f.next=g.next,g.next=T}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var w=T=null,O=null,G=i,ne=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(Fe&ie)===ie:(Xi&ie)===ie){var Q=G.revertLane;if(Q===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===Za&&(ne=!0);else if((Xi&Q)===Q){G=G.next,Q===Za&&(ne=!0);continue}else ie={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(w=O=ie,T=g):O=O.next=ie,De.lanes|=Q,rs|=Q;ie=G.action,aa&&a(g,ie),g=G.hasEagerState?G.eagerState:a(g,ie)}else Q={lane:ie,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(w=O=Q,T=g):O=O.next=Q,De.lanes|=ie,rs|=ie;G=G.next}while(G!==null&&G!==i);if(O===null?T=g:O.next=w,!zn(g,n.memoizedState)&&(nn=!0,ne&&(a=Ja,a!==null)))throw a;n.memoizedState=g,n.baseState=T,n.baseQueue=O,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function wd(n){var i=Ut(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var u=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do g=n(g,T.action),T=T.next;while(T!==f);zn(g,i.memoizedState)||(nn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,u]}function Py(n,i,a){var u=De,f=Ut(),g=We;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=i();var T=!zn((it||f).memoizedState,a);T&&(f.memoizedState=a,nn=!0),f=f.queue;var w=Ly.bind(null,u,f,n);if(Pl(2048,8,w,[n]),f.getSnapshot!==i||T||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,ro(9,Oc(),Vy.bind(null,u,f,a,i),null),ct===null)throw Error(s(349));g||(Xi&124)!==0||ky(u,i,a)}return a}function ky(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=Td(),De.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Vy(n,i,a,u){i.value=a,i.getSnapshot=u,Uy(i)&&jy(n)}function Ly(n,i,a){return a(function(){Uy(i)&&jy(n)})}function Uy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!zn(n,a)}catch{return!0}}function jy(n){var i=Qa(n,2);i!==null&&$n(i,n,2)}function Ad(n){var i=Dn();if(typeof n=="function"){var a=n;if(n=a(),aa){Me(!0);try{a()}finally{Me(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},i}function zy(n,i,a,u){return n.baseState=a,Sd(n,it,typeof u=="function"?u:vi)}function mA(n,i,a,u,f){if(Pc(n))throw Error(s(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};te.T!==null?a(!0):g.isTransition=!1,u(g),a=i.pending,a===null?(g.next=i.pending=g,By(i,g)):(g.next=a.next,i.pending=a.next=g)}}function By(n,i){var a=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=te.T,T={};te.T=T;try{var w=a(f,u),O=te.S;O!==null&&O(T,w),qy(n,i,w)}catch(G){Rd(n,i,G)}finally{te.T=g}}else try{g=a(f,u),qy(n,i,g)}catch(G){Rd(n,i,G)}}function qy(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Hy(n,i,u)},function(u){return Rd(n,i,u)}):Hy(n,i,a)}function Hy(n,i,a){i.status="fulfilled",i.value=a,Fy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,By(n,a)))}function Rd(n,i,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Fy(i),i=i.next;while(i!==u)}n.action=null}function Fy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Gy(n,i){return i}function $y(n,i){if(We){var a=ct.formState;if(a!==null){e:{var u=De;if(We){if(Rt){t:{for(var f=Rt,g=Br;f.nodeType!==8;){if(!g){f=null;break t}if(f=vr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Rt=vr(f.nextSibling),u=f.data==="F!";break e}}na(u)}u=!1}u&&(i=a[0])}}return a=Dn(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:i},a.queue=u,a=hv.bind(null,De,u),u.dispatch=a,u=Ad(!1),g=Dd.bind(null,De,!1,u.queue),u=Dn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,a=mA.bind(null,De,f,g,a),f.dispatch=a,u.memoizedState=n,[i,a,!1]}function Ky(n){var i=Ut();return Qy(i,it,n)}function Qy(n,i,a){if(i=Sd(n,i,Gy)[0],n=Dc(vi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Ml(i)}catch(T){throw T===Il?Ac:T}else u=i;i=Ut();var f=i.queue,g=f.dispatch;return a!==i.memoizedState&&(De.flags|=2048,ro(9,Oc(),pA.bind(null,f,a),null)),[u,g,n]}function pA(n,i){n.action=i}function Yy(n){var i=Ut(),a=it;if(a!==null)return Qy(i,a,n);Ut(),i=i.memoizedState,a=Ut();var u=a.queue.dispatch;return a.memoizedState=n,[i,u,!1]}function ro(n,i,a,u){return n={tag:n,create:a,deps:u,inst:i,next:null},i=De.updateQueue,i===null&&(i=Td(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n),n}function Oc(){return{destroy:void 0,resource:void 0}}function Xy(){return Ut().memoizedState}function Mc(n,i,a,u){var f=Dn();u=u===void 0?null:u,De.flags|=n,f.memoizedState=ro(1|i,Oc(),a,u)}function Pl(n,i,a,u){var f=Ut();u=u===void 0?null:u;var g=f.memoizedState.inst;it!==null&&u!==null&&gd(u,it.memoizedState.deps)?f.memoizedState=ro(i,g,a,u):(De.flags|=n,f.memoizedState=ro(1|i,g,a,u))}function Wy(n,i){Mc(8390656,8,n,i)}function Zy(n,i){Pl(2048,8,n,i)}function Jy(n,i){return Pl(4,2,n,i)}function ev(n,i){return Pl(4,4,n,i)}function tv(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function nv(n,i,a){a=a!=null?a.concat([n]):null,Pl(4,4,tv.bind(null,i,n),a)}function Id(){}function rv(n,i){var a=Ut();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&gd(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function iv(n,i){var a=Ut();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&gd(i,u[1]))return u[0];if(u=n(),aa){Me(!0);try{n()}finally{Me(!1)}}return a.memoizedState=[u,i],u}function Cd(n,i,a){return a===void 0||(Xi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=o_(),De.lanes|=n,rs|=n,a)}function sv(n,i,a,u){return zn(a,i)?a:eo.current!==null?(n=Cd(n,a,u),zn(n,i)||(nn=!0),n):(Xi&42)===0?(nn=!0,n.memoizedState=a):(n=o_(),De.lanes|=n,rs|=n,i)}function av(n,i,a,u,f){var g=ce.p;ce.p=g!==0&&8>g?g:8;var T=te.T,w={};te.T=w,Dd(n,!1,i,a);try{var O=f(),G=te.S;if(G!==null&&G(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=hA(O,u);kl(n,i,ne,Gn(n))}else kl(n,i,u,Gn(n))}catch(ie){kl(n,i,{then:function(){},status:"rejected",reason:ie},Gn())}finally{ce.p=g,te.T=T}}function gA(){}function xd(n,i,a,u){if(n.tag!==5)throw Error(s(476));var f=ov(n).queue;av(n,f,i,_e,a===null?gA:function(){return lv(n),a(u)})}function ov(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function lv(n){var i=ov(n).next.queue;kl(n,i,{},Gn())}function Nd(){return yn(Jl)}function uv(){return Ut().memoizedState}function cv(){return Ut().memoizedState}function yA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Gn();n=Qi(a);var u=Yi(i,n,a);u!==null&&($n(u,i,a),xl(u,i,a)),i={cache:ad()},n.payload=i;return}i=i.return}}function vA(n,i,a){var u=Gn();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Pc(n)?fv(i,a):(a=Xf(n,i,a,u),a!==null&&($n(a,n,u),dv(a,i,u)))}function hv(n,i,a){var u=Gn();kl(n,i,a,u)}function kl(n,i,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pc(n))fv(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var T=i.lastRenderedState,w=g(T,a);if(f.hasEagerState=!0,f.eagerState=w,zn(w,T))return yc(n,i,f,0),ct===null&&gc(),!1}catch{}finally{}if(a=Xf(n,i,f,u),a!==null)return $n(a,n,u),dv(a,i,u),!0}return!1}function Dd(n,i,a,u){if(u={lane:2,revertLane:um(),action:u,hasEagerState:!1,eagerState:null,next:null},Pc(n)){if(i)throw Error(s(479))}else i=Xf(n,a,u,2),i!==null&&$n(i,n,2)}function Pc(n){var i=n.alternate;return n===De||i!==null&&i===De}function fv(n,i){to=Cc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function dv(n,i,a){if((a&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,rl(n,a)}}var kc={readContext:yn,use:Nc,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},mv={readContext:yn,use:Nc,useCallback:function(n,i){return Dn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:Wy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Mc(4194308,4,tv.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Mc(4194308,4,n,i)},useInsertionEffect:function(n,i){Mc(4,2,n,i)},useMemo:function(n,i){var a=Dn();i=i===void 0?null:i;var u=n();if(aa){Me(!0);try{n()}finally{Me(!1)}}return a.memoizedState=[u,i],u},useReducer:function(n,i,a){var u=Dn();if(a!==void 0){var f=a(i);if(aa){Me(!0);try{a(i)}finally{Me(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=vA.bind(null,De,n),[u.memoizedState,n]},useRef:function(n){var i=Dn();return n={current:n},i.memoizedState=n},useState:function(n){n=Ad(n);var i=n.queue,a=hv.bind(null,De,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Id,useDeferredValue:function(n,i){var a=Dn();return Cd(a,n,i)},useTransition:function(){var n=Ad(!1);return n=av.bind(null,De,n.queue,!0,!1),Dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var u=De,f=Dn();if(We){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ct===null)throw Error(s(349));(Fe&124)!==0||ky(u,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,Wy(Ly.bind(null,u,g,n),[n]),u.flags|=2048,ro(9,Oc(),Vy.bind(null,u,g,a,i),null),a},useId:function(){var n=Dn(),i=ct.identifierPrefix;if(We){var a=pi,u=mi;a=(u&~(1<<32-Le(u)-1)).toString(32)+a,i="«"+i+"R"+a,a=xc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=fA++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Nd,useFormState:$y,useActionState:$y,useOptimistic:function(n){var i=Dn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Dd.bind(null,De,!0,a),a.dispatch=i,[n,i]},useMemoCache:bd,useCacheRefresh:function(){return Dn().memoizedState=yA.bind(null,De)}},pv={readContext:yn,use:Nc,useCallback:rv,useContext:yn,useEffect:Zy,useImperativeHandle:nv,useInsertionEffect:Jy,useLayoutEffect:ev,useMemo:iv,useReducer:Dc,useRef:Xy,useState:function(){return Dc(vi)},useDebugValue:Id,useDeferredValue:function(n,i){var a=Ut();return sv(a,it.memoizedState,n,i)},useTransition:function(){var n=Dc(vi)[0],i=Ut().memoizedState;return[typeof n=="boolean"?n:Ml(n),i]},useSyncExternalStore:Py,useId:uv,useHostTransitionStatus:Nd,useFormState:Ky,useActionState:Ky,useOptimistic:function(n,i){var a=Ut();return zy(a,it,n,i)},useMemoCache:bd,useCacheRefresh:cv},_A={readContext:yn,use:Nc,useCallback:rv,useContext:yn,useEffect:Zy,useImperativeHandle:nv,useInsertionEffect:Jy,useLayoutEffect:ev,useMemo:iv,useReducer:wd,useRef:Xy,useState:function(){return wd(vi)},useDebugValue:Id,useDeferredValue:function(n,i){var a=Ut();return it===null?Cd(a,n,i):sv(a,it.memoizedState,n,i)},useTransition:function(){var n=wd(vi)[0],i=Ut().memoizedState;return[typeof n=="boolean"?n:Ml(n),i]},useSyncExternalStore:Py,useId:uv,useHostTransitionStatus:Nd,useFormState:Yy,useActionState:Yy,useOptimistic:function(n,i){var a=Ut();return it!==null?zy(a,it,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:bd,useCacheRefresh:cv},io=null,Vl=0;function Vc(n){var i=Vl;return Vl+=1,io===null&&(io=[]),Ry(io,n,i)}function Ll(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Lc(n,i){throw i.$$typeof===E?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function gv(n){var i=n._init;return i(n._payload)}function yv(n){function i(B,U){if(n){var F=B.deletions;F===null?(B.deletions=[U],B.flags|=16):F.push(U)}}function a(B,U){if(!n)return null;for(;U!==null;)i(B,U),U=U.sibling;return null}function u(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function f(B,U){return B=di(B,U),B.index=0,B.sibling=null,B}function g(B,U,F){return B.index=F,n?(F=B.alternate,F!==null?(F=F.index,F<U?(B.flags|=67108866,U):F):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function T(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function w(B,U,F,re){return U===null||U.tag!==6?(U=Zf(F,B.mode,re),U.return=B,U):(U=f(U,F),U.return=B,U)}function O(B,U,F,re){var ge=F.type;return ge===x?ne(B,U,F.props.children,re,F.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&gv(ge)===U.type)?(U=f(U,F.props),Ll(U,F),U.return=B,U):(U=_c(F.type,F.key,F.props,null,B.mode,re),Ll(U,F),U.return=B,U)}function G(B,U,F,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==F.containerInfo||U.stateNode.implementation!==F.implementation?(U=Jf(F,B.mode,re),U.return=B,U):(U=f(U,F.children||[]),U.return=B,U)}function ne(B,U,F,re,ge){return U===null||U.tag!==7?(U=Zs(F,B.mode,re,ge),U.return=B,U):(U=f(U,F),U.return=B,U)}function ie(B,U,F){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Zf(""+U,B.mode,F),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return F=_c(U.type,U.key,U.props,null,B.mode,F),Ll(F,U),F.return=B,F;case I:return U=Jf(U,B.mode,F),U.return=B,U;case C:var re=U._init;return U=re(U._payload),ie(B,U,F)}if(lt(U)||z(U))return U=Zs(U,B.mode,F,null),U.return=B,U;if(typeof U.then=="function")return ie(B,Vc(U),F);if(U.$$typeof===$)return ie(B,Sc(B,U),F);Lc(B,U)}return null}function Q(B,U,F,re){var ge=U!==null?U.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ge!==null?null:w(B,U,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===ge?O(B,U,F,re):null;case I:return F.key===ge?G(B,U,F,re):null;case C:return ge=F._init,F=ge(F._payload),Q(B,U,F,re)}if(lt(F)||z(F))return ge!==null?null:ne(B,U,F,re,null);if(typeof F.then=="function")return Q(B,U,Vc(F),re);if(F.$$typeof===$)return Q(B,U,Sc(B,F),re);Lc(B,F)}return null}function X(B,U,F,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return B=B.get(F)||null,w(U,B,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case S:return B=B.get(re.key===null?F:re.key)||null,O(U,B,re,ge);case I:return B=B.get(re.key===null?F:re.key)||null,G(U,B,re,ge);case C:var Pe=re._init;return re=Pe(re._payload),X(B,U,F,re,ge)}if(lt(re)||z(re))return B=B.get(F)||null,ne(U,B,re,ge,null);if(typeof re.then=="function")return X(B,U,F,Vc(re),ge);if(re.$$typeof===$)return X(B,U,F,Sc(U,re),ge);Lc(U,re)}return null}function Re(B,U,F,re){for(var ge=null,Pe=null,Ee=U,Se=U=0,sn=null;Ee!==null&&Se<F.length;Se++){Ee.index>Se?(sn=Ee,Ee=null):sn=Ee.sibling;var Ke=Q(B,Ee,F[Se],re);if(Ke===null){Ee===null&&(Ee=sn);break}n&&Ee&&Ke.alternate===null&&i(B,Ee),U=g(Ke,U,Se),Pe===null?ge=Ke:Pe.sibling=Ke,Pe=Ke,Ee=sn}if(Se===F.length)return a(B,Ee),We&&ea(B,Se),ge;if(Ee===null){for(;Se<F.length;Se++)Ee=ie(B,F[Se],re),Ee!==null&&(U=g(Ee,U,Se),Pe===null?ge=Ee:Pe.sibling=Ee,Pe=Ee);return We&&ea(B,Se),ge}for(Ee=u(Ee);Se<F.length;Se++)sn=X(Ee,B,Se,F[Se],re),sn!==null&&(n&&sn.alternate!==null&&Ee.delete(sn.key===null?Se:sn.key),U=g(sn,U,Se),Pe===null?ge=sn:Pe.sibling=sn,Pe=sn);return n&&Ee.forEach(function(fs){return i(B,fs)}),We&&ea(B,Se),ge}function be(B,U,F,re){if(F==null)throw Error(s(151));for(var ge=null,Pe=null,Ee=U,Se=U=0,sn=null,Ke=F.next();Ee!==null&&!Ke.done;Se++,Ke=F.next()){Ee.index>Se?(sn=Ee,Ee=null):sn=Ee.sibling;var fs=Q(B,Ee,Ke.value,re);if(fs===null){Ee===null&&(Ee=sn);break}n&&Ee&&fs.alternate===null&&i(B,Ee),U=g(fs,U,Se),Pe===null?ge=fs:Pe.sibling=fs,Pe=fs,Ee=sn}if(Ke.done)return a(B,Ee),We&&ea(B,Se),ge;if(Ee===null){for(;!Ke.done;Se++,Ke=F.next())Ke=ie(B,Ke.value,re),Ke!==null&&(U=g(Ke,U,Se),Pe===null?ge=Ke:Pe.sibling=Ke,Pe=Ke);return We&&ea(B,Se),ge}for(Ee=u(Ee);!Ke.done;Se++,Ke=F.next())Ke=X(Ee,B,Se,Ke.value,re),Ke!==null&&(n&&Ke.alternate!==null&&Ee.delete(Ke.key===null?Se:Ke.key),U=g(Ke,U,Se),Pe===null?ge=Ke:Pe.sibling=Ke,Pe=Ke);return n&&Ee.forEach(function(E1){return i(B,E1)}),We&&ea(B,Se),ge}function at(B,U,F,re){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var ge=F.key;U!==null;){if(U.key===ge){if(ge=F.type,ge===x){if(U.tag===7){a(B,U.sibling),re=f(U,F.props.children),re.return=B,B=re;break e}}else if(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&gv(ge)===U.type){a(B,U.sibling),re=f(U,F.props),Ll(re,F),re.return=B,B=re;break e}a(B,U);break}else i(B,U);U=U.sibling}F.type===x?(re=Zs(F.props.children,B.mode,re,F.key),re.return=B,B=re):(re=_c(F.type,F.key,F.props,null,B.mode,re),Ll(re,F),re.return=B,B=re)}return T(B);case I:e:{for(ge=F.key;U!==null;){if(U.key===ge)if(U.tag===4&&U.stateNode.containerInfo===F.containerInfo&&U.stateNode.implementation===F.implementation){a(B,U.sibling),re=f(U,F.children||[]),re.return=B,B=re;break e}else{a(B,U);break}else i(B,U);U=U.sibling}re=Jf(F,B.mode,re),re.return=B,B=re}return T(B);case C:return ge=F._init,F=ge(F._payload),at(B,U,F,re)}if(lt(F))return Re(B,U,F,re);if(z(F)){if(ge=z(F),typeof ge!="function")throw Error(s(150));return F=ge.call(F),be(B,U,F,re)}if(typeof F.then=="function")return at(B,U,Vc(F),re);if(F.$$typeof===$)return at(B,U,Sc(B,F),re);Lc(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,U!==null&&U.tag===6?(a(B,U.sibling),re=f(U,F),re.return=B,B=re):(a(B,U),re=Zf(F,B.mode,re),re.return=B,B=re),T(B)):a(B,U)}return function(B,U,F,re){try{Vl=0;var ge=at(B,U,F,re);return io=null,ge}catch(Ee){if(Ee===Il||Ee===Ac)throw Ee;var Pe=Bn(29,Ee,null,B.mode);return Pe.lanes=re,Pe.return=B,Pe}finally{}}}var so=yv(!0),vv=yv(!1),sr=q(null),qr=null;function Wi(n){var i=n.alternate;K(Qt,Qt.current&1),K(sr,n),qr===null&&(i===null||eo.current!==null||i.memoizedState!==null)&&(qr=n)}function _v(n){if(n.tag===22){if(K(Qt,Qt.current),K(sr,n),qr===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(qr=n)}}else Zi()}function Zi(){K(Qt,Qt.current),K(sr,sr.current)}function _i(n){J(sr),qr===n&&(qr=null),J(Qt)}var Qt=q(0);function Uc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Tm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Od(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:v({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Md={enqueueSetState:function(n,i,a){n=n._reactInternals;var u=Gn(),f=Qi(u);f.payload=i,a!=null&&(f.callback=a),i=Yi(n,f,u),i!==null&&($n(i,n,u),xl(i,n,u))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=Gn(),f=Qi(u);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Yi(n,f,u),i!==null&&($n(i,n,u),xl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Gn(),u=Qi(a);u.tag=2,i!=null&&(u.callback=i),i=Yi(n,u,a),i!==null&&($n(i,n,a),xl(i,n,a))}};function Ev(n,i,a,u,f,g,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,T):i.prototype&&i.prototype.isPureReactComponent?!_l(a,u)||!_l(f,g):!0}function Tv(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&Md.enqueueReplaceState(i,i.state,null)}function oa(n,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(n=n.defaultProps){a===i&&(a=v({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var jc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function bv(n){jc(n)}function Sv(n){console.error(n)}function wv(n){jc(n)}function zc(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Av(n,i,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pd(n,i,a){return a=Qi(a),a.tag=3,a.payload={element:null},a.callback=function(){zc(n,i)},a}function Rv(n){return n=Qi(n),n.tag=3,n}function Iv(n,i,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){Av(i,a,u)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Av(i,a,u),typeof f!="function"&&(is===null?is=new Set([this]):is.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function EA(n,i,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&wl(i,a,f,!0),a=sr.current,a!==null){switch(a.tag){case 13:return qr===null?im():a.alternate===null&&It===0&&(It=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===ud?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),am(n,u,f)),!1;case 22:return a.flags|=65536,u===ud?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),am(n,u,f)),!1}throw Error(s(435,a.tag))}return am(n,u,f),im(),!1}if(We)return i=sr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==nd&&(n=Error(s(422),{cause:u}),Sl(tr(n,a)))):(u!==nd&&(i=Error(s(423),{cause:u}),Sl(tr(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=tr(u,a),f=Pd(n.stateNode,u,f),fd(n,f),It!==4&&(It=2)),!1;var g=Error(s(520),{cause:u});if(g=tr(g,a),Fl===null?Fl=[g]:Fl.push(g),It!==4&&(It=2),i===null)return!0;u=tr(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Pd(a.stateNode,u,n),fd(a,n),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(is===null||!is.has(g))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Rv(f),Iv(f,n,a,u),fd(a,f),!1}a=a.return}while(a!==null);return!1}var Cv=Error(s(461)),nn=!1;function cn(n,i,a,u){i.child=n===null?vv(i,null,a,u):so(i,n.child,a,u)}function xv(n,i,a,u,f){a=a.render;var g=i.ref;if("ref"in u){var T={};for(var w in u)w!=="ref"&&(T[w]=u[w])}else T=u;return ia(i),u=yd(n,i,a,T,g,f),w=vd(),n!==null&&!nn?(_d(n,i,f),Ei(n,i,f)):(We&&w&&ed(i),i.flags|=1,cn(n,i,u,f),i.child)}function Nv(n,i,a,u,f){if(n===null){var g=a.type;return typeof g=="function"&&!Wf(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,Dv(n,i,g,u,f)):(n=_c(a.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!qd(n,f)){var T=g.memoizedProps;if(a=a.compare,a=a!==null?a:_l,a(T,u)&&n.ref===i.ref)return Ei(n,i,f)}return i.flags|=1,n=di(g,u),n.ref=i.ref,n.return=i,i.child=n}function Dv(n,i,a,u,f){if(n!==null){var g=n.memoizedProps;if(_l(g,u)&&n.ref===i.ref)if(nn=!1,i.pendingProps=u=g,qd(n,f))(n.flags&131072)!==0&&(nn=!0);else return i.lanes=n.lanes,Ei(n,i,f)}return kd(n,i,a,u,f)}function Ov(n,i,a){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|a:a,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return Mv(n,i,u,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&wc(i,g!==null?g.cachePool:null),g!==null?Dy(i,g):md(),_v(i);else return i.lanes=i.childLanes=536870912,Mv(n,i,g!==null?g.baseLanes|a:a,a)}else g!==null?(wc(i,g.cachePool),Dy(i,g),Zi(),i.memoizedState=null):(n!==null&&wc(i,null),md(),Zi());return cn(n,i,f,a),i.child}function Mv(n,i,a,u){var f=ld();return f=f===null?null:{parent:Kt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&wc(i,null),md(),_v(i),n!==null&&wl(n,i,u,!0),null}function Bc(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function kd(n,i,a,u,f){return ia(i),a=yd(n,i,a,u,void 0,f),u=vd(),n!==null&&!nn?(_d(n,i,f),Ei(n,i,f)):(We&&u&&ed(i),i.flags|=1,cn(n,i,a,f),i.child)}function Pv(n,i,a,u,f,g){return ia(i),i.updateQueue=null,a=My(i,u,a,f),Oy(n),u=vd(),n!==null&&!nn?(_d(n,i,g),Ei(n,i,g)):(We&&u&&ed(i),i.flags|=1,cn(n,i,a,g),i.child)}function kv(n,i,a,u,f){if(ia(i),i.stateNode===null){var g=Ya,T=a.contextType;typeof T=="object"&&T!==null&&(g=yn(T)),g=new a(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Md,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},cd(i),T=a.contextType,g.context=typeof T=="object"&&T!==null?yn(T):Ya,g.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Od(i,a,T,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Md.enqueueReplaceState(g,g.state,null),Dl(i,u,g,f),Nl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var w=i.memoizedProps,O=oa(a,w);g.props=O;var G=g.context,ne=a.contextType;T=Ya,typeof ne=="object"&&ne!==null&&(T=yn(ne));var ie=a.getDerivedStateFromProps;ne=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||G!==T)&&Tv(i,g,u,T),Ki=!1;var Q=i.memoizedState;g.state=Q,Dl(i,u,g,f),Nl(),G=i.memoizedState,w||Q!==G||Ki?(typeof ie=="function"&&(Od(i,a,ie,u),G=i.memoizedState),(O=Ki||Ev(i,a,O,u,Q,G,T))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=G),g.props=u,g.state=G,g.context=T,u=O):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,hd(n,i),T=i.memoizedProps,ne=oa(a,T),g.props=ne,ie=i.pendingProps,Q=g.context,G=a.contextType,O=Ya,typeof G=="object"&&G!==null&&(O=yn(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ie||Q!==O)&&Tv(i,g,u,O),Ki=!1,Q=i.memoizedState,g.state=Q,Dl(i,u,g,f),Nl();var X=i.memoizedState;T!==ie||Q!==X||Ki||n!==null&&n.dependencies!==null&&bc(n.dependencies)?(typeof w=="function"&&(Od(i,a,w,u),X=i.memoizedState),(ne=Ki||Ev(i,a,ne,u,Q,X,O)||n!==null&&n.dependencies!==null&&bc(n.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,X,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,X,O)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),g.props=u,g.state=X,g.context=O,u=ne):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,Bc(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=so(i,n.child,null,f),i.child=so(i,null,a,f)):cn(n,i,a,f),i.memoizedState=g.state,n=i.child):n=Ei(n,i,f),n}function Vv(n,i,a,u){return bl(),i.flags|=256,cn(n,i,a,u),i.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(n){return{baseLanes:n,cachePool:Sy()}}function Ud(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=ar),n}function Lv(n,i,a){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,T;if((T=g)||(T=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,n===null){if(We){if(f?Wi(i):Zi(),We){var w=Rt,O;if(O=w){e:{for(O=w,w=Br;O.nodeType!==8;){if(!w){w=null;break e}if(O=vr(O.nextSibling),O===null){w=null;break e}}w=O}w!==null?(i.memoizedState={dehydrated:w,treeContext:Js!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},O=Bn(18,null,null,0),O.stateNode=w,O.return=i,i.child=O,Cn=i,Rt=null,O=!0):O=!1}O||na(i)}if(w=i.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Tm(w)?i.lanes=32:i.lanes=536870912,null;_i(i)}return w=u.children,u=u.fallback,f?(Zi(),f=i.mode,w=qc({mode:"hidden",children:w},f),u=Zs(u,f,a,null),w.return=i,u.return=i,w.sibling=u,i.child=w,f=i.child,f.memoizedState=Ld(a),f.childLanes=Ud(n,T,a),i.memoizedState=Vd,u):(Wi(i),jd(i,w))}if(O=n.memoizedState,O!==null&&(w=O.dehydrated,w!==null)){if(g)i.flags&256?(Wi(i),i.flags&=-257,i=zd(n,i,a)):i.memoizedState!==null?(Zi(),i.child=n.child,i.flags|=128,i=null):(Zi(),f=u.fallback,w=i.mode,u=qc({mode:"visible",children:u.children},w),f=Zs(f,w,a,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,so(i,n.child,null,a),u=i.child,u.memoizedState=Ld(a),u.childLanes=Ud(n,T,a),i.memoizedState=Vd,i=f);else if(Wi(i),Tm(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var G=T.dgst;T=G,u=Error(s(419)),u.stack="",u.digest=T,Sl({value:u,source:null,stack:null}),i=zd(n,i,a)}else if(nn||wl(n,i,a,!1),T=(a&n.childLanes)!==0,nn||T){if(T=ct,T!==null&&(u=a&-a,u=(u&42)!==0?1:ji(u),u=(u&(T.suspendedLanes|a))!==0?0:u,u!==0&&u!==O.retryLane))throw O.retryLane=u,Qa(n,u),$n(T,n,u),Cv;w.data==="$?"||im(),i=zd(n,i,a)}else w.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,Rt=vr(w.nextSibling),Cn=i,We=!0,ta=null,Br=!1,n!==null&&(rr[ir++]=mi,rr[ir++]=pi,rr[ir++]=Js,mi=n.id,pi=n.overflow,Js=i),i=jd(i,u.children),i.flags|=4096);return i}return f?(Zi(),f=u.fallback,w=i.mode,O=n.child,G=O.sibling,u=di(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,G!==null?f=di(G,f):(f=Zs(f,w,a,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,w=n.child.memoizedState,w===null?w=Ld(a):(O=w.cachePool,O!==null?(G=Kt._currentValue,O=O.parent!==G?{parent:G,pool:G}:O):O=Sy(),w={baseLanes:w.baseLanes|a,cachePool:O}),f.memoizedState=w,f.childLanes=Ud(n,T,a),i.memoizedState=Vd,u):(Wi(i),a=n.child,n=a.sibling,a=di(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,n!==null&&(T=i.deletions,T===null?(i.deletions=[n],i.flags|=16):T.push(n)),i.child=a,i.memoizedState=null,a)}function jd(n,i){return i=qc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function qc(n,i){return n=Bn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function zd(n,i,a){return so(i,n.child,null,a),n=jd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Uv(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),id(n.return,i,a)}function Bd(n,i,a,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=a,g.tailMode=f)}function jv(n,i,a){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(cn(n,i,u.children,a),u=Qt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Uv(n,a,i);else if(n.tag===19)Uv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(K(Qt,u),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Uc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Bd(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Uc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Bd(i,!0,a,null,g);break;case"together":Bd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ei(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),rs|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(wl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,a=di(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=di(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function qd(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&bc(n)))}function TA(n,i,a){switch(i.tag){case 3:Ie(i,i.stateNode.containerInfo),$i(i,Kt,n.memoizedState.cache),bl();break;case 27:case 5:Zt(i);break;case 4:Ie(i,i.stateNode.containerInfo);break;case 10:$i(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Wi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Lv(n,i,a):(Wi(i),n=Ei(n,i,a),n!==null?n.sibling:null);Wi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(wl(n,i,a,!1),u=(a&i.childLanes)!==0),f){if(u)return jv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),K(Qt,Qt.current),u)break;return null;case 22:case 23:return i.lanes=0,Ov(n,i,a);case 24:$i(i,Kt,n.memoizedState.cache)}return Ei(n,i,a)}function zv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)nn=!0;else{if(!qd(n,a)&&(i.flags&128)===0)return nn=!1,TA(n,i,a);nn=(n.flags&131072)!==0}else nn=!1,We&&(i.flags&1048576)!==0&&gy(i,Tc,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Wf(u)?(n=oa(u,n),i.tag=1,i=kv(null,i,u,n,a)):(i.tag=0,i=kd(null,i,u,n,a));else{if(u!=null){if(f=u.$$typeof,f===oe){i.tag=11,i=xv(null,i,u,n,a);break e}else if(f===V){i.tag=14,i=Nv(null,i,u,n,a);break e}}throw i=ot(u)||u,Error(s(306,i,""))}}return i;case 0:return kd(n,i,i.type,i.pendingProps,a);case 1:return u=i.type,f=oa(u,i.pendingProps),kv(n,i,u,f,a);case 3:e:{if(Ie(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,hd(n,i),Dl(i,u,null,a);var T=i.memoizedState;if(u=T.cache,$i(i,Kt,u),u!==g.cache&&sd(i,[Kt],a,!0),Nl(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Vv(n,i,u,a);break e}else if(u!==f){f=tr(Error(s(424)),i),Sl(f),i=Vv(n,i,u,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Rt=vr(n.firstChild),Cn=i,We=!0,ta=null,Br=!0,a=vv(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(bl(),u===f){i=Ei(n,i,a);break e}cn(n,i,u,a)}i=i.child}return i;case 26:return Bc(n,i),n===null?(a=F_(i.type,null,i.pendingProps,null))?i.memoizedState=a:We||(a=i.type,n=i.pendingProps,u=nh(ye.current).createElement(a),u[Ft]=i,u[kt]=n,fn(u,a,n),Dt(u),i.stateNode=u):i.memoizedState=F_(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Zt(i),n===null&&We&&(u=i.stateNode=B_(i.type,i.pendingProps,ye.current),Cn=i,Br=!0,f=Rt,os(i.type)?(bm=f,Rt=vr(u.firstChild)):Rt=f),cn(n,i,i.pendingProps.children,a),Bc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&We&&((f=u=Rt)&&(u=YA(u,i.type,i.pendingProps,Br),u!==null?(i.stateNode=u,Cn=i,Rt=vr(u.firstChild),Br=!1,f=!0):f=!1),f||na(i)),Zt(i),f=i.type,g=i.pendingProps,T=n!==null?n.memoizedProps:null,u=g.children,vm(f,g)?u=null:T!==null&&vm(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=yd(n,i,dA,null,null,a),Jl._currentValue=f),Bc(n,i),cn(n,i,u,a),i.child;case 6:return n===null&&We&&((n=a=Rt)&&(a=XA(a,i.pendingProps,Br),a!==null?(i.stateNode=a,Cn=i,Rt=null,n=!0):n=!1),n||na(i)),null;case 13:return Lv(n,i,a);case 4:return Ie(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=so(i,null,u,a):cn(n,i,u,a),i.child;case 11:return xv(n,i,i.type,i.pendingProps,a);case 7:return cn(n,i,i.pendingProps,a),i.child;case 8:return cn(n,i,i.pendingProps.children,a),i.child;case 12:return cn(n,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,$i(i,i.type,u.value),cn(n,i,u.children,a),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,ia(i),f=yn(f),u=u(f),i.flags|=1,cn(n,i,u,a),i.child;case 14:return Nv(n,i,i.type,i.pendingProps,a);case 15:return Dv(n,i,i.type,i.pendingProps,a);case 19:return jv(n,i,a);case 31:return u=i.pendingProps,a=i.mode,u={mode:u.mode,children:u.children},n===null?(a=qc(u,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=di(n.child,u),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Ov(n,i,a);case 24:return ia(i),u=yn(Kt),n===null?(f=ld(),f===null&&(f=ct,g=ad(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=a),f=g),i.memoizedState={parent:u,cache:f},cd(i),$i(i,Kt,f)):((n.lanes&a)!==0&&(hd(n,i),Dl(i,null,null,a),Nl()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),$i(i,Kt,u)):(u=g.cache,$i(i,Kt,u),u!==f.cache&&sd(i,[Kt],a,!0))),cn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ti(n){n.flags|=4}function Bv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Y_(i)){if(i=sr.current,i!==null&&((Fe&4194048)===Fe?qr!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||i!==qr))throw Cl=ud,wy;n.flags|=8192}}function Hc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?tl():536870912,n.lanes|=i,uo|=i)}function Ul(n,i){if(!We)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function St(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function bA(n,i,a){var u=i.pendingProps;switch(td(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(i),null;case 1:return St(i),null;case 3:return a=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),yi(Kt),_t(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Tl(i)?Ti(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_y())),St(i),null;case 26:return a=i.memoizedState,n===null?(Ti(i),a!==null?(St(i),Bv(i,a)):(St(i),i.flags&=-16777217)):a?a!==n.memoizedState?(Ti(i),St(i),Bv(i,a)):(St(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ti(i),St(i),i.flags&=-16777217),null;case 27:Ye(i),a=ye.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ti(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return St(i),null}n=he.current,Tl(i)?yy(i):(n=B_(f,u,a),i.stateNode=n,Ti(i))}return St(i),null;case 5:if(Ye(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ti(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return St(i),null}if(n=he.current,Tl(i))yy(i);else{switch(f=nh(ye.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}n[Ft]=i,n[kt]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(fn(n,a,u),a){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ti(i)}}return St(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ti(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=ye.current,Tl(i)){if(n=i.stateNode,a=i.memoizedProps,u=null,f=Cn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ft]=i,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||P_(n.nodeValue,a)),n||na(i)}else n=nh(n).createTextNode(u),n[Ft]=i,i.stateNode=n}return St(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Tl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ft]=i}else bl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),f=!1}else f=_y(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(_i(i),i):(_i(i),null)}if(_i(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=u!==null,n=n!==null&&n.memoizedState!==null,a){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Hc(i,i.updateQueue),St(i),null;case 4:return _t(),n===null&&dm(i.stateNode.containerInfo),St(i),null;case 10:return yi(i.type),St(i),null;case 19:if(J(Qt),f=i.memoizedState,f===null)return St(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)Ul(f,!1);else{if(It!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Uc(n),g!==null){for(i.flags|=128,Ul(f,!1),n=g.updateQueue,i.updateQueue=n,Hc(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)py(a,n),a=a.sibling;return K(Qt,Qt.current&1|2),i.child}n=n.sibling}f.tail!==null&&ft()>$c&&(i.flags|=128,u=!0,Ul(f,!1),i.lanes=4194304)}else{if(!u)if(n=Uc(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Hc(i,n),Ul(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!We)return St(i),null}else 2*ft()-f.renderingStartTime>$c&&a!==536870912&&(i.flags|=128,u=!0,Ul(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=ft(),i.sibling=null,n=Qt.current,K(Qt,u?n&1|2:n&1),i):(St(i),null);case 22:case 23:return _i(i),pd(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(St(i),i.subtreeFlags&6&&(i.flags|=8192)):St(i),a=i.updateQueue,a!==null&&Hc(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),n!==null&&J(sa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),yi(Kt),St(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function SA(n,i){switch(td(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return yi(Kt),_t(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ye(i),null;case 13:if(_i(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));bl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(Qt),null;case 4:return _t(),null;case 10:return yi(i.type),null;case 22:case 23:return _i(i),pd(),n!==null&&J(sa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return yi(Kt),null;case 25:return null;default:return null}}function qv(n,i){switch(td(i),i.tag){case 3:yi(Kt),_t();break;case 26:case 27:case 5:Ye(i);break;case 4:_t();break;case 13:_i(i);break;case 19:J(Qt);break;case 10:yi(i.type);break;case 22:case 23:_i(i),pd(),n!==null&&J(sa);break;case 24:yi(Kt)}}function jl(n,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&n)===n){u=void 0;var g=a.create,T=a.inst;u=g(),T.destroy=u}a=a.next}while(a!==f)}}catch(w){ut(i,i.return,w)}}function Ji(n,i,a){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var T=u.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,f=i;var O=a,G=w;try{G()}catch(ne){ut(f,O,ne)}}}u=u.next}while(u!==g)}}catch(ne){ut(i,i.return,ne)}}function Hv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Ny(i,a)}catch(u){ut(n,n.return,u)}}}function Fv(n,i,a){a.props=oa(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){ut(n,i,u)}}function zl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(f){ut(n,i,f)}}function Hr(n,i){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){ut(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ut(n,i,f)}else a.current=null}function Gv(n){var i=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){ut(n,n.return,f)}}function Hd(n,i,a){try{var u=n.stateNode;FA(u,n.type,a,i),u[kt]=i}catch(f){ut(n,n.return,f)}}function $v(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&os(n.type)||n.tag===4}function Fd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$v(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&os(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Gd(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=th));else if(u!==4&&(u===27&&os(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Gd(n,i,a),n=n.sibling;n!==null;)Gd(n,i,a),n=n.sibling}function Fc(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(u!==4&&(u===27&&os(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Fc(n,i,a),n=n.sibling;n!==null;)Fc(n,i,a),n=n.sibling}function Kv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);fn(i,u,a),i[Ft]=n,i[kt]=a}catch(g){ut(n,n.return,g)}}var bi=!1,Mt=!1,$d=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,rn=null;function wA(n,i){if(n=n.containerInfo,gm=lh,n=sy(n),Ff(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var T=0,w=-1,O=-1,G=0,ne=0,ie=n,Q=null;t:for(;;){for(var X;ie!==a||f!==0&&ie.nodeType!==3||(w=T+f),ie!==g||u!==0&&ie.nodeType!==3||(O=T+u),ie.nodeType===3&&(T+=ie.nodeValue.length),(X=ie.firstChild)!==null;)Q=ie,ie=X;for(;;){if(ie===n)break t;if(Q===a&&++G===f&&(w=T),Q===g&&++ne===u&&(O=T),(X=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=X}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(ym={focusedElem:n,selectionRange:a},lh=!1,rn=i;rn!==null;)if(i=rn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,rn=n;else for(;rn!==null;){switch(i=rn,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,a=i,f=g.memoizedProps,g=g.memoizedState,u=a.stateNode;try{var Re=oa(a.type,f,a.elementType===a.type);n=u.getSnapshotBeforeUpdate(Re,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(be){ut(a,a.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Em(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Em(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,rn=n;break}rn=i.return}}function Yv(n,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:es(n,a),u&4&&jl(5,a);break;case 1:if(es(n,a),u&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(T){ut(a,a.return,T)}else{var f=oa(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){ut(a,a.return,T)}}u&64&&Hv(a),u&512&&zl(a,a.return);break;case 3:if(es(n,a),u&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ny(n,i)}catch(T){ut(a,a.return,T)}}break;case 27:i===null&&u&4&&Kv(a);case 26:case 5:es(n,a),i===null&&u&4&&Gv(a),u&512&&zl(a,a.return);break;case 12:es(n,a);break;case 13:es(n,a),u&4&&Zv(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=MA.bind(null,a),WA(n,a))));break;case 22:if(u=a.memoizedState!==null||bi,!u){i=i!==null&&i.memoizedState!==null||Mt,f=bi;var g=Mt;bi=u,(Mt=i)&&!g?ts(n,a,(a.subtreeFlags&8772)!==0):es(n,a),bi=f,Mt=g}break;case 30:break;default:es(n,a)}}function Xv(n){var i=n.alternate;i!==null&&(n.alternate=null,Xv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&qi(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var yt=null,On=!1;function Si(n,i,a){for(a=a.child;a!==null;)Wv(n,i,a),a=a.sibling}function Wv(n,i,a){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(fe,a)}catch{}switch(a.tag){case 26:Mt||Hr(a,i),Si(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Hr(a,i);var u=yt,f=On;os(a.type)&&(yt=a.stateNode,On=!1),Si(n,i,a),Yl(a.stateNode),yt=u,On=f;break;case 5:Mt||Hr(a,i);case 6:if(u=yt,f=On,yt=null,Si(n,i,a),yt=u,On=f,yt!==null)if(On)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(g){ut(a,i,g)}else try{yt.removeChild(a.stateNode)}catch(g){ut(a,i,g)}break;case 18:yt!==null&&(On?(n=yt,j_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),ru(n)):j_(yt,a.stateNode));break;case 4:u=yt,f=On,yt=a.stateNode.containerInfo,On=!0,Si(n,i,a),yt=u,On=f;break;case 0:case 11:case 14:case 15:Mt||Ji(2,a,i),Mt||Ji(4,a,i),Si(n,i,a);break;case 1:Mt||(Hr(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Fv(a,i,u)),Si(n,i,a);break;case 21:Si(n,i,a);break;case 22:Mt=(u=Mt)||a.memoizedState!==null,Si(n,i,a),Mt=u;break;default:Si(n,i,a)}}function Zv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ru(n)}catch(a){ut(i,i.return,a)}}function AA(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Qv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Qv),i;default:throw Error(s(435,n.tag))}}function Kd(n,i){var a=AA(n);i.forEach(function(u){var f=PA.bind(null,n,u);a.has(u)||(a.add(u),u.then(f,f))})}function qn(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],g=n,T=i,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(os(w.type)){yt=w.stateNode,On=!1;break e}break;case 5:yt=w.stateNode,On=!1;break e;case 3:case 4:yt=w.stateNode.containerInfo,On=!0;break e}w=w.return}if(yt===null)throw Error(s(160));Wv(g,T,f),yt=null,On=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Jv(i,n),i=i.sibling}var yr=null;function Jv(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:qn(i,n),Hn(n),u&4&&(Ji(3,n,n.return),jl(3,n),Ji(5,n,n.return));break;case 1:qn(i,n),Hn(n),u&512&&(Mt||a===null||Hr(a,a.return)),u&64&&bi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=yr;if(qn(i,n),Hn(n),u&512&&(Mt||a===null||Hr(a,a.return)),u&4){var g=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Vs]||g[Ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),fn(g,u,a),g[Ft]=n,Dt(g),u=g;break e;case"link":var T=K_("link","href",f).get(u+(a.href||""));if(T){for(var w=0;w<T.length;w++)if(g=T[w],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(w,1);break t}}g=f.createElement(u),fn(g,u,a),f.head.appendChild(g);break;case"meta":if(T=K_("meta","content",f).get(u+(a.content||""))){for(w=0;w<T.length;w++)if(g=T[w],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(w,1);break t}}g=f.createElement(u),fn(g,u,a),f.head.appendChild(g);break;default:throw Error(s(468,u))}g[Ft]=n,Dt(g),u=g}n.stateNode=u}else Q_(f,n.type,n.stateNode);else n.stateNode=$_(f,u,n.memoizedProps);else g!==u?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,u===null?Q_(f,n.type,n.stateNode):$_(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Hd(n,n.memoizedProps,a.memoizedProps)}break;case 27:qn(i,n),Hn(n),u&512&&(Mt||a===null||Hr(a,a.return)),a!==null&&u&4&&Hd(n,n.memoizedProps,a.memoizedProps);break;case 5:if(qn(i,n),Hn(n),u&512&&(Mt||a===null||Hr(a,a.return)),n.flags&32){f=n.stateNode;try{Wn(f,"")}catch(X){ut(n,n.return,X)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Hd(n,f,a!==null?a.memoizedProps:f)),u&1024&&($d=!0);break;case 6:if(qn(i,n),Hn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(X){ut(n,n.return,X)}}break;case 3:if(sh=null,f=yr,yr=rh(i.containerInfo),qn(i,n),yr=f,Hn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ru(i.containerInfo)}catch(X){ut(n,n.return,X)}$d&&($d=!1,e_(n));break;case 4:u=yr,yr=rh(n.stateNode.containerInfo),qn(i,n),Hn(n),yr=u;break;case 12:qn(i,n),Hn(n);break;case 13:qn(i,n),Hn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Jd=ft()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kd(n,u)));break;case 22:f=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,G=bi,ne=Mt;if(bi=G||f,Mt=ne||O,qn(i,n),Mt=ne,bi=G,Hn(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||bi||Mt||la(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(g=O.stateNode,f)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=O.stateNode;var ie=O.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(X){ut(O,O.return,X)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(X){ut(O,O.return,X)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Kd(n,a))));break;case 19:qn(i,n),Hn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kd(n,u)));break;case 30:break;case 21:break;default:qn(i,n),Hn(n)}}function Hn(n){var i=n.flags;if(i&2){try{for(var a,u=n.return;u!==null;){if($v(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,g=Fd(n);Fc(n,g,f);break;case 5:var T=a.stateNode;a.flags&32&&(Wn(T,""),a.flags&=-33);var w=Fd(n);Fc(n,w,T);break;case 3:case 4:var O=a.stateNode.containerInfo,G=Fd(n);Gd(n,G,O);break;default:throw Error(s(161))}}catch(ne){ut(n,n.return,ne)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function e_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;e_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function es(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Yv(n,i.alternate,i),i=i.sibling}function la(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ji(4,i,i.return),la(i);break;case 1:Hr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Fv(i,i.return,a),la(i);break;case 27:Yl(i.stateNode);case 26:case 5:Hr(i,i.return),la(i);break;case 22:i.memoizedState===null&&la(i);break;case 30:la(i);break;default:la(i)}n=n.sibling}}function ts(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,T=g.flags;switch(g.tag){case 0:case 11:case 15:ts(f,g,a),jl(4,g);break;case 1:if(ts(f,g,a),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){ut(u,u.return,G)}if(u=g,f=u.updateQueue,f!==null){var w=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)xy(O[f],w)}catch(G){ut(u,u.return,G)}}a&&T&64&&Hv(g),zl(g,g.return);break;case 27:Kv(g);case 26:case 5:ts(f,g,a),a&&u===null&&T&4&&Gv(g),zl(g,g.return);break;case 12:ts(f,g,a);break;case 13:ts(f,g,a),a&&T&4&&Zv(f,g);break;case 22:g.memoizedState===null&&ts(f,g,a),zl(g,g.return);break;case 30:break;default:ts(f,g,a)}i=i.sibling}}function Qd(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Al(a))}function Yd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Al(n))}function Fr(n,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t_(n,i,a,u),i=i.sibling}function t_(n,i,a,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Fr(n,i,a,u),f&2048&&jl(9,i);break;case 1:Fr(n,i,a,u);break;case 3:Fr(n,i,a,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Al(n)));break;case 12:if(f&2048){Fr(n,i,a,u),n=i.stateNode;try{var g=i.memoizedProps,T=g.id,w=g.onPostCommit;typeof w=="function"&&w(T,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){ut(i,i.return,O)}}else Fr(n,i,a,u);break;case 13:Fr(n,i,a,u);break;case 23:break;case 22:g=i.stateNode,T=i.alternate,i.memoizedState!==null?g._visibility&2?Fr(n,i,a,u):Bl(n,i):g._visibility&2?Fr(n,i,a,u):(g._visibility|=2,ao(n,i,a,u,(i.subtreeFlags&10256)!==0)),f&2048&&Qd(T,i);break;case 24:Fr(n,i,a,u),f&2048&&Yd(i.alternate,i);break;default:Fr(n,i,a,u)}}function ao(n,i,a,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,T=i,w=a,O=u,G=T.flags;switch(T.tag){case 0:case 11:case 15:ao(g,T,w,O,f),jl(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?ao(g,T,w,O,f):Bl(g,T):(ne._visibility|=2,ao(g,T,w,O,f)),f&&G&2048&&Qd(T.alternate,T);break;case 24:ao(g,T,w,O,f),f&&G&2048&&Yd(T.alternate,T);break;default:ao(g,T,w,O,f)}i=i.sibling}}function Bl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,u=i,f=u.flags;switch(u.tag){case 22:Bl(a,u),f&2048&&Qd(u.alternate,u);break;case 24:Bl(a,u),f&2048&&Yd(u.alternate,u);break;default:Bl(a,u)}i=i.sibling}}var ql=8192;function oo(n){if(n.subtreeFlags&ql)for(n=n.child;n!==null;)n_(n),n=n.sibling}function n_(n){switch(n.tag){case 26:oo(n),n.flags&ql&&n.memoizedState!==null&&c1(yr,n.memoizedState,n.memoizedProps);break;case 5:oo(n);break;case 3:case 4:var i=yr;yr=rh(n.stateNode.containerInfo),oo(n),yr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ql,ql=16777216,oo(n),ql=i):oo(n));break;default:oo(n)}}function r_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Hl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];rn=u,s_(u,n)}r_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)i_(n),n=n.sibling}function i_(n){switch(n.tag){case 0:case 11:case 15:Hl(n),n.flags&2048&&Ji(9,n,n.return);break;case 3:Hl(n);break;case 12:Hl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Gc(n)):Hl(n);break;default:Hl(n)}}function Gc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];rn=u,s_(u,n)}r_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ji(8,i,i.return),Gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Gc(i));break;default:Gc(i)}n=n.sibling}}function s_(n,i){for(;rn!==null;){var a=rn;switch(a.tag){case 0:case 11:case 15:Ji(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Al(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,rn=u;else e:for(a=n;rn!==null;){u=rn;var f=u.sibling,g=u.return;if(Xv(u),u===a){rn=null;break e}if(f!==null){f.return=g,rn=f;break e}rn=g}}}var RA={getCacheForType:function(n){var i=yn(Kt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},IA=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,ke=null,Fe=0,tt=0,Fn=null,ns=!1,lo=!1,Xd=!1,wi=0,It=0,rs=0,ua=0,Wd=0,ar=0,uo=0,Fl=null,Mn=null,Zd=!1,Jd=0,$c=1/0,Kc=null,is=null,hn=0,ss=null,co=null,ho=0,em=0,tm=null,a_=null,Gl=0,nm=null;function Gn(){if((et&2)!==0&&Fe!==0)return Fe&-Fe;if(te.T!==null){var n=Za;return n!==0?n:um()}return zi()}function o_(){ar===0&&(ar=(Fe&536870912)===0||We?el():536870912);var n=sr.current;return n!==null&&(n.flags|=32),ar}function $n(n,i,a){(n===ct&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(fo(n,0),as(n,Fe,ar,!1)),ni(n,a),((et&2)===0||n!==ct)&&(n===ct&&((et&2)===0&&(ua|=a),It===4&&as(n,Fe,ar,!1)),Gr(n))}function l_(n,i,a){if((et&6)!==0)throw Error(s(327));var u=!a&&(i&124)===0&&(i&n.expiredLanes)===0||ks(n,i),f=u?NA(n,i):sm(n,i,!0),g=u;do{if(f===0){lo&&!u&&as(n,i,0,!1);break}else{if(a=n.current.alternate,g&&!CA(a)){f=sm(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var w=n;f=Fl;var O=w.current.memoizedState.isDehydrated;if(O&&(fo(w,T).flags|=256),T=sm(w,T,!1),T!==2){if(Xd&&!O){w.errorRecoveryDisabledLanes|=g,ua|=g,f=4;break e}g=Mn,Mn=f,g!==null&&(Mn===null?Mn=g:Mn.push.apply(Mn,g))}f=T}if(g=!1,f!==2)continue}}if(f===1){fo(n,0),as(n,i,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:as(u,i,ar,!ns);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Jd+300-ft(),10<f)){if(as(u,i,ar,!ns),xa(u,0,!0)!==0)break e;u.timeoutHandle=L_(u_.bind(null,u,a,Mn,Kc,Zd,i,ar,ua,uo,ns,g,2,-0,0),f);break e}u_(u,a,Mn,Kc,Zd,i,ar,ua,uo,ns,g,0,-0,0)}}break}while(!0);Gr(n)}function u_(n,i,a,u,f,g,T,w,O,G,ne,ie,Q,X){if(n.timeoutHandle=-1,ie=i.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Zl={stylesheets:null,count:0,unsuspend:u1},n_(i),ie=h1(),ie!==null)){n.cancelPendingCommit=ie(g_.bind(null,n,i,g,a,u,f,T,w,O,ne,1,Q,X)),as(n,g,T,!G);return}g_(n,i,g,a,u,f,T,w,O)}function CA(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],g=f.getSnapshot;f=f.value;try{if(!zn(g(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function as(n,i,a,u){i&=~Wd,i&=~ua,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-Le(f),T=1<<g;u[g]=-1,f&=~T}a!==0&&Nr(n,a,i)}function Qc(){return(et&6)===0?($l(0),!1):!0}function rm(){if(ke!==null){if(tt===0)var n=ke.return;else n=ke,gi=ra=null,Ed(n),io=null,Vl=0,n=ke;for(;n!==null;)qv(n.alternate,n),n=n.return;ke=null}}function fo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,$A(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),rm(),ct=n,ke=a=di(n.current,null),Fe=i,tt=0,Fn=null,ns=!1,lo=ks(n,i),Xd=!1,uo=ar=Wd=ua=rs=It=0,Mn=Fl=null,Zd=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-Le(u),g=1<<f;i|=n[f],u&=~g}return wi=i,gc(),a}function c_(n,i){De=null,te.H=kc,i===Il||i===Ac?(i=Iy(),tt=3):i===wy?(i=Iy(),tt=4):tt=i===Cv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fn=i,ke===null&&(It=1,zc(n,tr(i,n.current)))}function h_(){var n=te.H;return te.H=kc,n===null?kc:n}function f_(){var n=te.A;return te.A=RA,n}function im(){It=4,ns||(Fe&4194048)!==Fe&&sr.current!==null||(lo=!0),(rs&134217727)===0&&(ua&134217727)===0||ct===null||as(ct,Fe,ar,!1)}function sm(n,i,a){var u=et;et|=2;var f=h_(),g=f_();(ct!==n||Fe!==i)&&(Kc=null,fo(n,i)),i=!1;var T=It;e:do try{if(tt!==0&&ke!==null){var w=ke,O=Fn;switch(tt){case 8:rm(),T=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(i=!0);var G=tt;if(tt=0,Fn=null,mo(n,w,O,G),a&&lo){T=0;break e}break;default:G=tt,tt=0,Fn=null,mo(n,w,O,G)}}xA(),T=It;break}catch(ne){c_(n,ne)}while(!0);return i&&n.shellSuspendCounter++,gi=ra=null,et=u,te.H=f,te.A=g,ke===null&&(ct=null,Fe=0,gc()),T}function xA(){for(;ke!==null;)d_(ke)}function NA(n,i){var a=et;et|=2;var u=h_(),f=f_();ct!==n||Fe!==i?(Kc=null,$c=ft()+500,fo(n,i)):lo=ks(n,i);e:do try{if(tt!==0&&ke!==null){i=ke;var g=Fn;t:switch(tt){case 1:tt=0,Fn=null,mo(n,i,g,1);break;case 2:case 9:if(Ay(g)){tt=0,Fn=null,m_(i);break}i=function(){tt!==2&&tt!==9||ct!==n||(tt=7),Gr(n)},g.then(i,i);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Ay(g)?(tt=0,Fn=null,m_(i)):(tt=0,Fn=null,mo(n,i,g,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var w=ke;if(!T||Y_(T)){tt=0,Fn=null;var O=w.sibling;if(O!==null)ke=O;else{var G=w.return;G!==null?(ke=G,Yc(G)):ke=null}break t}}tt=0,Fn=null,mo(n,i,g,5);break;case 6:tt=0,Fn=null,mo(n,i,g,6);break;case 8:rm(),It=6;break e;default:throw Error(s(462))}}DA();break}catch(ne){c_(n,ne)}while(!0);return gi=ra=null,te.H=u,te.A=f,et=a,ke!==null?0:(ct=null,Fe=0,gc(),It)}function DA(){for(;ke!==null&&!pt();)d_(ke)}function d_(n){var i=zv(n.alternate,n,wi);n.memoizedProps=n.pendingProps,i===null?Yc(n):ke=i}function m_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Pv(a,i,i.pendingProps,i.type,void 0,Fe);break;case 11:i=Pv(a,i,i.pendingProps,i.type.render,i.ref,Fe);break;case 5:Ed(i);default:qv(a,i),i=ke=py(i,wi),i=zv(a,i,wi)}n.memoizedProps=n.pendingProps,i===null?Yc(n):ke=i}function mo(n,i,a,u){gi=ra=null,Ed(i),io=null,Vl=0;var f=i.return;try{if(EA(n,f,i,a,Fe)){It=1,zc(n,tr(a,n.current)),ke=null;return}}catch(g){if(f!==null)throw ke=f,g;It=1,zc(n,tr(a,n.current)),ke=null;return}i.flags&32768?(We||u===1?n=!0:lo||(Fe&536870912)!==0?n=!1:(ns=n=!0,(u===2||u===9||u===3||u===6)&&(u=sr.current,u!==null&&u.tag===13&&(u.flags|=16384))),p_(i,n)):Yc(i)}function Yc(n){var i=n;do{if((i.flags&32768)!==0){p_(i,ns);return}n=i.return;var a=bA(i.alternate,i,wi);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=n}while(i!==null);It===0&&(It=5)}function p_(n,i){do{var a=SA(n.alternate,n);if(a!==null){a.flags&=32767,ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){ke=n;return}ke=n=a}while(n!==null);It=6,ke=null}function g_(n,i,a,u,f,g,T,w,O){n.cancelPendingCommit=null;do Xc();while(hn!==0);if((et&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Yf,nl(n,a,g,T,w,O),n===ct&&(ke=ct=null,Fe=0),co=i,ss=n,ho=a,em=g,tm=f,a_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,kA(Xe,function(){return T_(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=te.T,te.T=null,f=ce.p,ce.p=2,T=et,et|=4;try{wA(n,i,a)}finally{et=T,ce.p=f,te.T=u}}hn=1,y_(),v_(),__()}}function y_(){if(hn===1){hn=0;var n=ss,i=co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var u=ce.p;ce.p=2;var f=et;et|=4;try{Jv(i,n);var g=ym,T=sy(n.containerInfo),w=g.focusedElem,O=g.selectionRange;if(T!==w&&w&&w.ownerDocument&&iy(w.ownerDocument.documentElement,w)){if(O!==null&&Ff(w)){var G=O.start,ne=O.end;if(ne===void 0&&(ne=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(ne,w.value.length);else{var ie=w.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),Re=w.textContent.length,be=Math.min(O.start,Re),at=O.end===void 0?be:Math.min(O.end,Re);!X.extend&&be>at&&(T=at,at=be,be=T);var B=ry(w,be),U=ry(w,at);if(B&&U&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==U.node||X.focusOffset!==U.offset)){var F=ie.createRange();F.setStart(B.node,B.offset),X.removeAllRanges(),be>at?(X.addRange(F),X.extend(U.node,U.offset)):(F.setEnd(U.node,U.offset),X.addRange(F))}}}}for(ie=[],X=w;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var re=ie[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}lh=!!gm,ym=gm=null}finally{et=f,ce.p=u,te.T=a}}n.current=i,hn=2}}function v_(){if(hn===2){hn=0;var n=ss,i=co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var u=ce.p;ce.p=2;var f=et;et|=4;try{Yv(n,i.alternate,i)}finally{et=f,ce.p=u,te.T=a}}hn=3}}function __(){if(hn===4||hn===3){hn=0,Nt();var n=ss,i=co,a=ho,u=a_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?hn=5:(hn=0,co=ss=null,E_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(is=null),Na(a),i=i.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(fe,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=te.T,f=ce.p,ce.p=2,te.T=null;try{for(var g=n.onRecoverableError,T=0;T<u.length;T++){var w=u[T];g(w.value,{componentStack:w.stack})}}finally{te.T=i,ce.p=f}}(ho&3)!==0&&Xc(),Gr(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===nm?Gl++:(Gl=0,nm=n):Gl=0,$l(0)}}function E_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Al(i)))}function Xc(n){return y_(),v_(),__(),T_()}function T_(){if(hn!==5)return!1;var n=ss,i=em;em=0;var a=Na(ho),u=te.T,f=ce.p;try{ce.p=32>a?32:a,te.T=null,a=tm,tm=null;var g=ss,T=ho;if(hn=0,co=ss=null,ho=0,(et&6)!==0)throw Error(s(331));var w=et;if(et|=4,i_(g.current),t_(g,g.current,T,a),et=w,$l(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(fe,g)}catch{}return!0}finally{ce.p=f,te.T=u,E_(n,i)}}function b_(n,i,a){i=tr(a,i),i=Pd(n.stateNode,i,2),n=Yi(n,i,2),n!==null&&(ni(n,2),Gr(n))}function ut(n,i,a){if(n.tag===3)b_(n,n,a);else for(;i!==null;){if(i.tag===3){b_(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(is===null||!is.has(u))){n=tr(a,n),a=Rv(2),u=Yi(i,a,2),u!==null&&(Iv(a,u,i,n),ni(u,2),Gr(u));break}}i=i.return}}function am(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new IA;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(a)||(Xd=!0,f.add(a),n=OA.bind(null,n,i,a),i.then(n,n))}function OA(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ct===n&&(Fe&a)===a&&(It===4||It===3&&(Fe&62914560)===Fe&&300>ft()-Jd?(et&2)===0&&fo(n,0):Wd|=a,uo===Fe&&(uo=0)),Gr(n)}function S_(n,i){i===0&&(i=tl()),n=Qa(n,i),n!==null&&(ni(n,i),Gr(n))}function MA(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),S_(n,a)}function PA(n,i){var a=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),S_(n,a)}function kA(n,i){return Ht(n,i)}var Wc=null,po=null,om=!1,Zc=!1,lm=!1,ca=0;function Gr(n){n!==po&&n.next===null&&(po===null?Wc=po=n:po=po.next=n),Zc=!0,om||(om=!0,LA())}function $l(n,i){if(!lm&&Zc){lm=!0;do for(var a=!1,u=Wc;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var T=u.suspendedLanes,w=u.pingedLanes;g=(1<<31-Le(42|n)+1)-1,g&=f&~(T&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,I_(u,g))}else g=Fe,g=xa(u,u===ct?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ks(u,g)||(a=!0,I_(u,g));u=u.next}while(a);lm=!1}}function VA(){w_()}function w_(){Zc=om=!1;var n=0;ca!==0&&(GA()&&(n=ca),ca=0);for(var i=ft(),a=null,u=Wc;u!==null;){var f=u.next,g=A_(u,i);g===0?(u.next=null,a===null?Wc=f:a.next=f,f===null&&(po=a)):(a=u,(n!==0||(g&3)!==0)&&(Zc=!0)),u=f}$l(n)}function A_(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var T=31-Le(g),w=1<<T,O=f[T];O===-1?((w&a)===0||(w&u)!==0)&&(f[T]=Jo(w,i)):O<=i&&(n.expiredLanes|=w),g&=~w}if(i=ct,a=Fe,a=xa(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===i&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&xt(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ks(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(u!==null&&xt(u),Na(a)){case 2:case 8:a=Tt;break;case 32:a=Xe;break;case 268435456:a=nt;break;default:a=Xe}return u=R_.bind(null,n),a=Ht(a,u),n.callbackPriority=i,n.callbackNode=a,i}return u!==null&&u!==null&&xt(u),n.callbackPriority=2,n.callbackNode=null,2}function R_(n,i){if(hn!==0&&hn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Xc()&&n.callbackNode!==a)return null;var u=Fe;return u=xa(n,n===ct?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(l_(n,u,i),A_(n,ft()),n.callbackNode!=null&&n.callbackNode===a?R_.bind(null,n):null)}function I_(n,i){if(Xc())return null;l_(n,i,!0)}function LA(){KA(function(){(et&6)!==0?Ht(Et,VA):w_()})}function um(){return ca===0&&(ca=el()),ca}function C_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Va(""+n)}function x_(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function UA(n,i,a,u,f){if(i==="submit"&&a&&a.stateNode===f){var g=C_((f[kt]||null).action),T=u.submitter;T&&(i=(i=T[kt]||null)?C_(i.formAction):T.getAttribute("formAction"),i!==null&&(g=i,T=null));var w=new La("action","action",null,u,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ca!==0){var O=T?x_(f,T):new FormData(f);xd(a,{pending:!0,data:O,method:f.method,action:g},null,O)}}else typeof g=="function"&&(w.preventDefault(),O=T?x_(f,T):new FormData(f),xd(a,{pending:!0,data:O,method:f.method,action:g},g,O))},currentTarget:f}]})}}for(var cm=0;cm<Qf.length;cm++){var hm=Qf[cm],jA=hm.toLowerCase(),zA=hm[0].toUpperCase()+hm.slice(1);gr(jA,"on"+zA)}gr(ly,"onAnimationEnd"),gr(uy,"onAnimationIteration"),gr(cy,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(rA,"onTransitionRun"),gr(iA,"onTransitionStart"),gr(sA,"onTransitionCancel"),gr(hy,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function N_(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var T=u.length-1;0<=T;T--){var w=u[T],O=w.instance,G=w.currentTarget;if(w=w.listener,O!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=G;try{g(f)}catch(ne){jc(ne)}f.currentTarget=null,g=O}else for(T=0;T<u.length;T++){if(w=u[T],O=w.instance,G=w.currentTarget,w=w.listener,O!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=G;try{g(f)}catch(ne){jc(ne)}f.currentTarget=null,g=O}}}}function Ve(n,i){var a=i[il];a===void 0&&(a=i[il]=new Set);var u=n+"__bubble";a.has(u)||(D_(i,n,2,!1),a.add(u))}function fm(n,i,a){var u=0;i&&(u|=4),D_(a,n,u,i)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function dm(n){if(!n[Jc]){n[Jc]=!0,sl.forEach(function(a){a!=="selectionchange"&&(BA.has(a)||fm(a,!1,n),fm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jc]||(i[Jc]=!0,fm("selectionchange",!1,i))}}function D_(n,i,a,u){switch(t0(i)){case 2:var f=m1;break;case 8:f=p1;break;default:f=Im}a=f.bind(null,i,a,n),f=void 0,!Jn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function mm(n,i,a,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var w=u.stateNode.containerInfo;if(w===f)break;if(T===4)for(T=u.return;T!==null;){var O=T.tag;if((O===3||O===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;w!==null;){if(T=ri(w),T===null)return;if(O=T.tag,O===5||O===6||O===26||O===27){u=g=T;continue e}w=w.parentNode}}u=u.return}tc(function(){var G=g,ne=Zn(a),ie=[];e:{var Q=fy.get(n);if(Q!==void 0){var X=La,Re=n;switch(n){case"keypress":if(Vr(a)===0)break e;case"keydown":case"keyup":X=Ha;break;case"focusin":Re="focus",X=za;break;case"focusout":Re="blur",X=za;break;case"beforeblur":case"afterblur":X=za;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=uc;break;case ly:case uy:case cy:X=Ba;break;case hy:X=hc;break;case"scroll":case"scrollend":X=nc;break;case"wheel":X=Fa;break;case"copy":case"cut":case"paste":X=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=yl;break;case"toggle":case"beforetoggle":X=dc}var be=(i&4)!==0,at=!be&&(n==="scroll"||n==="scrollend"),B=be?Q!==null?Q+"Capture":null:Q;be=[];for(var U=G,F;U!==null;){var re=U;if(F=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||F===null||B===null||(re=Hs(U,B),re!=null&&be.push(Ql(U,re,F))),at)break;U=U.return}0<be.length&&(Q=new X(Q,Re,null,a,ne),ie.push({event:Q,listeners:be}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",Q&&a!==oi&&(Re=a.relatedTarget||a.fromElement)&&(ri(Re)||Re[Xn]))break e;if((X||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(Re=a.relatedTarget||a.toElement,X=G,Re=Re?ri(Re):null,Re!==null&&(at=l(Re),be=Re.tag,Re!==at||be!==5&&be!==27&&be!==6)&&(Re=null)):(X=null,Re=G),X!==Re)){if(be=er,re="onMouseLeave",B="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(be=yl,re="onPointerLeave",B="onPointerEnter",U="pointer"),at=X==null?Q:Or(X),F=Re==null?Q:Or(Re),Q=new be(re,U+"leave",X,a,ne),Q.target=at,Q.relatedTarget=F,re=null,ri(ne)===G&&(be=new be(B,U+"enter",Re,a,ne),be.target=F,be.relatedTarget=at,re=be),at=re,X&&Re)t:{for(be=X,B=Re,U=0,F=be;F;F=go(F))U++;for(F=0,re=B;re;re=go(re))F++;for(;0<U-F;)be=go(be),U--;for(;0<F-U;)B=go(B),F--;for(;U--;){if(be===B||B!==null&&be===B.alternate)break t;be=go(be),B=go(B)}be=null}else be=null;X!==null&&O_(ie,Q,X,be,!1),Re!==null&&at!==null&&O_(ie,at,Re,be,!0)}}e:{if(Q=G?Or(G):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var ge=Wg;else if($t(Q))if(Zg)ge=eA;else{ge=Zw;var Pe=Ww}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&cl(G.elementType)&&(ge=Wg):ge=Jw;if(ge&&(ge=ge(n,G))){fi(ie,ge,a,ne);break e}Pe&&Pe(n,Q,G),n==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Fi(Q,"number",Q.value)}switch(Pe=G?Or(G):window,n){case"focusin":($t(Pe)||Pe.contentEditable==="true")&&(Ga=Pe,Gf=G,El=null);break;case"focusout":El=Gf=Ga=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,ay(ie,a,ne);break;case"selectionchange":if(nA)break;case"keydown":case"keyup":ay(ie,a,ne)}var Ee;if(jr)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else qe?Z(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(_&&a.locale!=="ko"&&(qe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&qe&&(Ee=fl()):(kr=ne,Gi="value"in kr?kr.value:kr.textContent,qe=!0)),Pe=eh(G,Se),0<Pe.length&&(Se=new pl(Se,n,null,a,ne),ie.push({event:Se,listeners:Pe}),Ee?Se.data=Ee:(Ee=ue(a),Ee!==null&&(Se.data=Ee)))),(Ee=y?Gt(n,a):He(n,a))&&(Se=eh(G,"onBeforeInput"),0<Se.length&&(Pe=new pl("onBeforeInput","beforeinput",null,a,ne),ie.push({event:Pe,listeners:Se}),Pe.data=Ee)),UA(ie,n,G,a,ne)}N_(ie,i)})}function Ql(n,i,a){return{instance:n,listener:i,currentTarget:a}}function eh(n,i){for(var a=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Hs(n,a),f!=null&&u.unshift(Ql(n,f,g)),f=Hs(n,i),f!=null&&u.push(Ql(n,f,g))),n.tag===3)return u;n=n.return}return[]}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function O_(n,i,a,u,f){for(var g=i._reactName,T=[];a!==null&&a!==u;){var w=a,O=w.alternate,G=w.stateNode;if(w=w.tag,O!==null&&O===u)break;w!==5&&w!==26&&w!==27||G===null||(O=G,f?(G=Hs(a,g),G!=null&&T.unshift(Ql(a,G,O))):f||(G=Hs(a,g),G!=null&&T.push(Ql(a,G,O)))),a=a.return}T.length!==0&&n.push({event:i,listeners:T})}var qA=/\r\n?/g,HA=/\u0000|\uFFFD/g;function M_(n){return(typeof n=="string"?n:""+n).replace(qA,`
`).replace(HA,"")}function P_(n,i){return i=M_(i),M_(n)===i}function th(){}function st(n,i,a,u,f,g){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Wn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Wn(n,""+u);break;case"className":Mr(n,"class",u);break;case"tabIndex":Mr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(n,a,u);break;case"style":ul(n,u,g);break;case"data":if(i!=="object"){Mr(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Va(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&st(n,i,"name",f.name,f,null),st(n,i,"formEncType",f.formEncType,f,null),st(n,i,"formMethod",f.formMethod,f,null),st(n,i,"formTarget",f.formTarget,f,null)):(st(n,i,"encType",f.encType,f,null),st(n,i,"method",f.method,f,null),st(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Va(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=th);break;case"onScroll":u!=null&&Ve("scroll",n);break;case"onScrollEnd":u!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Va(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),Hi(n,"popover",u);break;case"xlinkActuate":ln(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ln(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ln(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ln(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ln(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ln(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ln(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ln(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ln(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Hi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uf.get(a)||a,Hi(n,a,u))}}function pm(n,i,a,u,f,g){switch(a){case"style":ul(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof u=="string"?Wn(n,u):(typeof u=="number"||typeof u=="bigint")&&Wn(n,""+u);break;case"onScroll":u!=null&&Ve("scroll",n);break;case"onScrollEnd":u!=null&&Ve("scrollend",n);break;case"onClick":u!=null&&(n.onclick=th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Da.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),g=n[kt]||null,g=g!=null?g[a]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,u,f);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Hi(n,a,u)}}}function fn(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var u=!1,f=!1,g;for(g in a)if(a.hasOwnProperty(g)){var T=a[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:st(n,i,g,T,a,null)}}f&&st(n,i,"srcSet",a.srcSet,a,null),u&&st(n,i,"src",a.src,a,null);return;case"input":Ve("invalid",n);var w=g=T=f=null,O=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var ne=a[u];if(ne!=null)switch(u){case"name":f=ne;break;case"type":T=ne;break;case"checked":O=ne;break;case"defaultChecked":G=ne;break;case"value":g=ne;break;case"defaultValue":w=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:st(n,i,u,ne,a,null)}}zs(n,g,w,O,G,T,f,!1),ka(n);return;case"select":Ve("invalid",n),u=T=g=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":T=w;break;case"multiple":u=w;default:st(n,i,f,w,a,null)}i=g,a=T,n.multiple=!!u,i!=null?ai(n,!!u,i,!1):a!=null&&ai(n,!!u,a,!0);return;case"textarea":Ve("invalid",n),g=f=u=null;for(T in a)if(a.hasOwnProperty(T)&&(w=a[T],w!=null))switch(T){case"value":u=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:st(n,i,T,w,a,null)}Bs(n,u,f,g),ka(n);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(n,i,O,u,a,null)}return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(u=0;u<Kl.length;u++)Ve(Kl[u],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:st(n,i,G,u,a,null)}return;default:if(cl(i)){for(ne in a)a.hasOwnProperty(ne)&&(u=a[ne],u!==void 0&&pm(n,i,ne,u,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(u=a[w],u!=null&&st(n,i,w,u,a,null))}function FA(n,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,T=null,w=null,O=null,G=null,ne=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=ie;default:u.hasOwnProperty(X)||st(n,i,X,null,u,ie)}}for(var Q in u){var X=u[Q];if(ie=a[Q],u.hasOwnProperty(Q)&&(X!=null||ie!=null))switch(Q){case"type":g=X;break;case"name":f=X;break;case"checked":G=X;break;case"defaultChecked":ne=X;break;case"value":T=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==ie&&st(n,i,Q,X,u,ie)}}jn(n,T,w,O,G,ne,g,f);return;case"select":X=T=w=Q=null;for(g in a)if(O=a[g],a.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":X=O;default:u.hasOwnProperty(g)||st(n,i,g,null,u,O)}for(f in u)if(g=u[f],O=a[f],u.hasOwnProperty(f)&&(g!=null||O!=null))switch(f){case"value":Q=g;break;case"defaultValue":w=g;break;case"multiple":T=g;default:g!==O&&st(n,i,f,g,u,O)}i=w,a=T,u=X,Q!=null?ai(n,!!a,Q,!1):!!u!=!!a&&(i!=null?ai(n,!!a,i,!0):ai(n,!!a,a?[]:"",!1));return;case"textarea":X=Q=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(n,i,w,null,u,f)}for(T in u)if(f=u[T],g=a[T],u.hasOwnProperty(T)&&(f!=null||g!=null))switch(T){case"value":Q=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==g&&st(n,i,T,f,u,g)}rt(n,Q,X);return;case"option":for(var Re in a)if(Q=a[Re],a.hasOwnProperty(Re)&&Q!=null&&!u.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:st(n,i,Re,null,u,Q)}for(O in u)if(Q=u[O],X=a[O],u.hasOwnProperty(O)&&Q!==X&&(Q!=null||X!=null))switch(O){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:st(n,i,O,Q,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)Q=a[be],a.hasOwnProperty(be)&&Q!=null&&!u.hasOwnProperty(be)&&st(n,i,be,null,u,Q);for(G in u)if(Q=u[G],X=a[G],u.hasOwnProperty(G)&&Q!==X&&(Q!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:st(n,i,G,Q,u,X)}return;default:if(cl(i)){for(var at in a)Q=a[at],a.hasOwnProperty(at)&&Q!==void 0&&!u.hasOwnProperty(at)&&pm(n,i,at,void 0,u,Q);for(ne in u)Q=u[ne],X=a[ne],!u.hasOwnProperty(ne)||Q===X||Q===void 0&&X===void 0||pm(n,i,ne,Q,u,X);return}}for(var B in a)Q=a[B],a.hasOwnProperty(B)&&Q!=null&&!u.hasOwnProperty(B)&&st(n,i,B,null,u,Q);for(ie in u)Q=u[ie],X=a[ie],!u.hasOwnProperty(ie)||Q===X||Q==null&&X==null||st(n,i,ie,Q,u,X)}var gm=null,ym=null;function nh(n){return n.nodeType===9?n:n.ownerDocument}function k_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function vm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _m=null;function GA(){var n=window.event;return n&&n.type==="popstate"?n===_m?!1:(_m=n,!0):(_m=null,!1)}var L_=typeof setTimeout=="function"?setTimeout:void 0,$A=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,KA=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(n){return U_.resolve(null).then(n).catch(QA)}:L_;function QA(n){setTimeout(function(){throw n})}function os(n){return n==="head"}function j_(n,i){var a=i,u=0,f=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<u&&8>u){a=u;var T=n.ownerDocument;if(a&1&&Yl(T.documentElement),a&2&&Yl(T.body),a&4)for(a=T.head,Yl(a),T=a.firstChild;T;){var w=T.nextSibling,O=T.nodeName;T[Vs]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=w}}if(f===0){n.removeChild(g),ru(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=g}while(a);ru(i)}function Em(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Em(a),qi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function YA(n,i,a,u){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Vs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=vr(n.nextSibling),n===null)break}return null}function XA(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=vr(n.nextSibling),n===null))return null;return n}function Tm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function WA(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function vr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var bm=null;function z_(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function B_(n,i,a){switch(i=nh(a),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Yl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);qi(n)}var or=new Map,q_=new Set;function rh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ai=ce.d;ce.d={f:ZA,r:JA,D:e1,C:t1,L:n1,m:r1,X:s1,S:i1,M:a1};function ZA(){var n=Ai.f(),i=Qc();return n||i}function JA(n){var i=Dr(n);i!==null&&i.tag===5&&i.type==="form"?lv(i):Ai.r(n)}var yo=typeof document>"u"?null:document;function H_(n,i,a){var u=yo;if(u&&typeof i=="string"&&i){var f=Vt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),q_.has(f)||(q_.add(f),n={rel:n,crossOrigin:a,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),fn(i,"link",n),Dt(i),u.head.appendChild(i)))}}function e1(n){Ai.D(n),H_("dns-prefetch",n,null)}function t1(n,i){Ai.C(n,i),H_("preconnect",n,i)}function n1(n,i,a){Ai.L(n,i,a);var u=yo;if(u&&n&&i){var f='link[rel="preload"][as="'+Vt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Vt(a.imageSizes)+'"]')):f+='[href="'+Vt(n)+'"]';var g=f;switch(i){case"style":g=vo(n);break;case"script":g=_o(n)}or.has(g)||(n=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),or.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(Xl(g))||i==="script"&&u.querySelector(Wl(g))||(i=u.createElement("link"),fn(i,"link",n),Dt(i),u.head.appendChild(i)))}}function r1(n,i){Ai.m(n,i);var a=yo;if(a&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Vt(u)+'"][href="'+Vt(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=_o(n)}if(!or.has(g)&&(n=v({rel:"modulepreload",href:n},i),or.set(g,n),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wl(g)))return}u=a.createElement("link"),fn(u,"link",n),Dt(u),a.head.appendChild(u)}}}function i1(n,i,a){Ai.S(n,i,a);var u=yo;if(u&&n){var f=An(u).hoistableStyles,g=vo(n);i=i||"default";var T=f.get(g);if(!T){var w={loading:0,preload:null};if(T=u.querySelector(Xl(g)))w.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},a),(a=or.get(g))&&Sm(n,a);var O=T=u.createElement("link");Dt(O),fn(O,"link",n),O._p=new Promise(function(G,ne){O.onload=G,O.onerror=ne}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ih(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:w},f.set(g,T)}}}function s1(n,i){Ai.X(n,i);var a=yo;if(a&&n){var u=An(a).hoistableScripts,f=_o(n),g=u.get(f);g||(g=a.querySelector(Wl(f)),g||(n=v({src:n,async:!0},i),(i=or.get(f))&&wm(n,i),g=a.createElement("script"),Dt(g),fn(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function a1(n,i){Ai.M(n,i);var a=yo;if(a&&n){var u=An(a).hoistableScripts,f=_o(n),g=u.get(f);g||(g=a.querySelector(Wl(f)),g||(n=v({src:n,async:!0,type:"module"},i),(i=or.get(f))&&wm(n,i),g=a.createElement("script"),Dt(g),fn(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function F_(n,i,a,u){var f=(f=ye.current)?rh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=vo(a.href),a=An(f).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=vo(a.href);var g=An(f).hoistableStyles,T=g.get(n);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,T),(g=f.querySelector(Xl(n)))&&!g._p&&(T.instance=g,T.state.loading=5),or.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},or.set(n,a),g||o1(f,n,a,T.state))),i&&u===null)throw Error(s(528,""));return T}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_o(a),a=An(f).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function vo(n){return'href="'+Vt(n)+'"'}function Xl(n){return'link[rel="stylesheet"]['+n+"]"}function G_(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function o1(n,i,a,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),fn(i,"link",a),Dt(i),n.head.appendChild(i))}function _o(n){return'[src="'+Vt(n)+'"]'}function Wl(n){return"script[async]"+n}function $_(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Vt(a.href)+'"]');if(u)return i.instance=u,Dt(u),u;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Dt(u),fn(u,"style",f),ih(u,a.precedence,n),i.instance=u;case"stylesheet":f=vo(a.href);var g=n.querySelector(Xl(f));if(g)return i.state.loading|=4,i.instance=g,Dt(g),g;u=G_(a),(f=or.get(f))&&Sm(u,f),g=(n.ownerDocument||n).createElement("link"),Dt(g);var T=g;return T._p=new Promise(function(w,O){T.onload=w,T.onerror=O}),fn(g,"link",u),i.state.loading|=4,ih(g,a.precedence,n),i.instance=g;case"script":return g=_o(a.src),(f=n.querySelector(Wl(g)))?(i.instance=f,Dt(f),f):(u=a,(f=or.get(g))&&(u=v({},a),wm(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Dt(f),fn(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,ih(u,a.precedence,n));return i.instance}function ih(n,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,T=0;T<u.length;T++){var w=u[T];if(w.dataset.precedence===i)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Sm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function wm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var sh=null;function K_(n,i,a){if(sh===null){var u=new Map,f=sh=new Map;f.set(a,u)}else f=sh,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var g=a[f];if(!(g[Vs]||g[Ft]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(i)||"";T=n+T;var w=u.get(T);w?w.push(g):u.set(T,[g])}}return u}function Q_(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function l1(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Y_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Zl=null;function u1(){}function c1(n,i,a){if(Zl===null)throw Error(s(475));var u=Zl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=vo(a.href),g=n.querySelector(Xl(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=ah.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,Dt(g);return}g=n.ownerDocument||n,a=G_(a),(f=or.get(f))&&Sm(a,f),g=g.createElement("link"),Dt(g);var T=g;T._p=new Promise(function(w,O){T.onload=w,T.onerror=O}),fn(g,"link",a),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=ah.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function h1(){if(Zl===null)throw Error(s(475));var n=Zl;return n.stylesheets&&n.count===0&&Am(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Am(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)Am(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var oh=null;function Am(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,oh=new Map,i.forEach(f1,n),oh=null,ah.call(n))}function f1(n,i){if(!(i.state.loading&4)){var a=oh.get(n);if(a)var u=a.get(null);else{a=new Map,oh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var T=f[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),u=T)}u&&a.set(null,u)}f=i.instance,T=f.getAttribute("data-precedence"),g=a.get(T)||u,g===u&&a.set(null,f),a.set(T,f),this.count++,u=ah.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Jl={$$typeof:$,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function d1(n,i,a,u,f,g,T,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function X_(n,i,a,u,f,g,T,w,O,G,ne,ie){return n=new d1(n,i,a,T,w,O,G,ie),i=1,g===!0&&(i|=24),g=Bn(3,null,null,i),n.current=g,g.stateNode=n,i=ad(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:a,cache:i},cd(g),n}function W_(n){return n?(n=Ya,n):Ya}function Z_(n,i,a,u,f,g){f=W_(f),u.context===null?u.context=f:u.pendingContext=f,u=Qi(i),u.payload={element:a},g=g===void 0?null:g,g!==null&&(u.callback=g),a=Yi(n,u,i),a!==null&&($n(a,n,i),xl(a,n,i))}function J_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Rm(n,i){J_(n,i),(n=n.alternate)&&J_(n,i)}function e0(n){if(n.tag===13){var i=Qa(n,67108864);i!==null&&$n(i,n,67108864),Rm(n,67108864)}}var lh=!0;function m1(n,i,a,u){var f=te.T;te.T=null;var g=ce.p;try{ce.p=2,Im(n,i,a,u)}finally{ce.p=g,te.T=f}}function p1(n,i,a,u){var f=te.T;te.T=null;var g=ce.p;try{ce.p=8,Im(n,i,a,u)}finally{ce.p=g,te.T=f}}function Im(n,i,a,u){if(lh){var f=Cm(u);if(f===null)mm(n,i,u,uh,a),n0(n,u);else if(y1(f,n,i,a,u))u.stopPropagation();else if(n0(n,u),i&4&&-1<g1.indexOf(n)){for(;f!==null;){var g=Dr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Nn(g.pendingLanes);if(T!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var O=1<<31-Le(T);w.entanglements[1]|=O,T&=~O}Gr(g),(et&6)===0&&($c=ft()+500,$l(0))}}break;case 13:w=Qa(g,2),w!==null&&$n(w,g,2),Qc(),Rm(g,2)}if(g=Cm(u),g===null&&mm(n,i,u,uh,a),g===f)break;f=g}f!==null&&u.stopPropagation()}else mm(n,i,u,null,a)}}function Cm(n){return n=Zn(n),xm(n)}var uh=null;function xm(n){if(uh=null,n=ri(n),n!==null){var i=l(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return uh=n,null}function t0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case Et:return 2;case Tt:return 8;case Xe:case ze:return 32;case nt:return 268435456;default:return 32}default:return 32}}var Nm=!1,ls=null,us=null,cs=null,eu=new Map,tu=new Map,hs=[],g1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(n,i){switch(n){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":eu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":tu.delete(i.pointerId)}}function nu(n,i,a,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Dr(i),i!==null&&e0(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function y1(n,i,a,u,f){switch(i){case"focusin":return ls=nu(ls,n,i,a,u,f),!0;case"dragenter":return us=nu(us,n,i,a,u,f),!0;case"mouseover":return cs=nu(cs,n,i,a,u,f),!0;case"pointerover":var g=f.pointerId;return eu.set(g,nu(eu.get(g)||null,n,i,a,u,f)),!0;case"gotpointercapture":return g=f.pointerId,tu.set(g,nu(tu.get(g)||null,n,i,a,u,f)),!0}return!1}function r0(n){var i=ri(n.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,Qu(n.priority,function(){if(a.tag===13){var u=Gn();u=ji(u);var f=Qa(a,u);f!==null&&$n(f,a,u),Rm(a,u)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ch(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Cm(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);oi=u,a.target.dispatchEvent(u),oi=null}else return i=Dr(a),i!==null&&e0(i),n.blockedOn=a,!1;i.shift()}return!0}function i0(n,i,a){ch(n)&&a.delete(i)}function v1(){Nm=!1,ls!==null&&ch(ls)&&(ls=null),us!==null&&ch(us)&&(us=null),cs!==null&&ch(cs)&&(cs=null),eu.forEach(i0),tu.forEach(i0)}function hh(n,i){n.blockedOn===i&&(n.blockedOn=null,Nm||(Nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,v1)))}var fh=null;function s0(n){fh!==n&&(fh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fh===n&&(fh=null);for(var i=0;i<n.length;i+=3){var a=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(xm(u||a)===null)continue;break}var g=Dr(a);g!==null&&(n.splice(i,3),i-=3,xd(g,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function ru(n){function i(O){return hh(O,n)}ls!==null&&hh(ls,n),us!==null&&hh(us,n),cs!==null&&hh(cs,n),eu.forEach(i),tu.forEach(i);for(var a=0;a<hs.length;a++){var u=hs[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<hs.length&&(a=hs[0],a.blockedOn===null);)r0(a),a.blockedOn===null&&hs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],g=a[u+1],T=f[kt]||null;if(typeof g=="function")T||s0(a);else if(T){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,T=g[kt]||null)w=T.formAction;else if(xm(f)!==null)continue}else w=T.action;typeof w=="function"?a[u+1]=w:(a.splice(u,3),u-=3),s0(a)}}}function Dm(n){this._internalRoot=n}dh.prototype.render=Dm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=Gn();Z_(a,u,n,i,null,null)},dh.prototype.unmount=Dm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Z_(n.current,2,null,n,null,null),Qc(),i[Xn]=null}};function dh(n){this._internalRoot=n}dh.prototype.unstable_scheduleHydration=function(n){if(n){var i=zi();n={blockedOn:null,target:n,priority:i};for(var a=0;a<hs.length&&i!==0&&i<hs[a].priority;a++);hs.splice(a,0,n),a===0&&r0(n)}};var a0=e.version;if(a0!=="19.1.0")throw Error(s(527,a0,"19.1.0"));ce.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=d(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var _1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{fe=mh.inject(_1),Be=mh}catch{}}return su.createRoot=function(n,i){if(!o(n))throw Error(s(299));var a=!1,u="",f=bv,g=Sv,T=wv,w=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(w=i.unstable_transitionCallbacks)),i=X_(n,1,!1,null,null,a,u,f,g,T,w,null),n[Xn]=i.current,dm(n),new Dm(i)},su.hydrateRoot=function(n,i,a){if(!o(n))throw Error(s(299));var u=!1,f="",g=bv,T=Sv,w=wv,O=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),i=X_(n,1,!0,i,a??null,u,f,g,T,w,O,G),i.context=W_(null),a=i.current,u=Gn(),u=ji(u),f=Qi(u),f.callback=null,Yi(a,f,u),a=u,i.current.lanes=a,ni(i,a),Gr(i),n[Xn]=i.current,dm(n),new dh(i)},su.version="19.1.0",su}var g0;function x1(){if(g0)return Pm.exports;g0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pm.exports=C1(),Pm.exports}var N1=x1(),au={},y0;function D1(){if(y0)return au;y0=1,Object.defineProperty(au,"__esModule",{value:!0}),au.parse=h,au.serialize=m;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function h(S,I){const x=new l,P=S.length;if(P<2)return x;const M=(I==null?void 0:I.decode)||v;let Y=0;do{const ee=S.indexOf("=",Y);if(ee===-1)break;const $=S.indexOf(";",Y),oe=$===-1?P:$;if(ee>oe){Y=S.lastIndexOf(";",ee-1)+1;continue}const le=p(S,Y,ee),ve=d(S,ee,le),V=S.slice(le,ve);if(x[V]===void 0){let C=p(S,ee+1,oe),N=d(S,oe,C);const k=M(S.slice(C,N));x[V]=k}Y=oe+1}while(Y<P);return x}function p(S,I,x){do{const P=S.charCodeAt(I);if(P!==32&&P!==9)return I}while(++I<x);return x}function d(S,I,x){for(;I>x;){const P=S.charCodeAt(--I);if(P!==32&&P!==9)return I+1}return x}function m(S,I,x){const P=(x==null?void 0:x.encode)||encodeURIComponent;if(!r.test(S))throw new TypeError(`argument name is invalid: ${S}`);const M=P(I);if(!e.test(M))throw new TypeError(`argument val is invalid: ${I}`);let Y=S+"="+M;if(!x)return Y;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);Y+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);Y+="; Domain="+x.domain}if(x.path){if(!s.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);Y+="; Path="+x.path}if(x.expires){if(!E(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);Y+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(Y+="; HttpOnly"),x.secure&&(Y+="; Secure"),x.partitioned&&(Y+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return Y}function v(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function E(S){return o.call(S)==="[object Date]"}return au}D1();var v0="popstate";function O1(r={}){function e(s,o){let{pathname:l,search:h,hash:p}=s.location;return ap("",{pathname:l,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Tu(o)}return P1(e,t,null,r)}function vt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function fr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M1(){return Math.random().toString(36).substring(2,10)}function _0(r,e){return{usr:r.state,key:r.key,idx:e}}function ap(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:t,key:e&&e.key||s||M1()}}function Tu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Bo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function P1(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,p="POP",d=null,m=v();m==null&&(m=0,h.replaceState({...h.state,idx:m},""));function v(){return(h.state||{idx:null}).idx}function E(){p="POP";let M=v(),Y=M==null?null:M-m;m=M,d&&d({action:p,location:P.location,delta:Y})}function S(M,Y){p="PUSH";let ee=ap(P.location,M,Y);m=v()+1;let $=_0(ee,m),oe=P.createHref(ee);try{h.pushState($,"",oe)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(oe)}l&&d&&d({action:p,location:P.location,delta:1})}function I(M,Y){p="REPLACE";let ee=ap(P.location,M,Y);m=v();let $=_0(ee,m),oe=P.createHref(ee);h.replaceState($,"",oe),l&&d&&d({action:p,location:P.location,delta:0})}function x(M){return k1(M)}let P={get action(){return p},get location(){return r(o,h)},listen(M){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(v0,E),d=M,()=>{o.removeEventListener(v0,E),d=null}},createHref(M){return e(o,M)},createURL:x,encodeLocation(M){let Y=x(M);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:I,go(M){return h.go(M)}};return P}function k1(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Tu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function _T(r,e,t="/"){return V1(r,e,t,!1)}function V1(r,e,t,s){let o=typeof e=="string"?Bo(e):e,l=Mi(o.pathname||"/",t);if(l==null)return null;let h=ET(r);L1(h);let p=null;for(let d=0;p==null&&d<h.length;++d){let m=Q1(l);p=$1(h[d],m,s)}return p}function ET(r,e=[],t=[],s=""){let o=(l,h,p)=>{let d={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};d.relativePath.startsWith("/")&&(vt(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let m=Ni([s,d.relativePath]),v=t.concat(d);l.children&&l.children.length>0&&(vt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),ET(l.children,e,v,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:F1(m,l.index),routesMeta:v})};return r.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let d of TT(l.path))o(l,h,d)}),e}function TT(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=TT(s.join("/")),p=[];return p.push(...h.map(d=>d===""?l:[l,d].join("/"))),o&&p.push(...h),p.map(d=>r.startsWith("/")&&d===""?"/":d)}function L1(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:G1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var U1=/^:[\w-]+$/,j1=3,z1=2,B1=1,q1=10,H1=-2,E0=r=>r==="*";function F1(r,e){let t=r.split("/"),s=t.length;return t.some(E0)&&(s+=H1),e&&(s+=z1),t.filter(o=>!E0(o)).reduce((o,l)=>o+(U1.test(l)?j1:l===""?B1:q1),s)}function G1(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function $1(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let p=0;p<s.length;++p){let d=s[p],m=p===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Ph({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},v),S=d.route;if(!E&&m&&t&&!s[s.length-1].route.index&&(E=Ph({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Ni([l,E.pathname]),pathnameBase:Z1(Ni([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ni([l,E.pathnameBase]))}return h}function Ph(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=K1(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((m,{paramName:v,isOptional:E},S)=>{if(v==="*"){let x=p[S]||"";h=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const I=p[S];return E&&!I?m[v]=void 0:m[v]=(I||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:h,pattern:r}}function K1(r,e=!1,t=!0){fr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,d)=>(s.push({paramName:p,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Q1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Mi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function Y1(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Bo(r):r;return{pathname:t?t.startsWith("/")?t:X1(t,e):e,search:J1(s),hash:eR(o)}}function X1(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Um(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W1(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Lp(r){let e=W1(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Up(r,e,t,s=!1){let o;typeof r=="string"?o=Bo(r):(o={...r},vt(!o.pathname||!o.pathname.includes("?"),Um("?","pathname","search",o)),vt(!o.pathname||!o.pathname.includes("#"),Um("#","pathname","hash",o)),vt(!o.search||!o.search.includes("#"),Um("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}p=E>=0?e[E]:"/"}let d=Y1(o,p),m=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||v)&&(d.pathname+="/"),d}var Ni=r=>r.join("/").replace(/\/\/+/g,"/"),Z1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),J1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,eR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tR(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var bT=["POST","PUT","PATCH","DELETE"];new Set(bT);var nR=["GET",...bT];new Set(nR);var qo=j.createContext(null);qo.displayName="DataRouter";var sf=j.createContext(null);sf.displayName="DataRouterState";var ST=j.createContext({isTransitioning:!1});ST.displayName="ViewTransition";var rR=j.createContext(new Map);rR.displayName="Fetchers";var iR=j.createContext(null);iR.displayName="Await";var Ar=j.createContext(null);Ar.displayName="Navigation";var Pu=j.createContext(null);Pu.displayName="Location";var Rr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var jp=j.createContext(null);jp.displayName="RouteError";function sR(r,{relative:e}={}){vt(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=j.useContext(Ar),{hash:o,pathname:l,search:h}=ku(r,{relative:e}),p=l;return t!=="/"&&(p=l==="/"?t:Ni([t,l])),s.createHref({pathname:p,search:h,hash:o})}function Ho(){return j.useContext(Pu)!=null}function Zr(){return vt(Ho(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Pu).location}var wT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AT(r){j.useContext(Ar).static||j.useLayoutEffect(r)}function on(){let{isDataRoute:r}=j.useContext(Rr);return r?vR():aR()}function aR(){vt(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(qo),{basename:e,navigator:t}=j.useContext(Ar),{matches:s}=j.useContext(Rr),{pathname:o}=Zr(),l=JSON.stringify(Lp(s)),h=j.useRef(!1);return AT(()=>{h.current=!0}),j.useCallback((d,m={})=>{if(fr(h.current,wT),!h.current)return;if(typeof d=="number"){t.go(d);return}let v=Up(d,JSON.parse(l),o,m.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ni([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,l,o,r])}j.createContext(null);function Fo(){let{matches:r}=j.useContext(Rr),e=r[r.length-1];return e?e.params:{}}function ku(r,{relative:e}={}){let{matches:t}=j.useContext(Rr),{pathname:s}=Zr(),o=JSON.stringify(Lp(t));return j.useMemo(()=>Up(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function oR(r,e){return RT(r,e)}function RT(r,e,t,s){var Y;vt(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(Ar),{matches:l}=j.useContext(Rr),h=l[l.length-1],p=h?h.params:{},d=h?h.pathname:"/",m=h?h.pathnameBase:"/",v=h&&h.route;{let ee=v&&v.path||"";IT(d,!v||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let E=Zr(),S;if(e){let ee=typeof e=="string"?Bo(e):e;vt(m==="/"||((Y=ee.pathname)==null?void 0:Y.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),S=ee}else S=E;let I=S.pathname||"/",x=I;if(m!=="/"){let ee=m.replace(/^\//,"").split("/");x="/"+I.replace(/^\//,"").split("/").slice(ee.length).join("/")}let P=_T(r,{pathname:x});fr(v||P!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),fr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=fR(P&&P.map(ee=>Object.assign({},ee,{params:Object.assign({},p,ee.params),pathname:Ni([m,o.encodeLocation?o.encodeLocation(ee.pathname).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?m:Ni([m,o.encodeLocation?o.encodeLocation(ee.pathnameBase).pathname:ee.pathnameBase])})),l,t,s);return e&&M?j.createElement(Pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},M):M}function lR(){let r=yR(),e=tR(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,h)}var uR=j.createElement(lR,null),cR=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?j.createElement(Rr.Provider,{value:this.props.routeContext},j.createElement(jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hR({routeContext:r,match:e,children:t}){let s=j.useContext(qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Rr.Provider,{value:r},t)}function fR(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);vt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let h=!1,p=-1;if(t)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=d),m.route.id){let{loaderData:v,errors:E}=t,S=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||S){h=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((d,m,v)=>{let E,S=!1,I=null,x=null;t&&(E=l&&m.route.id?l[m.route.id]:void 0,I=m.route.errorElement||uR,h&&(p<0&&v===0?(IT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,x=null):p===v&&(S=!0,x=m.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,v+1)),M=()=>{let Y;return E?Y=I:S?Y=x:m.route.Component?Y=j.createElement(m.route.Component,null):m.route.element?Y=m.route.element:Y=d,j.createElement(hR,{match:m,routeContext:{outlet:d,matches:P,isDataRoute:t!=null},children:Y})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?j.createElement(cR,{location:t.location,revalidation:t.revalidation,component:I,error:E,children:M(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):M()},null)}function zp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dR(r){let e=j.useContext(qo);return vt(e,zp(r)),e}function mR(r){let e=j.useContext(sf);return vt(e,zp(r)),e}function pR(r){let e=j.useContext(Rr);return vt(e,zp(r)),e}function Bp(r){let e=pR(r),t=e.matches[e.matches.length-1];return vt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function gR(){return Bp("useRouteId")}function yR(){var s;let r=j.useContext(jp),e=mR("useRouteError"),t=Bp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function vR(){let{router:r}=dR("useNavigate"),e=Bp("useNavigate"),t=j.useRef(!1);return AT(()=>{t.current=!0}),j.useCallback(async(o,l={})=>{fr(t.current,wT),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var T0={};function IT(r,e,t){!e&&!T0[r]&&(T0[r]=!0,fr(!1,t))}j.memo(_R);function _R({routes:r,future:e,state:t}){return RT(r,void 0,t,e)}function CT({to:r,replace:e,state:t,relative:s}){vt(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(Ar);fr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(Rr),{pathname:h}=Zr(),p=on(),d=Up(r,Lp(l),h,s==="path"),m=JSON.stringify(d);return j.useEffect(()=>{p(JSON.parse(m),{replace:e,state:t,relative:s})},[p,m,s,e,t]),null}function Yt(r){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ER({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){vt(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=Bo(t));let{pathname:d="/",search:m="",hash:v="",state:E=null,key:S="default"}=t,I=j.useMemo(()=>{let x=Mi(d,h);return x==null?null:{location:{pathname:x,search:m,hash:v,state:E,key:S},navigationType:s}},[h,d,m,v,E,S,s]);return fr(I!=null,`<Router basename="${h}"> is not able to match the URL "${d}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:j.createElement(Ar.Provider,{value:p},j.createElement(Pu.Provider,{children:e,value:I}))}function TR({children:r,location:e}){return oR(op(r),e)}function op(r,e=[]){let t=[];return j.Children.forEach(r,(s,o)=>{if(!j.isValidElement(s))return;let l=[...e,o];if(s.type===j.Fragment){t.push.apply(t,op(s.props.children,l));return}vt(s.type===Yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=op(s.props.children,l)),t.push(h)}),t}var bh="get",Sh="application/x-www-form-urlencoded";function af(r){return r!=null&&typeof r.tagName=="string"}function bR(r){return af(r)&&r.tagName.toLowerCase()==="button"}function SR(r){return af(r)&&r.tagName.toLowerCase()==="form"}function wR(r){return af(r)&&r.tagName.toLowerCase()==="input"}function AR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function RR(r,e){return r.button===0&&(!e||e==="_self")&&!AR(r)}function lp(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let s=r[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function IR(r,e){let t=lp(r);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}var ph=null;function CR(){if(ph===null)try{new FormData(document.createElement("form"),0),ph=!1}catch{ph=!0}return ph}var xR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jm(r){return r!=null&&!xR.has(r)?(fr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sh}"`),null):r}function NR(r,e){let t,s,o,l,h;if(SR(r)){let p=r.getAttribute("action");s=p?Mi(p,e):null,t=r.getAttribute("method")||bh,o=jm(r.getAttribute("enctype"))||Sh,l=new FormData(r)}else if(bR(r)||wR(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||p.getAttribute("action");if(s=d?Mi(d,e):null,t=r.getAttribute("formmethod")||p.getAttribute("method")||bh,o=jm(r.getAttribute("formenctype"))||jm(p.getAttribute("enctype"))||Sh,l=new FormData(p,r),!CR()){let{name:m,type:v,value:E}=r;if(v==="image"){let S=m?`${m}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else m&&l.append(m,E)}}else{if(af(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bh,s=null,o=Sh,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}function qp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function DR(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OR(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function MR(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await DR(l,t);return h.links?h.links():[]}return[]}));return LR(s.flat(1).filter(OR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function b0(r,e,t,s,o,l){let h=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,p=(d,m)=>{var v;return t[m].pathname!==d.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,m)=>h(d,m)||p(d,m)):l==="data"?e.filter((d,m)=>{var E;let v=s.routes[d.route.id];if(!v||!v.hasLoader)return!1;if(h(d,m)||p(d,m))return!0;if(d.route.shouldRevalidate){let S=d.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function PR(r,e,{includeHydrateFallback:t}={}){return kR(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function kR(r){return[...new Set(r)]}function VR(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function LR(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(VR(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var UR=new Set([100,101,204,205]);function jR(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Mi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function xT(){let r=j.useContext(qo);return qp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function zR(){let r=j.useContext(sf);return qp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Hp=j.createContext(void 0);Hp.displayName="FrameworkContext";function NT(){let r=j.useContext(Hp);return qp(r,"You must render this element inside a <HydratedRouter> element"),r}function BR(r,e){let t=j.useContext(Hp),[s,o]=j.useState(!1),[l,h]=j.useState(!1),{onFocus:p,onBlur:d,onMouseEnter:m,onMouseLeave:v,onTouchStart:E}=e,S=j.useRef(null);j.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let P=Y=>{Y.forEach(ee=>{h(ee.isIntersecting)})},M=new IntersectionObserver(P,{threshold:.5});return S.current&&M.observe(S.current),()=>{M.disconnect()}}},[r]),j.useEffect(()=>{if(s){let P=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(P)}}},[s]);let I=()=>{o(!0)},x=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,S,{}]:[l,S,{onFocus:ou(p,I),onBlur:ou(d,x),onMouseEnter:ou(m,I),onMouseLeave:ou(v,x),onTouchStart:ou(E,I)}]:[!1,S,{}]}function ou(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function qR({page:r,...e}){let{router:t}=xT(),s=j.useMemo(()=>_T(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?j.createElement(FR,{page:r,matches:s,...e}):null}function HR(r){let{manifest:e,routeModules:t}=NT(),[s,o]=j.useState([]);return j.useEffect(()=>{let l=!1;return MR(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function FR({page:r,matches:e,...t}){let s=Zr(),{manifest:o,routeModules:l}=NT(),{basename:h}=xT(),{loaderData:p,matches:d}=zR(),m=j.useMemo(()=>b0(r,e,d,o,s,"data"),[r,e,d,o,s]),v=j.useMemo(()=>b0(r,e,d,o,s,"assets"),[r,e,d,o,s]),E=j.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let x=new Set,P=!1;if(e.forEach(Y=>{var $;let ee=o.routes[Y.route.id];!ee||!ee.hasLoader||(!m.some(oe=>oe.route.id===Y.route.id)&&Y.route.id in p&&(($=l[Y.route.id])!=null&&$.shouldRevalidate)||ee.hasClientLoader?P=!0:x.add(Y.route.id))}),x.size===0)return[];let M=jR(r,h);return P&&x.size>0&&M.searchParams.set("_routes",e.filter(Y=>x.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[M.pathname+M.search]},[h,p,s,o,m,e,r,l]),S=j.useMemo(()=>PR(v,o),[v,o]),I=HR(v);return j.createElement(j.Fragment,null,E.map(x=>j.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),S.map(x=>j.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),I.map(({key:x,link:P})=>j.createElement("link",{key:x,...P})))}function GR(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var DT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{DT&&(window.__reactRouterVersion="7.6.2")}catch{}function $R({basename:r,children:e,window:t}){let s=j.useRef();s.current==null&&(s.current=O1({window:t,v5Compat:!0}));let o=s.current,[l,h]=j.useState({action:o.action,location:o.location}),p=j.useCallback(d=>{j.startTransition(()=>h(d))},[h]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.createElement(ER,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var OT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=j.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:p,target:d,to:m,preventScrollReset:v,viewTransition:E,...S},I){let{basename:x}=j.useContext(Ar),P=typeof m=="string"&&OT.test(m),M,Y=!1;if(typeof m=="string"&&P&&(M=m,DT))try{let N=new URL(window.location.href),k=m.startsWith("//")?new URL(N.protocol+m):new URL(m),L=Mi(k.pathname,x);k.origin===N.origin&&L!=null?m=L+k.search+k.hash:Y=!0}catch{fr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=sR(m,{relative:o}),[$,oe,le]=BR(s,S),ve=XR(m,{replace:h,state:p,target:d,preventScrollReset:v,relative:o,viewTransition:E});function V(N){e&&e(N),N.defaultPrevented||ve(N)}let C=j.createElement("a",{...S,...le,href:M||ee,onClick:Y||l?e:V,ref:GR(I,oe),target:d,"data-discover":!P&&t==="render"?"true":void 0});return $&&!P?j.createElement(j.Fragment,null,C,j.createElement(qR,{page:ee})):C});bn.displayName="Link";var KR=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:p,children:d,...m},v){let E=ku(h,{relative:m.relative}),S=Zr(),I=j.useContext(sf),{navigator:x,basename:P}=j.useContext(Ar),M=I!=null&&tI(E)&&p===!0,Y=x.encodeLocation?x.encodeLocation(E).pathname:E.pathname,ee=S.pathname,$=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(ee=ee.toLowerCase(),$=$?$.toLowerCase():null,Y=Y.toLowerCase()),$&&P&&($=Mi($,P)||$);const oe=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let le=ee===Y||!o&&ee.startsWith(Y)&&ee.charAt(oe)==="/",ve=$!=null&&($===Y||!o&&$.startsWith(Y)&&$.charAt(Y.length)==="/"),V={isActive:le,isPending:ve,isTransitioning:M},C=le?e:void 0,N;typeof s=="function"?N=s(V):N=[s,le?"active":null,ve?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(V):l;return j.createElement(bn,{...m,"aria-current":C,className:N,ref:v,style:k,to:h,viewTransition:p},typeof d=="function"?d(V):d)});KR.displayName="NavLink";var QR=j.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=bh,action:p,onSubmit:d,relative:m,preventScrollReset:v,viewTransition:E,...S},I)=>{let x=JR(),P=eI(p,{relative:m}),M=h.toLowerCase()==="get"?"get":"post",Y=typeof p=="string"&&OT.test(p),ee=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let oe=$.nativeEvent.submitter,le=(oe==null?void 0:oe.getAttribute("formmethod"))||h;x(oe||$.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:o,state:l,relative:m,preventScrollReset:v,viewTransition:E})};return j.createElement("form",{ref:I,method:M,action:P,onSubmit:s?d:ee,...S,"data-discover":!Y&&r==="render"?"true":void 0})});QR.displayName="Form";function YR(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MT(r){let e=j.useContext(qo);return vt(e,YR(r)),e}function XR(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let p=on(),d=Zr(),m=ku(r,{relative:l});return j.useCallback(v=>{if(RR(v,e)){v.preventDefault();let E=t!==void 0?t:Tu(d)===Tu(m);p(r,{replace:E,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[d,p,m,t,s,e,r,o,l,h])}function Fp(r){fr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(lp(r)),t=j.useRef(!1),s=Zr(),o=j.useMemo(()=>IR(s.search,t.current?null:e.current),[s.search]),l=on(),h=j.useCallback((p,d)=>{const m=lp(typeof p=="function"?p(o):p);t.current=!0,l("?"+m,d)},[l,o]);return[o,h]}var WR=0,ZR=()=>`__${String(++WR)}__`;function JR(){let{router:r}=MT("useSubmit"),{basename:e}=j.useContext(Ar),t=gR();return j.useCallback(async(s,o={})=>{let{action:l,method:h,encType:p,formData:d,body:m}=NR(s,e);if(o.navigate===!1){let v=o.fetcherKey||ZR();await r.fetch(v,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:d,body:m,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:d,body:m,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function eI(r,{relative:e}={}){let{basename:t}=j.useContext(Ar),s=j.useContext(Rr);vt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...ku(r||".",{relative:e})},h=Zr();if(r==null){l.search=h.search;let p=new URLSearchParams(l.search),d=p.getAll("index");if(d.some(v=>v==="")){p.delete("index"),d.filter(E=>E).forEach(E=>p.append("index",E));let v=p.toString();l.search=v?`?${v}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ni([t,l.pathname])),Tu(l)}function tI(r,e={}){let t=j.useContext(ST);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=MT("useViewTransitionState"),o=ku(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Mi(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=Mi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Ph(o.pathname,h)!=null||Ph(o.pathname,l)!=null}[...UR];const nI=()=>{};var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},rI=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],d=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},kT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,d=o+2<r.length,m=d?r[o+2]:0,v=l>>2,E=(l&3)<<4|p>>4;let S=(p&15)<<2|m>>6,I=m&63;d||(I=64,h||(S=64)),s.push(t[v],t[E],t[S],t[I])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(PT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):rI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const m=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||m==null||E==null)throw new iI;const S=l<<2|p>>4;if(s.push(S),m!==64){const I=p<<4&240|m>>2;if(s.push(I),E!==64){const x=m<<6&192|E;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sI=function(r){const e=PT(r);return kT.encodeByteArray(e,!0)},kh=function(r){return sI(r).replace(/\./g,"")},VT=function(r){try{return kT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=()=>aI().__FIREBASE_DEFAULTS__,lI=()=>{if(typeof process>"u"||typeof S0>"u")return;const r=S0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},uI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&VT(r[1]);return e&&JSON.parse(e)},of=()=>{try{return nI()||oI()||lI()||uI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},LT=r=>{var e,t;return(t=(e=of())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},cI=r=>{const e=LT(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},UT=()=>{var r;return(r=of())===null||r===void 0?void 0:r.config},jT=r=>{var e;return(e=of())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(r){return r.endsWith(".cloudworkstations.dev")}async function zT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[kh(JSON.stringify(t)),kh(JSON.stringify(h)),""].join(".")}const mu={};function dI(){const r={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?r.emulator.push(e):r.prod.push(e);return r}function mI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let w0=!1;function BT(r,e){if(typeof window>"u"||typeof document>"u"||!Go(window.location.host)||mu[r]===e||mu[r]||w0)return;mu[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=dI().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function d(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{w0=!0,h()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=mI(s),I=t("text"),x=document.getElementById(I)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),Y=t("preprendIcon"),ee=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;p($),v(M,P);const oe=m();d(ee,Y),$.append(ee,x,M,oe),document.body.appendChild($)}l?(x.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function gI(){var r;const e=(r=of())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function vI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _I(){const r=Sn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function EI(){return!gI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HT(){try{return typeof indexedDB=="object"}catch{return!1}}function FT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function TI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="FirebaseError";class Ir extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=bI,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wa.prototype.create)}}class wa{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?SI(l,s):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Ir(o,p,s)}}function SI(r,e){return r.replace(wI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const wI=/\{\$([^}]+)}/g;function AI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ss(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(A0(l)&&A0(h)){if(!Ss(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function A0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function lu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function uu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function RI(r,e){const t=new II(r,e);return t.subscribe.bind(t)}class II{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");CI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=zm),o.error===void 0&&(o.error=zm),o.complete===void 0&&(o.complete=zm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function zm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=1e3,NI=2,DI=4*60*60*1e3,OI=.5;function R0(r,e=xI,t=NI){const s=e*Math.pow(t,r),o=Math.round(OI*s*(Math.random()-.5)*2);return Math.min(DI,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r){return r&&r._delegate?r._delegate:r}class Tr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new hI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kI(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(r){return r===ha?void 0:r}function kI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new MI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const LI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},UI=Ue.INFO,jI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},zI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=jI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lf{constructor(e){this.name=e,this._logLevel=UI,this._logHandler=zI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const BI=(r,e)=>e.some(t=>r instanceof t);let I0,C0;function qI(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HI(){return C0||(C0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GT=new WeakMap,up=new WeakMap,$T=new WeakMap,Bm=new WeakMap,Gp=new WeakMap;function FI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(vs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&GT.set(t,r)}).catch(()=>{}),Gp.set(e,r),e}function GI(r){if(up.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});up.set(r,e)}let cp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return up.get(r);if(e==="objectStoreNames")return r.objectStoreNames||$T.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $I(r){cp=r(cp)}function KI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(qm(this),e,...t);return $T.set(s,e.sort?e.sort():[e]),vs(s)}:HI().includes(r)?function(...e){return r.apply(qm(this),e),vs(GT.get(this))}:function(...e){return vs(r.apply(qm(this),e))}}function QI(r){return typeof r=="function"?KI(r):(r instanceof IDBTransaction&&GI(r),BI(r,qI())?new Proxy(r,cp):r)}function vs(r){if(r instanceof IDBRequest)return FI(r);if(Bm.has(r))return Bm.get(r);const e=QI(r);return e!==r&&(Bm.set(r,e),Gp.set(e,r)),e}const qm=r=>Gp.get(r);function KT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=vs(h);return s&&h.addEventListener("upgradeneeded",d=>{s(vs(h.result),d.oldVersion,d.newVersion,vs(h.transaction),d)}),t&&h.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),p.then(d=>{l&&d.addEventListener("close",()=>l()),o&&d.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}const YI=["get","getKey","getAll","getAllKeys","count"],XI=["put","add","delete","clear"],Hm=new Map;function x0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=XI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||YI.includes(t)))return;const l=async function(h,...p){const d=this.transaction(h,o?"readwrite":"readonly");let m=d.store;return s&&(m=m.index(p.shift())),(await Promise.all([m[t](...p),o&&d.done]))[0]};return Hm.set(e,l),l}$I(r=>({...r,get:(e,t,s)=>x0(e,t)||r.get(e,t,s),has:(e,t)=>!!x0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ZI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function ZI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",N0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new lf("@firebase/app"),JI="@firebase/app-compat",eC="@firebase/analytics-compat",tC="@firebase/analytics",nC="@firebase/app-check-compat",rC="@firebase/app-check",iC="@firebase/auth",sC="@firebase/auth-compat",aC="@firebase/database",oC="@firebase/data-connect",lC="@firebase/database-compat",uC="@firebase/functions",cC="@firebase/functions-compat",hC="@firebase/installations",fC="@firebase/installations-compat",dC="@firebase/messaging",mC="@firebase/messaging-compat",pC="@firebase/performance",gC="@firebase/performance-compat",yC="@firebase/remote-config",vC="@firebase/remote-config-compat",_C="@firebase/storage",EC="@firebase/storage-compat",TC="@firebase/firestore",bC="@firebase/ai",SC="@firebase/firestore-compat",wC="firebase",AC="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",RC={[hp]:"fire-core",[JI]:"fire-core-compat",[tC]:"fire-analytics",[eC]:"fire-analytics-compat",[rC]:"fire-app-check",[nC]:"fire-app-check-compat",[iC]:"fire-auth",[sC]:"fire-auth-compat",[aC]:"fire-rtdb",[oC]:"fire-data-connect",[lC]:"fire-rtdb-compat",[uC]:"fire-fn",[cC]:"fire-fn-compat",[hC]:"fire-iid",[fC]:"fire-iid-compat",[dC]:"fire-fcm",[mC]:"fire-fcm-compat",[pC]:"fire-perf",[gC]:"fire-perf-compat",[yC]:"fire-rc",[vC]:"fire-rc-compat",[_C]:"fire-gcs",[EC]:"fire-gcs-compat",[TC]:"fire-fst",[SC]:"fire-fst-compat",[bC]:"fire-vertex","fire-js":"fire-js",[wC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,IC=new Map,dp=new Map;function D0(r,e){try{r.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xr(r){const e=r.name;if(dp.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,r);for(const t of Vh.values())D0(t,r);for(const t of IC.values())D0(t,r);return!0}function Aa(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Kn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new wa("app","Firebase",CC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=AC;function QT(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:fp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(t||(t=UT()),!t)throw _s.create("no-options");const l=Vh.get(o);if(l){if(Ss(t,l.options)&&Ss(s,l.config))return l;throw _s.create("duplicate-app",{appName:o})}const h=new VI(o);for(const d of dp.values())h.addComponent(d);const p=new xC(t,s,h);return Vh.set(o,p),p}function $p(r=fp){const e=Vh.get(r);if(!e&&r===fp&&UT())return QT();if(!e)throw _s.create("no-app",{appName:r});return e}function ur(r,e,t){var s;let o=(s=RC[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(p.join(" "));return}Xr(new Tr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebase-heartbeat-database",DC=1,bu="firebase-heartbeat-store";let Fm=null;function YT(){return Fm||(Fm=KT(NC,DC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(bu)}catch(t){console.warn(t)}}}}).catch(r=>{throw _s.create("idb-open",{originalErrorMessage:r.message})})),Fm}async function OC(r){try{const t=(await YT()).transaction(bu),s=await t.objectStore(bu).get(XT(r));return await t.done,s}catch(e){if(e instanceof Ir)Pi.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(t.message)}}}async function O0(r,e){try{const s=(await YT()).transaction(bu,"readwrite");await s.objectStore(bu).put(e,XT(r)),await s.done}catch(t){if(t instanceof Ir)Pi.warn(t.message);else{const s=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pi.warn(s.message)}}}function XT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=1024,PC=30;class kC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=M0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>PC){const h=UC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Pi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M0(),{heartbeatsToSend:s,unsentEntries:o}=VC(this._heartbeatsCache.heartbeats),l=kh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Pi.warn(t),""}}}function M0(){return new Date().toISOString().substring(0,10)}function VC(r,e=MC){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),P0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),P0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class LC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HT()?FT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return O0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return O0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function P0(r){return kh(JSON.stringify({version:2,heartbeats:r})).length}function UC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(r){Xr(new Tr("platform-logger",e=>new WI(e),"PRIVATE")),Xr(new Tr("heartbeat",e=>new kC(e),"PRIVATE")),ur(hp,N0,r),ur(hp,N0,"esm2017"),ur("fire-js","")}jC("");function Kp(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zC=WT,ZT=new wa("auth","Firebase",WT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new lf("@firebase/auth");function BC(r,...e){Lh.logLevel<=Ue.WARN&&Lh.warn(`Auth (${$o}): ${r}`,...e)}function wh(r,...e){Lh.logLevel<=Ue.ERROR&&Lh.error(`Auth (${$o}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(r,...e){throw Yp(r,...e)}function Er(r,...e){return Yp(r,...e)}function Qp(r,e,t){const s=Object.assign(Object.assign({},zC()),{[e]:t});return new wa("auth","Firebase",s).create(e,{appName:r.name})}function Di(r){return Qp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qC(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&dr(r,"argument-error"),Qp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return ZT.create(r,...e)}function we(r,e,...t){if(!r)throw Yp(e,...t)}function Ci(r){const e="INTERNAL ASSERTION FAILED: "+r;throw wh(e),new Error(e)}function ki(r,e){r||Ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function HC(){return k0()==="http:"||k0()==="https:"}function k0(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HC()||qT()||"connection"in navigator)?navigator.onLine:!0}function GC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ki(t>e,"Short delay should be less than long delay!"),this.isMobile=pI()||vI()}get(){return FC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(r,e){ki(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QC=new Lu(3e4,6e4);function Ns(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ds(r,e,t,s,o={}){return eb(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const p=Vu(Object.assign({key:r.config.apiKey},h)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const m=Object.assign({method:e,headers:d},l);return yI()||(m.referrerPolicy="no-referrer"),r.emulatorConfig&&Go(r.emulatorConfig.host)&&(m.credentials="include"),JT.fetch()(await tb(r,r.config.apiHost,t,p),m)})}async function eb(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},$C),e);try{const o=new XC(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw gh(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[d,m]=p.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(r,"credential-already-in-use",h);if(d==="EMAIL_EXISTS")throw gh(r,"email-already-in-use",h);if(d==="USER_DISABLED")throw gh(r,"user-disabled",h);const v=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Qp(r,v,m);dr(r,v)}}catch(o){if(o instanceof Ir)throw o;dr(r,"network-request-failed",{message:String(o)})}}async function Uu(r,e,t,s,o={}){const l=await Ds(r,e,t,s,o);return"mfaPendingCredential"in l&&dr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function tb(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Xp(r.config,o):`${r.config.apiScheme}://${o}`;return KC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function YC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Er(this.auth,"network-request-failed")),QC.get())})}}function gh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Er(r,e,s);return o.customData._tokenResponse=t,o}function V0(r){return r!==void 0&&r.enterprise!==void 0}class WC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return YC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZC(r,e){return Ds(r,"GET","/v2/recaptchaConfig",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(r,e){return Ds(r,"POST","/v1/accounts:delete",e)}async function Uh(r,e){return Ds(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e2(r,e=!1){const t=qt(r),s=await t.getIdToken(e),o=Wp(s);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:pu(Gm(o.auth_time)),issuedAtTime:pu(Gm(o.iat)),expirationTime:pu(Gm(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Gm(r){return Number(r)*1e3}function Wp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=VT(t);return o?JSON.parse(o):(wh("Failed to decode base64 JWT payload"),null)}catch(o){return wh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function L0(r){const e=Wp(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ir&&t2(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function t2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Su(r,Uh(t,{idToken:s}));we(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?nb(l.providerUserInfo):[],p=i2(r.providerData,h),d=r.isAnonymous,m=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),v=d?m:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new pp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(r,E)}async function r2(r){const e=qt(r);await jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i2(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function nb(r){return r.map(e=>{var{providerId:t}=e,s=Kp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(r,e){const t=await eb(r,{},async()=>{const s=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await tb(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:p,body:s};return r.emulatorConfig&&Go(r.emulatorConfig.host)&&(d.credentials="include"),JT.fetch()(h,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function a2(r,e){return Ds(r,"POST","/v2/accounts:revokeToken",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=L0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await s2(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new xo;return s&&(we(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class _r{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new pp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Su(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return e2(this,e)}reload(){return r2(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await jh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await Su(this,JC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,p,d,m,v;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,I=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,x=(h=t.photoURL)!==null&&h!==void 0?h:void 0,P=(p=t.tenantId)!==null&&p!==void 0?p:void 0,M=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,Y=(m=t.createdAt)!==null&&m!==void 0?m:void 0,ee=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:$,emailVerified:oe,isAnonymous:le,providerData:ve,stsTokenManager:V}=t;we($&&V,e,"internal-error");const C=xo.fromJSON(this.name,V);we(typeof $=="string",e,"internal-error"),ds(E,e.name),ds(S,e.name),we(typeof oe=="boolean",e,"internal-error"),we(typeof le=="boolean",e,"internal-error"),ds(I,e.name),ds(x,e.name),ds(P,e.name),ds(M,e.name),ds(Y,e.name),ds(ee,e.name);const N=new _r({uid:$,auth:e,email:S,emailVerified:oe,displayName:E,isAnonymous:le,photoURL:x,phoneNumber:I,tenantId:P,stsTokenManager:C,createdAt:Y,lastLoginAt:ee});return ve&&Array.isArray(ve)&&(N.providerData=ve.map(k=>Object.assign({},k))),M&&(N._redirectEventId=M),N}static async _fromIdTokenResponse(e,t,s=!1){const o=new xo;o.updateFromServerResponse(t);const l=new _r({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await jh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?nb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new xo;p.updateFromIdToken(s);const d=new _r({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new pp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;function xi(r){ki(r instanceof Function,"Expected a class definition");let e=U0.get(r);return e?(ki(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,U0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rb.type="NONE";const j0=rb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(r,e,t){return`firebase:${r}:${e}:${t}`}class No{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ah(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ah("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uh(this.auth,{idToken:e}).catch(()=>{});return t?_r._fromGetAccountInfoResponse(this.auth,t,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new No(xi(j0),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||xi(j0);const h=Ah(s,e.config.apiKey,e.name);let p=null;for(const m of t)try{const v=await m._get(h);if(v){let E;if(typeof v=="string"){const S=await Uh(e,{idToken:v}).catch(()=>{});if(!S)break;E=await _r._fromGetAccountInfoResponse(e,S,v)}else E=_r._fromJSON(e,v);m!==l&&(p=E),l=m;break}}catch{}const d=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new No(l,e,s):(l=d[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(h)}catch{}})),new No(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ub(e))return"Blackberry";if(cb(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(lb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ib(r=Sn()){return/firefox\//i.test(r)}function sb(r=Sn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(r=Sn()){return/crios\//i.test(r)}function ob(r=Sn()){return/iemobile/i.test(r)}function lb(r=Sn()){return/android/i.test(r)}function ub(r=Sn()){return/blackberry/i.test(r)}function cb(r=Sn()){return/webos/i.test(r)}function Zp(r=Sn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function o2(r=Sn()){var e;return Zp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function l2(){return _I()&&document.documentMode===10}function hb(r=Sn()){return Zp(r)||lb(r)||cb(r)||ub(r)||/windows phone/i.test(r)||ob(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r,e=[]){let t;switch(r){case"Browser":t=z0(Sn());break;case"Worker":t=`${z0(Sn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,p)=>{try{const d=e(l);h(d)}catch(d){p(d)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(r,e={}){return Ds(r,"GET","/v2/passwordPolicy",Ns(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=6;class f2{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:h2,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,p;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(s=d.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsLowercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNumericCharacter)!==null&&h!==void 0?h:!0),d.isValid&&(d.isValid=(p=d.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),d}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B0(this),this.idTokenSubscription=new B0(this),this.beforeStateQueue=new u2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xi(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uh(this,{idToken:e}),s=await _r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Kn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,d=await this.tryRedirectSignIn(e);(!h||h===p)&&(d!=null&&d.user)&&(o=d.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Di(this));const t=e?qt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c2(this),t=new f2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wa("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await a2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xi(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,s,o);return()=>{h=!0,d()}}else{const d=e.addObserver(t);return()=>{h=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&BC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Os(r){return qt(r)}class B0{constructor(e){this.auth=e,this.observer=null,this.addObserver=RI(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m2(r){uf=r}function db(r){return uf.loadJS(r)}function p2(){return uf.recaptchaEnterpriseScript}function g2(){return uf.gapiScript}function y2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class v2{constructor(){this.enterprise=new _2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const E2="recaptcha-enterprise",mb="NO_RECAPTCHA";class T2{constructor(e){this.type=E2,this.auth=Os(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{ZC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const m=new WC(d);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,h(m.siteKey)}}).catch(d=>{p(d)})})}function o(l,h,p){const d=window.grecaptcha;V0(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(m=>{h(m)}).catch(()=>{h(mb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new v2().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(p=>{if(!t&&V0(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let d=p2();d.length!==0&&(d+=p),db(d).then(()=>{o(p,l,h)}).catch(m=>{h(m)})}}).catch(p=>{h(p)})})}}async function q0(r,e,t,s=!1,o=!1){const l=new T2(r);let h;if(o)h=mb;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const d=p.phoneEnrollmentInfo.phoneNumber,m=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const d=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function gp(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await q0(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await q0(r,e,t,t==="getOobCode");return s(r,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(r,e){const t=Aa(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ss(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function S2(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(xi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function w2(r,e,t){const s=Os(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=pb(e),{host:h,port:p}=A2(e),d=p===null?"":`:${p}`,m={url:`${l}//${h}${d}/`},v=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Ss(m,s.config.emulator)&&Ss(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Go(h)?(zT(`${l}//${h}${d}`),BT("Auth",!0)):R2()}function pb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function A2(r){const e=pb(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:H0(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:H0(h)}}}function H0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function R2(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,t){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}async function I2(r,e){return Ds(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(r,e){return Uu(r,"POST","/v1/accounts:signInWithPassword",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(r,e){return Uu(r,"POST","/v1/accounts:signInWithEmailLink",Ns(r,e))}async function N2(r,e){return Uu(r,"POST","/v1/accounts:signInWithEmailLink",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Jp{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new wu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new wu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(e,t,"signInWithPassword",C2);case"emailLink":return x2(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(e,s,"signUpPassword",I2);case"emailLink":return N2(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(r,e){return Uu(r,"POST","/v1/accounts:signInWithIdp",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="http://localhost";class ya extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Kp(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ya(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Do(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Do(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Do(e,t)}buildRequest(){const e={requestUri:D2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M2(r){const e=lu(uu(r)).link,t=e?lu(uu(e)).deep_link_id:null,s=lu(uu(r)).deep_link_id;return(s?lu(uu(s)).link:null)||s||t||e||r}class eg{constructor(e){var t,s,o,l,h,p;const d=lu(uu(e)),m=(t=d.apiKey)!==null&&t!==void 0?t:null,v=(s=d.oobCode)!==null&&s!==void 0?s:null,E=O2((o=d.mode)!==null&&o!==void 0?o:null);we(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=d.lang)!==null&&h!==void 0?h:null,this.tenantId=(p=d.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=M2(e);try{return new eg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=eg.parseLink(t);return we(s,"argument-error"),wu._fromEmailAndCode(e,s.code,s.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends tg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ju{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ya._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ri.credential(t,s)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends ju{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ju{constructor(){super("twitter.com")}static credential(e,t){return ya._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ps.credential(t,s)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(r,e){return Uu(r,"POST","/v1/accounts:signUp",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await _r._fromIdTokenResponse(e,s,o),h=F0(s);return new va({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=F0(s);return new va({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function F0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Ir{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new zh(e,t,s,o)}}function gb(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(r,l,e,s):l})}async function k2(r,e,t=!1){const s=await Su(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return va._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(r,e,t=!1){const{auth:s}=r;if(Kn(s.app))return Promise.reject(Di(s));const o="reauthenticate";try{const l=await Su(r,gb(s,o,e,r),t);we(l.idToken,s,"internal-error");const h=Wp(l.idToken);we(h,s,"internal-error");const{sub:p}=h;return we(r.uid===p,s,"user-mismatch"),va._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&dr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(r,e,t=!1){if(Kn(r.app))return Promise.reject(Di(r));const s="signIn",o=await gb(r,s,e),l=await va._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function L2(r,e){return yb(Os(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(r){const e=Os(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function U2(r,e,t){if(Kn(r.app))return Promise.reject(Di(r));const s=Os(r),h=await gp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P2).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&vb(r),d}),p=await va._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(p.user),p}function j2(r,e,t){return Kn(r.app)?Promise.reject(Di(r)):L2(qt(r),Ko.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&vb(r),s})}function z2(r,e,t,s){return qt(r).onIdTokenChanged(e,t,s)}function B2(r,e,t){return qt(r).beforeAuthStateChanged(e,t)}function q2(r,e,t,s){return qt(r).onAuthStateChanged(e,t,s)}function cf(r){return qt(r).signOut()}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=1e3,F2=10;class Eb extends _b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,d)=>{this.notifyListeners(h,d)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);l2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,F2):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},H2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eb.type="LOCAL";const G2=Eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends _b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tb.type="SESSION";const bb=Tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new hf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(h).map(async m=>m(t.origin,l)),d=await $2(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,d)=>{const m=ng("",20);o.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(v),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return window}function Q2(r){Kr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return typeof Kr().WorkerGlobalScope<"u"&&typeof Kr().importScripts=="function"}async function Y2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function W2(){return Sb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="firebaseLocalStorageDb",Z2=1,qh="firebaseLocalStorage",Ab="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ff(r,e){return r.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function J2(){const r=indexedDB.deleteDatabase(wb);return new zu(r).toPromise()}function yp(){const r=indexedDB.open(wb,Z2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(qh,{keyPath:Ab})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(qh)?e(s):(s.close(),await J2(),e(await yp()))})})}async function G0(r,e,t){const s=ff(r,!0).put({[Ab]:e,value:t});return new zu(s).toPromise()}async function ex(r,e){const t=ff(r,!1).get(e),s=await new zu(t).toPromise();return s===void 0?null:s.value}function $0(r,e){const t=ff(r,!0).delete(e);return new zu(t).toPromise()}const tx=800,nx=3;class Rb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>nx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hf._getInstance(W2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Y2(),!this.activeServiceWorker)return;this.sender=new K2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await G0(e,Bh,"1"),await $0(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>G0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ex(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ff(o,!1).getAll();return new zu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rb.type="LOCAL";const rx=Rb;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r,e){return e?xi(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Do(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ix(r){return yb(r.auth,new rg(r),r.bypassAuthState)}function sx(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),V2(t,new rg(r),r.bypassAuthState)}async function ax(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),k2(t,new rg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const d={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ix;case"linkViaPopup":case"linkViaRedirect":return ax;case"reauthViaPopup":case"reauthViaRedirect":return sx;default:dr(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new Lu(2e3,1e4);async function lx(r,e,t){if(Kn(r.app))return Promise.reject(Er(r,"operation-not-supported-in-this-environment"));const s=Os(r);qC(r,e,tg);const o=Ib(s,t);return new fa(s,"signInViaPopup",e,o).executeNotNull()}class fa extends Cb{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ox.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="pendingRedirect",Rh=new Map;class cx extends Cb{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const s=await hx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hx(r,e){const t=mx(e),s=dx(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function fx(r,e){Rh.set(r._key(),e)}function dx(r){return xi(r._redirectPersistence)}function mx(r){return Ah(ux,r.config.apiKey,r.name)}async function px(r,e,t=!1){if(Kn(r.app))return Promise.reject(Di(r));const s=Os(r),o=Ib(s,e),h=await new cx(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=10*60*1e3;class yx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!xb(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gx&&this.cachedEventUids.clear(),this.cachedEventUids.has(K0(e))}saveEventToCache(e){this.cachedEventUids.add(K0(e)),this.lastProcessedEventTime=Date.now()}}function K0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function xb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(r,e={}){return Ds(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tx=/^https?/;async function bx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _x(r);for(const t of e)try{if(Sx(t))return}catch{}dr(r,"unauthorized-domain")}function Sx(r){const e=mp(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!Tx.test(t))return!1;if(Ex.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Lu(3e4,6e4);function Q0(){const r=Kr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Ax(r){return new Promise((e,t)=>{var s,o,l;function h(){Q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q0(),t(Er(r,"network-request-failed"))},timeout:wx.get()})}if(!((o=(s=Kr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Kr().gapi)===null||l===void 0)&&l.load)h();else{const p=y2("iframefcb");return Kr()[p]=()=>{gapi.load?h():t(Er(r,"network-request-failed"))},db(`${g2()}?onload=${p}`).catch(d=>t(d))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function Rx(r){return Ih=Ih||Ax(r),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Lu(5e3,15e3),Cx="__/auth/iframe",xx="emulator/auth/iframe",Nx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ox(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Xp(e,xx):`https://${r.config.authDomain}/${Cx}`,s={apiKey:e.apiKey,appName:r.name,v:$o},o=Dx.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Vu(s).slice(1)}`}async function Mx(r){const e=await Rx(r),t=Kr().gapi;return we(t,r,"internal-error"),e.open({where:document.body,url:Ox(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nx,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Er(r,"network-request-failed"),p=Kr().setTimeout(()=>{l(h)},Ix.get());function d(){Kr().clearTimeout(p),o(s)}s.ping(d).then(d,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kx=500,Vx=600,Lx="_blank",Ux="http://localhost";class Y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jx(r,e,t,s=kx,o=Vx){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const d=Object.assign(Object.assign({},Px),{width:s.toString(),height:o.toString(),top:l,left:h}),m=Sn().toLowerCase();t&&(p=ab(m)?Lx:t),ib(m)&&(e=e||Ux,d.scrollbars="yes");const v=Object.entries(d).reduce((S,[I,x])=>`${S}${I}=${x},`,"");if(o2(m)&&p!=="_self")return zx(e||"",p),new Y0(null);const E=window.open(e||"",p,v);we(E,r,"popup-blocked");try{E.focus()}catch{}return new Y0(E)}function zx(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="__/auth/handler",qx="emulator/auth/handler",Hx=encodeURIComponent("fac");async function X0(r,e,t,s,o,l){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:$o,eventId:o};if(e instanceof tg){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",AI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))h[v]=E}if(e instanceof ju){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const v of Object.keys(p))p[v]===void 0&&delete p[v];const d=await r._getAppCheckToken(),m=d?`#${Hx}=${encodeURIComponent(d)}`:"";return`${Fx(r)}?${Vu(p).slice(1)}${m}`}function Fx({config:r}){return r.emulator?Xp(r,qx):`https://${r.authDomain}/${Bx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class Gx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bb,this._completeRedirectFn=px,this._overrideRedirectResult=fx}async _openPopup(e,t,s,o){var l;ki((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await X0(e,t,s,mp(),o);return jx(e,h,ng())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await X0(e,t,s,mp(),o);return Q2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ki(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Mx(e),s=new yx(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[$m];h!==void 0&&t(!!h),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hb()||sb()||Zp()}}const $x=Gx;var W0="@firebase/auth",Z0="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yx(r){Xr(new Tr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=s.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(r)},m=new d2(s,o,l,d);return S2(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xr(new Tr("auth-internal",e=>{const t=Os(e.getProvider("auth").getImmediate());return(s=>new Kx(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(W0,Z0,Qx(r)),ur(W0,Z0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=5*60,Wx=jT("authIdTokenMaxAge")||Xx;let J0=null;const Zx=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Wx)return;const o=t==null?void 0:t.token;J0!==o&&(J0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Jx(r=$p()){const e=Aa(r,"auth");if(e.isInitialized())return e.getImmediate();const t=b2(r,{popupRedirectResolver:$x,persistence:[rx,G2,bb]}),s=jT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=Zx(l.toString());B2(t,h,()=>h(t.currentUser)),z2(t,p=>h(p))}}const o=LT("auth");return o&&w2(t,`http://${o}`),t}function eN(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}m2({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Er("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",eN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yx("Browser");var tN="firebase",nN="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(tN,nN,"app");var eE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Nb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,C){function N(){}N.prototype=C.prototype,V.D=C.prototype,V.prototype=new N,V.prototype.constructor=V,V.C=function(k,L,z){for(var D=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)D[ot-2]=arguments[ot];return C.prototype[L].apply(k,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,C,N){N||(N=0);var k=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)k[L]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(L=0;16>L;++L)k[L]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=V.g[0],N=V.g[1],L=V.g[2];var z=V.g[3],D=C+(z^N&(L^z))+k[0]+3614090360&4294967295;C=N+(D<<7&4294967295|D>>>25),D=z+(L^C&(N^L))+k[1]+3905402710&4294967295,z=C+(D<<12&4294967295|D>>>20),D=L+(N^z&(C^N))+k[2]+606105819&4294967295,L=z+(D<<17&4294967295|D>>>15),D=N+(C^L&(z^C))+k[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(z^N&(L^z))+k[4]+4118548399&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(L^C&(N^L))+k[5]+1200080426&4294967295,z=C+(D<<12&4294967295|D>>>20),D=L+(N^z&(C^N))+k[6]+2821735955&4294967295,L=z+(D<<17&4294967295|D>>>15),D=N+(C^L&(z^C))+k[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(z^N&(L^z))+k[8]+1770035416&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(L^C&(N^L))+k[9]+2336552879&4294967295,z=C+(D<<12&4294967295|D>>>20),D=L+(N^z&(C^N))+k[10]+4294925233&4294967295,L=z+(D<<17&4294967295|D>>>15),D=N+(C^L&(z^C))+k[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(z^N&(L^z))+k[12]+1804603682&4294967295,C=N+(D<<7&4294967295|D>>>25),D=z+(L^C&(N^L))+k[13]+4254626195&4294967295,z=C+(D<<12&4294967295|D>>>20),D=L+(N^z&(C^N))+k[14]+2792965006&4294967295,L=z+(D<<17&4294967295|D>>>15),D=N+(C^L&(z^C))+k[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(L^z&(N^L))+k[1]+4129170786&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^L&(C^N))+k[6]+3225465664&4294967295,z=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(z^C))+k[11]+643717713&4294967295,L=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(L^z))+k[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^z&(N^L))+k[5]+3593408605&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^L&(C^N))+k[10]+38016083&4294967295,z=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(z^C))+k[15]+3634488961&4294967295,L=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(L^z))+k[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^z&(N^L))+k[9]+568446438&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^L&(C^N))+k[14]+3275163606&4294967295,z=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(z^C))+k[3]+4107603335&4294967295,L=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(L^z))+k[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^z&(N^L))+k[13]+2850285829&4294967295,C=N+(D<<5&4294967295|D>>>27),D=z+(N^L&(C^N))+k[2]+4243563512&4294967295,z=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(z^C))+k[7]+1735328473&4294967295,L=z+(D<<14&4294967295|D>>>18),D=N+(z^C&(L^z))+k[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(N^L^z)+k[5]+4294588738&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^L)+k[8]+2272392833&4294967295,z=C+(D<<11&4294967295|D>>>21),D=L+(z^C^N)+k[11]+1839030562&4294967295,L=z+(D<<16&4294967295|D>>>16),D=N+(L^z^C)+k[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^z)+k[1]+2763975236&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^L)+k[4]+1272893353&4294967295,z=C+(D<<11&4294967295|D>>>21),D=L+(z^C^N)+k[7]+4139469664&4294967295,L=z+(D<<16&4294967295|D>>>16),D=N+(L^z^C)+k[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^z)+k[13]+681279174&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^L)+k[0]+3936430074&4294967295,z=C+(D<<11&4294967295|D>>>21),D=L+(z^C^N)+k[3]+3572445317&4294967295,L=z+(D<<16&4294967295|D>>>16),D=N+(L^z^C)+k[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^z)+k[9]+3654602809&4294967295,C=N+(D<<4&4294967295|D>>>28),D=z+(C^N^L)+k[12]+3873151461&4294967295,z=C+(D<<11&4294967295|D>>>21),D=L+(z^C^N)+k[15]+530742520&4294967295,L=z+(D<<16&4294967295|D>>>16),D=N+(L^z^C)+k[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(L^(N|~z))+k[0]+4096336452&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~L))+k[7]+1126891415&4294967295,z=C+(D<<10&4294967295|D>>>22),D=L+(C^(z|~N))+k[14]+2878612391&4294967295,L=z+(D<<15&4294967295|D>>>17),D=N+(z^(L|~C))+k[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~z))+k[12]+1700485571&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~L))+k[3]+2399980690&4294967295,z=C+(D<<10&4294967295|D>>>22),D=L+(C^(z|~N))+k[10]+4293915773&4294967295,L=z+(D<<15&4294967295|D>>>17),D=N+(z^(L|~C))+k[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~z))+k[8]+1873313359&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~L))+k[15]+4264355552&4294967295,z=C+(D<<10&4294967295|D>>>22),D=L+(C^(z|~N))+k[6]+2734768916&4294967295,L=z+(D<<15&4294967295|D>>>17),D=N+(z^(L|~C))+k[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~z))+k[4]+4149444226&4294967295,C=N+(D<<6&4294967295|D>>>26),D=z+(N^(C|~L))+k[11]+3174756917&4294967295,z=C+(D<<10&4294967295|D>>>22),D=L+(C^(z|~N))+k[2]+718787259&4294967295,L=z+(D<<15&4294967295|D>>>17),D=N+(z^(L|~C))+k[9]+3951481745&4294967295,V.g[0]=V.g[0]+C&4294967295,V.g[1]=V.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,V.g[2]=V.g[2]+L&4294967295,V.g[3]=V.g[3]+z&4294967295}s.prototype.u=function(V,C){C===void 0&&(C=V.length);for(var N=C-this.blockSize,k=this.B,L=this.h,z=0;z<C;){if(L==0)for(;z<=N;)o(this,V,z),z+=this.blockSize;if(typeof V=="string"){for(;z<C;)if(k[L++]=V.charCodeAt(z++),L==this.blockSize){o(this,k),L=0;break}}else for(;z<C;)if(k[L++]=V[z++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=C},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var C=1;C<V.length-8;++C)V[C]=0;var N=8*this.o;for(C=V.length-8;C<V.length;++C)V[C]=N&255,N/=256;for(this.u(V),V=Array(16),C=N=0;4>C;++C)for(var k=0;32>k;k+=8)V[N++]=this.g[C]>>>k&255;return V};function l(V,C){var N=p;return Object.prototype.hasOwnProperty.call(N,V)?N[V]:N[V]=C(V)}function h(V,C){this.h=C;for(var N=[],k=!0,L=V.length-1;0<=L;L--){var z=V[L]|0;k&&z==C||(N[L]=z,k=!1)}this.g=N}var p={};function d(V){return-128<=V&&128>V?l(V,function(C){return new h([C|0],0>C?-1:0)}):new h([V|0],0>V?-1:0)}function m(V){if(isNaN(V)||!isFinite(V))return E;if(0>V)return M(m(-V));for(var C=[],N=1,k=0;V>=N;k++)C[k]=V/N|0,N*=4294967296;return new h(C,0)}function v(V,C){if(V.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V.charAt(0)=="-")return M(v(V.substring(1),C));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(C,8)),k=E,L=0;L<V.length;L+=8){var z=Math.min(8,V.length-L),D=parseInt(V.substring(L,L+z),C);8>z?(z=m(Math.pow(C,z)),k=k.j(z).add(m(D))):(k=k.j(N),k=k.add(m(D)))}return k}var E=d(0),S=d(1),I=d(16777216);r=h.prototype,r.m=function(){if(P(this))return-M(this).m();for(var V=0,C=1,N=0;N<this.g.length;N++){var k=this.i(N);V+=(0<=k?k:4294967296+k)*C,C*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(x(this))return"0";if(P(this))return"-"+M(this).toString(V);for(var C=m(Math.pow(V,6)),N=this,k="";;){var L=oe(N,C).g;N=Y(N,L.j(C));var z=((0<N.g.length?N.g[0]:N.h)>>>0).toString(V);if(N=L,x(N))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function x(V){if(V.h!=0)return!1;for(var C=0;C<V.g.length;C++)if(V.g[C]!=0)return!1;return!0}function P(V){return V.h==-1}r.l=function(V){return V=Y(this,V),P(V)?-1:x(V)?0:1};function M(V){for(var C=V.g.length,N=[],k=0;k<C;k++)N[k]=~V.g[k];return new h(N,~V.h).add(S)}r.abs=function(){return P(this)?M(this):this},r.add=function(V){for(var C=Math.max(this.g.length,V.g.length),N=[],k=0,L=0;L<=C;L++){var z=k+(this.i(L)&65535)+(V.i(L)&65535),D=(z>>>16)+(this.i(L)>>>16)+(V.i(L)>>>16);k=D>>>16,z&=65535,D&=65535,N[L]=D<<16|z}return new h(N,N[N.length-1]&-2147483648?-1:0)};function Y(V,C){return V.add(M(C))}r.j=function(V){if(x(this)||x(V))return E;if(P(this))return P(V)?M(this).j(M(V)):M(M(this).j(V));if(P(V))return M(this.j(M(V)));if(0>this.l(I)&&0>V.l(I))return m(this.m()*V.m());for(var C=this.g.length+V.g.length,N=[],k=0;k<2*C;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<V.g.length;L++){var z=this.i(k)>>>16,D=this.i(k)&65535,ot=V.i(L)>>>16,lt=V.i(L)&65535;N[2*k+2*L]+=D*lt,ee(N,2*k+2*L),N[2*k+2*L+1]+=z*lt,ee(N,2*k+2*L+1),N[2*k+2*L+1]+=D*ot,ee(N,2*k+2*L+1),N[2*k+2*L+2]+=z*ot,ee(N,2*k+2*L+2)}for(k=0;k<C;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=C;k<2*C;k++)N[k]=0;return new h(N,0)};function ee(V,C){for(;(V[C]&65535)!=V[C];)V[C+1]+=V[C]>>>16,V[C]&=65535,C++}function $(V,C){this.g=V,this.h=C}function oe(V,C){if(x(C))throw Error("division by zero");if(x(V))return new $(E,E);if(P(V))return C=oe(M(V),C),new $(M(C.g),M(C.h));if(P(C))return C=oe(V,M(C)),new $(M(C.g),C.h);if(30<V.g.length){if(P(V)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var N=S,k=C;0>=k.l(V);)N=le(N),k=le(k);var L=ve(N,1),z=ve(k,1);for(k=ve(k,2),N=ve(N,2);!x(k);){var D=z.add(k);0>=D.l(V)&&(L=L.add(N),z=D),k=ve(k,1),N=ve(N,1)}return C=Y(V,L.j(C)),new $(L,C)}for(L=E;0<=V.l(C);){for(N=Math.max(1,Math.floor(V.m()/C.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=m(N),D=z.j(C);P(D)||0<D.l(V);)N-=k,z=m(N),D=z.j(C);x(z)&&(z=S),L=L.add(z),V=Y(V,D)}return new $(L,V)}r.A=function(V){return oe(this,V).h},r.and=function(V){for(var C=Math.max(this.g.length,V.g.length),N=[],k=0;k<C;k++)N[k]=this.i(k)&V.i(k);return new h(N,this.h&V.h)},r.or=function(V){for(var C=Math.max(this.g.length,V.g.length),N=[],k=0;k<C;k++)N[k]=this.i(k)|V.i(k);return new h(N,this.h|V.h)},r.xor=function(V){for(var C=Math.max(this.g.length,V.g.length),N=[],k=0;k<C;k++)N[k]=this.i(k)^V.i(k);return new h(N,this.h^V.h)};function le(V){for(var C=V.g.length+1,N=[],k=0;k<C;k++)N[k]=V.i(k)<<1|V.i(k-1)>>>31;return new h(N,V.h)}function ve(V,C){var N=C>>5;C%=32;for(var k=V.g.length-N,L=[],z=0;z<k;z++)L[z]=0<C?V.i(z+N)>>>C|V.i(z+N+1)<<32-C:V.i(z+N);return new h(L,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Nb=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=v,Es=h}).apply(typeof eE<"u"?eE:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Db,cu,Ob,Ch,vp,Mb,Pb,kb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var H=c[A];if(!(H in _))break e;_=_[H]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function l(c,y){c instanceof String&&(c+="");var _=0,A=!1,H={next:function(){if(!A&&_<c.length){var Z=_++;return{value:y(Z,c[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(c){return c||function(){return l(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function d(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function v(c,y,_){return c.call.apply(c.bind,arguments)}function E(c,y,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),c.apply(y,H)}}return function(){return c.apply(y,arguments)}}function S(c,y,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function x(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,H,Z){for(var ue=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ue[qe-2]=arguments[qe];return y.prototype[H].apply(A,ue)}}function P(c){const y=c.length;if(0<y){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function M(c,y){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(d(A)){const H=c.length||0,Z=A.length||0;c.length=H+Z;for(let ue=0;ue<Z;ue++)c[H+ue]=A[ue]}else c.push(A)}}class Y{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ee(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=p.navigator;return c&&(c=c.userAgent)?c:""}function oe(c){return oe[" "](c),c}oe[" "]=function(){};var le=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ve(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function V(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function C(c){const y={};for(const _ in c)y[_]=c[_];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,y){let _,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(_ in A)c[_]=A[_];for(let Z=0;Z<N.length;Z++)_=N[Z],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function L(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function z(c){p.setTimeout(()=>{throw c},0)}function D(){var c=W;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ot{constructor(){this.h=this.g=null}add(y,_){const A=lt.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var lt=new Y(()=>new te,c=>c.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,_e=!1,W=new ot,R=()=>{const c=p.Promise.resolve(void 0);ce=()=>{c.then(q)}};var q=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(_){z(_)}var y=lt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}_e=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};p.addEventListener("test",_,y),p.removeEventListener("test",_,y)}catch{}return c}();function de(c,y){if(K.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(le){e:{try{oe(y.nodeName);var H=!0;break e}catch{}H=!1}H||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ye[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&de.aa.h.call(this)}}x(de,K);var ye={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function _t(c,y,_,A,H){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=H,this.key=++Ie,this.da=this.fa=!1}function Zt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ye(c){this.src=c,this.g={},this.h=0}Ye.prototype.add=function(c,y,_,A,H){var Z=c.toString();c=this.g[Z],c||(c=this.g[Z]=[],this.h++);var ue=Ht(c,y,A,H);return-1<ue?(y=c[ue],_||(y.fa=!1)):(y=new _t(y,this.src,Z,!!A,H),y.fa=_,c.push(y)),y};function ht(c,y){var _=y.type;if(_ in c.g){var A=c.g[_],H=Array.prototype.indexOf.call(A,y,void 0),Z;(Z=0<=H)&&Array.prototype.splice.call(A,H,1),Z&&(Zt(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Ht(c,y,_,A){for(var H=0;H<c.length;++H){var Z=c[H];if(!Z.da&&Z.listener==y&&Z.capture==!!_&&Z.ha==A)return H}return-1}var xt="closure_lm_"+(1e6*Math.random()|0),pt={};function Nt(c,y,_,A,H){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)Nt(c,y[Z],_,A,H);return null}return _=bt(_),c&&c[Qe]?c.K(y,_,m(A)?!!A.capture:!1,H):ft(c,y,_,!1,A,H)}function ft(c,y,_,A,H,Z){if(!y)throw Error("Invalid event type");var ue=m(H)?!!H.capture:!!H,qe=nt(c);if(qe||(c[xt]=qe=new Ye(c)),_=qe.add(y,_,A,ue,Z),_.proxy)return _;if(A=wn(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)he||(H=ue),H===void 0&&(H=!1),c.addEventListener(y.toString(),A,H);else if(c.attachEvent)c.attachEvent(Xe(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function wn(){function c(_){return y.call(c.src,c.listener,_)}const y=ze;return c}function Et(c,y,_,A,H){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Et(c,y[Z],_,A,H);else A=m(A)?!!A.capture:!!A,_=bt(_),c&&c[Qe]?(c=c.i,y=String(y).toString(),y in c.g&&(Z=c.g[y],_=Ht(Z,_,A,H),-1<_&&(Zt(Z[_]),Array.prototype.splice.call(Z,_,1),Z.length==0&&(delete c.g[y],c.h--)))):c&&(c=nt(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ht(y,_,A,H)),(_=-1<c?y[c]:null)&&Tt(_))}function Tt(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Qe])ht(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(Xe(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=nt(y))?(ht(_,c),_.h==0&&(_.src=null,y[xt]=null)):Zt(c)}}}function Xe(c){return c in pt?pt[c]:pt[c]="on"+c}function ze(c,y){if(c.da)c=!0;else{y=new de(y,this);var _=c.listener,A=c.ha||c.src;c.fa&&Tt(c),c=_.call(A,y)}return c}function nt(c){return c=c[xt],c instanceof Ye?c:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(c){return typeof c=="function"?c:(c[dt]||(c[dt]=function(y){return c.handleEvent(y)}),c[dt])}function fe(){J.call(this),this.i=new Ye(this),this.M=this,this.F=null}x(fe,J),fe.prototype[Qe]=!0,fe.prototype.removeEventListener=function(c,y,_,A){Et(this,c,y,_,A)};function Be(c,y){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new K(y,c);else if(y instanceof K)y.target=y.target||c;else{var H=y;y=new K(A,c),k(y,H)}if(H=!0,_)for(var Z=_.length-1;0<=Z;Z--){var ue=y.g=_[Z];H=Me(ue,A,!0,y)&&H}if(ue=y.g=c,H=Me(ue,A,!0,y)&&H,H=Me(ue,A,!1,y)&&H,_)for(Z=0;Z<_.length;Z++)ue=y.g=_[Z],H=Me(ue,A,!1,y)&&H}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],A=0;A<_.length;A++)Zt(_[A]);delete c.g[y],c.h--}}this.F=null},fe.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},fe.prototype.L=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function Me(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var H=!0,Z=0;Z<y.length;++Z){var ue=y[Z];if(ue&&!ue.da&&ue.capture==_){var qe=ue.listener,Gt=ue.ha||ue.src;ue.fa&&ht(c.i,ue),H=qe.call(Gt,A)!==!1&&H}}return H&&!A.defaultPrevented}function Le(c,y,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:p.setTimeout(c,y||0)}function Jt(c){c.g=Le(()=>{c.g=null,c.i&&(c.i=!1,Jt(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Cr extends J{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Jt(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(c){J.call(this),this.h=c,this.g={}}x(Jr,J);var ei=[];function xr(c){ve(c.g,function(y,_){this.g.hasOwnProperty(_)&&Tt(y)},c),c.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),xr(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nn=p.JSON.stringify,xa=p.JSON.parse,ks=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function Jo(){}Jo.prototype.h=null;function el(c){return c.h||(c.h=c.i())}function tl(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){K.call(this,"d")}x(ni,K);function nl(){K.call(this,"c")}x(nl,K);var Nr={},rl=null;function ji(){return rl=rl||new fe}Nr.La="serverreachability";function Na(c){K.call(this,Nr.La,c)}x(Na,K);function zi(c){const y=ji();Be(y,new Na(y))}Nr.STAT_EVENT="statevent";function Qu(c,y){K.call(this,Nr.STAT_EVENT,c),this.stat=y}x(Qu,K);function gt(c){const y=ji();Be(y,new Qu(y,c))}Nr.Ma="timingevent";function Ft(c,y){K.call(this,Nr.Ma,c),this.size=y}x(Ft,K);function kt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},y)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function il(c,y,_,A,H,Z){c.info(function(){if(c.g)if(Z)for(var ue="",qe=Z.split("&"),Gt=0;Gt<qe.length;Gt++){var He=qe[Gt].split("=");if(1<He.length){var tn=He[0];He=He[1];var $t=tn.split("_");ue=2<=$t.length&&$t[1]=="type"?ue+(tn+"="+He+"&"):ue+(tn+"=redacted&")}}else ue=null;else ue=Z;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+_+`
`+ue})}function kf(c,y,_,A,H,Z,ue){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+_+`
`+Z+" "+ue})}function Bi(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Vs(c,_)+(A?" "+A:"")})}function Yu(c,y){c.info(function(){return"TIMEOUT: "+y})}Xn.prototype.info=function(){};function Vs(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Z=H[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ue=1;ue<H.length;ue++)H[ue]=""}}}}return Nn(_)}catch{return y}}var qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dr;function Or(){}x(Or,Jo),Or.prototype.g=function(){return new XMLHttpRequest},Or.prototype.i=function(){return{}},Dr=new Or;function An(c,y,_,A){this.j=c,this.i=y,this.l=_,this.R=A||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dt}function Dt(){this.i=null,this.g="",this.h=!1}var sl={},Da={};function mr(c,y,_){c.L=1,c.v=Bs(jn(y)),c.m=_,c.P=!0,ii(c,null)}function ii(c,y){c.F=Date.now(),Ls(c),c.A=jn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),hl(_.i,"t",A),c.C=0,_=c.j.J,c.h=new Dt,c.g=hc(c.j,_?y:null,!c.m),0<c.O&&(c.M=new Cr(S(c.Y,c,c.g),c.O)),y=c.U,_=c.g,A=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(ei[0]=H.toString()),H=ei);for(var Z=0;Z<H.length;Z++){var ue=Nt(_,H[Z],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),zi(),il(c.i,c.u,c.A,c.l,c.R,c.m)}An.prototype.ca=function(c){c=c.target;const y=this.M;y&&er(c)==3?y.j():this.Y(c)},An.prototype.Y=function(c){try{if(c==this.g)e:{const $t=er(this.g);var y=this.g.Ba();const fi=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||rc(this.g)))){this.J||$t!=4||y==7||(y==8||0>=fi?zi(3):zi(2)),Hi(this);var _=this.g.Z();this.X=_;t:if(Xu(this)){var A=rc(this.g);c="";var H=A.length,Z=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Mr(this);var ue="";break t}this.h.i=new p.TextDecoder}for(y=0;y<H;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(Z&&y==H-1)});A.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=_==200,kf(this.i,this.u,this.A,this.l,this.R,$t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Gt=this.g;if((qe=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(qe)){var He=qe;break t}}He=null}if(_=He)Bi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,_);else{this.o=!1,this.s=3,gt(12),ln(this),Mr(this);break e}}if(this.P){_=!0;let un;for(;!this.J&&this.C<ue.length;)if(un=Wu(this,ue),un==Da){$t==4&&(this.s=4,gt(14),_=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(un==sl){this.s=4,gt(15),Bi(this.i,this.l,ue,"[Invalid Chunk]"),_=!1;break}else Bi(this.i,this.l,un,null),Us(this,un);if(Xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||ue.length!=0||this.h.h||(this.s=1,gt(16),_=!1),this.o=this.o&&_,!_)Bi(this.i,this.l,ue,"[Invalid Chunked Response]"),ln(this),Mr(this);else if(0<ue.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ys(tn),tn.M=!0,gt(11))}}else Bi(this.i,this.l,ue,null),Us(this,ue);$t==4&&ln(this),this.o&&!this.J&&($t==4?lc(this.j,this):(this.o=!1,Ls(this)))}else zf(this.g),_==400&&0<ue.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),ln(this),Mr(this)}}}catch{}finally{}};function Xu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Wu(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?Da:(_=Number(y.substring(_,A)),isNaN(_)?sl:(A+=1,A+_>y.length?Da:(y=y.slice(A,A+_),c.C=A+_,y)))}An.prototype.cancel=function(){this.J=!0,ln(this)};function Ls(c){c.S=Date.now()+c.I,Zu(c,c.I)}function Zu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=kt(S(c.ba,c),y)}function Hi(c){c.B&&(p.clearTimeout(c.B),c.B=null)}An.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Yu(this.i,this.A),this.L!=2&&(zi(),gt(17)),ln(this),this.s=2,Mr(this)):Zu(this,this.S-c)};function Mr(c){c.j.G==0||c.J||lc(c.j,c)}function ln(c){Hi(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,xr(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Us(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||al(_.h,c))){if(!c.K&&al(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ha(_),Ba(_);else break e;gl(_),gt(18)}}else _.za=H[1],0<_.za-_.T&&37500>H[2]&&_.F&&_.v==0&&!_.C&&(_.C=kt(S(_.Za,_),6e3));if(1>=Ma(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else hi(_,11)}else if((c.K||_.g==c)&&Ha(_),!ee(y))for(H=_.Da.g.parse(y),y=0;y<H.length;y++){let He=H[y];if(_.T=He[0],He=He[1],_.G==2)if(He[0]=="c"){_.K=He[1],_.ia=He[2];const tn=He[3];tn!=null&&(_.la=tn,_.j.info("VER="+_.la));const $t=He[4];$t!=null&&(_.Aa=$t,_.j.info("SVER="+_.Aa));const fi=He[5];fi!=null&&typeof fi=="number"&&0<fi&&(A=1.5*fi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const un=c.g;if(un){const zr=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zr){var Z=A.h;Z.g||zr.indexOf("spdy")==-1&&zr.indexOf("quic")==-1&&zr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Pa(Z,Z.h),Z.h=null))}if(A.D){const vl=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(A.ya=vl,rt(A.I,A.D,vl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var ue=c;if(A.qa=cc(A,A.J?A.ia:null,A.W),ue.K){Rn(A.h,ue);var qe=ue,Gt=A.L;Gt&&(qe.I=Gt),qe.B&&(Hi(qe),Ls(qe)),A.g=ue}else ac(A);0<_.i.length&&qa(_)}else He[0]!="stop"&&He[0]!="close"||hi(_,7);else _.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?hi(_,7):ml(_):He[0]!="noop"&&_.l&&_.l.ta(He),_.v=0)}}zi(4)}catch{}}var Ju=class{constructor(c,y){this.g=c,this.map=y}};function si(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ma(c){return c.h?1:c.g?c.g.size:0}function al(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Pa(c,y){c.g?c.g.add(y):c.h=y}function Rn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}si.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ol(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return P(c.i)}function Vf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(d(c)){for(var y=[],_=c.length,A=0;A<_;A++)y.push(c[A]);return y}y=[],_=0;for(A in c)y[_++]=c[A];return y}function ka(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(d(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const A in c)y[_++]=A;return y}}}function ll(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(d(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=ka(c),A=Vf(c),H=A.length,Z=0;Z<H;Z++)y.call(void 0,A[Z],_&&_[Z],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lf(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),H=null;if(0<=A){var Z=c[_].substring(0,A);H=c[_].substring(A+1)}else Z=c[_];y(Z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Vt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vt){this.h=c.h,zs(this,c.j),this.o=c.o,this.g=c.g,Fi(this,c.s),this.l=c.l;var y=c.i,_=new oi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),ai(this,_),this.m=c.m}else c&&(y=String(c).match(js))?(this.h=!1,zs(this,y[1]||"",!0),this.o=Wn(y[2]||""),this.g=Wn(y[3]||"",!0),Fi(this,y[4]),this.l=Wn(y[5]||"",!0),ai(this,y[6]||"",!0),this.m=Wn(y[7]||"")):(this.h=!1,this.i=new oi(null,this.h))}Vt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(qs(y,ul,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(qs(y,ul,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(qs(_,_.charAt(0)=="/"?Uf:cl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",qs(_,Va)),c.join("")};function jn(c){return new Vt(c)}function zs(c,y,_){c.j=_?Wn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Fi(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function ai(c,y,_){y instanceof oi?(c.i=y,tc(c.i,c.h)):(_||(y=qs(y,jf)),c.i=new oi(y,c.h))}function rt(c,y,_){c.i.set(y,_)}function Bs(c){return rt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Wn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qs(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,ec),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ec(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ul=/[#\/\?@]/g,cl=/[#\?:]/g,Uf=/[#\?]/g,jf=/[#\?@]/g,Va=/#/g;function oi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Zn(c){c.g||(c.g=new Map,c.h=0,c.i&&Lf(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=oi.prototype,r.add=function(c,y){Zn(this),this.i=null,c=Pr(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function li(c,y){Zn(c),y=Pr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ui(c,y){return Zn(c),y=Pr(c,y),c.g.has(y)}r.forEach=function(c,y){Zn(this),this.g.forEach(function(_,A){_.forEach(function(H){c.call(y,H,A,this)},this)},this)},r.na=function(){Zn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let A=0;A<y.length;A++){const H=c[A];for(let Z=0;Z<H.length;Z++)_.push(y[A])}return _},r.V=function(c){Zn(this);let y=[];if(typeof c=="string")ui(this,c)&&(y=y.concat(this.g.get(Pr(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},r.set=function(c,y){return Zn(this),this.i=null,c=Pr(this,c),ui(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function hl(c,y,_){li(c,y),0<_.length&&(c.i=null,c.g.set(Pr(c,y),P(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var A=y[_];const Z=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var H=Z;ue[A]!==""&&(H+="="+encodeURIComponent(String(ue[A]))),c.push(H)}}return this.i=c.join("&")};function Pr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function tc(c,y){y&&!c.j&&(Zn(c),c.i=null,c.g.forEach(function(_,A){var H=A.toLowerCase();A!=H&&(li(this,A),hl(this,H,_))},c)),c.j=y}function Hs(c,y){const _=new Xn;if(p.Image){const A=new Image;A.onload=I(Jn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=I(Jn,_,"TestLoadImage: error",!1,y,A),A.onabort=I(Jn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=I(Jn,_,"TestLoadImage: timeout",!1,y,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function pr(c,y){const _=new Xn,A=new AbortController,H=setTimeout(()=>{A.abort(),Jn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Z=>{clearTimeout(H),Z.ok?Jn(_,"TestPingServer: ok",!0,y):Jn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Jn(_,"TestPingServer: error",!1,y)})}function Jn(c,y,_,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(_)}catch{}}function Fs(){this.g=new ks}function kr(c,y,_){const A=_||"";try{ll(c,function(H,Z){let ue=H;m(H)&&(ue=Nn(H)),y.push(A+Z+"="+encodeURIComponent(ue))})}catch(H){throw y.push(A+"type="+encodeURIComponent("_badmap")),H}}function Gi(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Gi,Jo),Gi.prototype.g=function(){return new ci(this.l,this.j)},Gi.prototype.i=function(c){return function(){return c}}({});function ci(c,y){fe.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ci,fe),r=ci.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Lr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||p).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Vr(this):Lr(this),this.readyState==3&&fl(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Vr(this))},r.Qa=function(c){this.g&&(this.response=c,Vr(this))},r.ga=function(){this.g&&Vr(this)};function Vr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Lr(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function Lr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dl(c){let y="";return ve(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function en(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=dl(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):rt(c,y,_))}function Ze(c){fe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ze,fe);var La=/^https?$/i,Gs=["POST","PUT"];r=Ze.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dr.g(),this.v=this.o?el(this.o):el(Dr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Z){nc(this,Z);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)_.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())_.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=p.FormData&&c instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Gs,y,void 0))||A||H||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ue]of _)this.g.setRequestHeader(Z,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(c),this.u=!1}catch(Z){nc(this,Z)}};function nc(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Ua(c),Ur(c)}function Ua(c){c.A||(c.A=!0,Be(c,"complete"),Be(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Be(this,"complete"),Be(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Ze.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ja(this):this.bb())},r.bb=function(){ja(this)};function ja(c){if(c.h&&typeof h<"u"&&(!c.v[1]||er(c)!=4||c.Z()!=2)){if(c.u&&er(c)==4)Le(c.Ea,0,c);else if(Be(c,"readystatechange"),er(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=ue===0){var H=String(c.D).match(js)[1]||null;!H&&p.self&&p.self.location&&(H=p.self.location.protocol.slice(0,-1)),A=!La.test(H?H.toLowerCase():"")}_=A}if(_)Be(c,"complete"),Be(c,"success");else{c.m=6;try{var Z=2<er(c)?c.g.statusText:""}catch{Z=""}c.l=Z+" ["+c.Z()+"]",Ua(c)}}finally{Ur(c)}}}}function Ur(c,y){if(c.g){$s(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Be(c,"ready");try{_.onreadystatechange=A}catch{}}}function $s(c){c.I&&(p.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function er(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),xa(y)}};function rc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zf(c){const y={};c=(c.g&&2<=er(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ee(c[A]))continue;var _=L(c[A]);const H=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=y[H]||[];y[H]=Z,Z.push(_)}V(y,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function za(c){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,c),this.cb=Ks("retryDelaySeedMs",1e4,c),this.Wa=Ks("forwardChannelMaxRetries",2,c),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new si(c&&c.concurrentRequestLimit),this.Da=new Fs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=za.prototype,r.la=8,r.G=1,r.connect=function(c,y,_,A){gt(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=cc(this,null,this.W),qa(this)};function ml(c){if(ic(c),c.G==3){var y=c.U++,_=jn(c.I);if(rt(_,"SID",c.K),rt(_,"RID",y),rt(_,"TYPE","terminate"),Qs(c,_),y=new An(c,c.j,y),y.L=2,y.v=Bs(jn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=y.v,_=!0),_||(y.g=hc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ls(y)}uc(c)}function Ba(c){c.g&&(Ys(c),c.g.cancel(),c.g=null)}function ic(c){Ba(c),c.u&&(p.clearTimeout(c.u),c.u=null),Ha(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&p.clearTimeout(c.s),c.s=null)}function qa(c){if(!Oa(c.h)&&!c.s){c.s=!0;var y=c.Ga;ce||R(),_e||(ce(),_e=!0),W.add(y,c),c.B=0}}function Bf(c,y){return Ma(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=kt(S(c.Ga,c,y),yl(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new An(this,this.j,c);let Z=this.o;if(this.S&&(Z?(Z=C(Z),k(Z,this.S)):Z=this.S),this.m!==null||this.O||(H.H=Z,Z=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=sc(this,H,y),_=jn(this.I),rt(_,"RID",c),rt(_,"CVER",22),this.D&&rt(_,"X-HTTP-Session-Id",this.D),Qs(this,_),Z&&(this.O?y="headers="+encodeURIComponent(String(dl(Z)))+"&"+y:this.m&&en(_,this.m,Z)),Pa(this.h,H),this.Ua&&rt(_,"TYPE","init"),this.P?(rt(_,"$req",y),rt(_,"SID","null"),H.T=!0,mr(H,_,null)):mr(H,_,y),this.G=2}}else this.G==3&&(c?pl(this,c):this.i.length==0||Oa(this.h)||pl(this))};function pl(c,y){var _;y?_=y.l:_=c.U++;const A=jn(c.I);rt(A,"SID",c.K),rt(A,"RID",_),rt(A,"AID",c.T),Qs(c,A),c.m&&c.o&&en(A,c.m,c.o),_=new An(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=sc(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pa(c.h,_),mr(_,A,y)}function Qs(c,y){c.H&&ve(c.H,function(_,A){rt(y,A,_)}),c.l&&ll({},function(_,A){rt(y,A,_)})}function sc(c,y,_){_=Math.min(c.i.length,_);var A=c.l?S(c.l.Na,c.l,c):null;e:{var H=c.i;let Z=-1;for(;;){const ue=["count="+_];Z==-1?0<_?(Z=H[0].g,ue.push("ofs="+Z)):Z=0:ue.push("ofs="+Z);let qe=!0;for(let Gt=0;Gt<_;Gt++){let He=H[Gt].g;const tn=H[Gt].map;if(He-=Z,0>He)Z=Math.max(0,H[Gt].g-100),qe=!1;else try{kr(tn,ue,"req"+He+"_")}catch{A&&A(tn)}}if(qe){A=ue.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,A}function ac(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ce||R(),_e||(ce(),_e=!0),W.add(y,c),c.v=0}}function gl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=kt(S(c.Fa,c),yl(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,oc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=kt(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Ba(this),oc(this))};function Ys(c){c.A!=null&&(p.clearTimeout(c.A),c.A=null)}function oc(c){c.g=new An(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=jn(c.qa);rt(y,"RID","rpc"),rt(y,"SID",c.K),rt(y,"AID",c.T),rt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&rt(y,"TO",c.ja),rt(y,"TYPE","xmlhttp"),Qs(c,y),c.m&&c.o&&en(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Bs(jn(y)),_.m=null,_.P=!0,ii(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Ba(this),gl(this),gt(19))};function Ha(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function lc(c,y){var _=null;if(c.g==y){Ha(c),Ys(c),c.g=null;var A=2}else if(al(c.h,y))_=y.D,Rn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var H=c.B;A=ji(),Be(A,new Ft(A,_)),qa(c)}else ac(c);else if(H=y.s,H==3||H==0&&0<y.X||!(A==1&&Bf(c,y)||A==2&&gl(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),H){case 1:hi(c,5);break;case 4:hi(c,10);break;case 3:hi(c,6);break;default:hi(c,2)}}}function yl(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function hi(c,y){if(c.j.info("Error code "+y),y==2){var _=S(c.fb,c),A=c.Xa;const H=!A;A=new Vt(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||zs(A,"https"),Bs(A),H?Hs(A.toString(),_):pr(A.toString(),_)}else gt(2);c.G=0,c.l&&c.l.sa(y),uc(c),ic(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function uc(c){if(c.G=0,c.ka=[],c.l){const y=ol(c.h);(y.length!=0||c.i.length!=0)&&(M(c.ka,y),M(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function cc(c,y,_){var A=_ instanceof Vt?jn(_):new Vt(_);if(A.g!="")y&&(A.g=y+"."+A.g),Fi(A,A.s);else{var H=p.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;var Z=new Vt(null);A&&zs(Z,A),y&&(Z.g=y),H&&Fi(Z,H),_&&(Z.l=_),A=Z}return _=c.D,y=c.ya,_&&y&&rt(A,_,y),rt(A,"VER",c.la),Qs(c,A),A}function hc(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Ze(new Gi({eb:_})):new Ze(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function fc(){}r=fc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Fa(){}Fa.prototype.g=function(c,y){return new In(c,y)};function In(c,y){fe.call(this),this.g=new za(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ee(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ee(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new jr(this)}x(In,fe),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){ml(this.g)},In.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Nn(c),c=_);y.i.push(new Ju(y.Ya++,c)),y.G==3&&qa(y)},In.prototype.N=function(){this.g.l=null,delete this.j,ml(this.g),delete this.g,In.aa.N.call(this)};function dc(c){ni.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}x(dc,ni);function mc(){nl.call(this),this.status=1}x(mc,nl);function jr(c){this.g=c}x(jr,fc),jr.prototype.ua=function(){Be(this.g,"a")},jr.prototype.ta=function(c){Be(this.g,new dc(c))},jr.prototype.sa=function(c){Be(this.g,new mc)},jr.prototype.ra=function(){Be(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,kb=function(){return new Fa},Pb=function(){return ji()},Mb=Nr,vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,Ch=qi,ri.COMPLETE="complete",Ob=ri,tl.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",fe.prototype.listen=fe.prototype.K,cu=tl,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Db=Ze}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const tE="@firebase/firestore",nE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new lf("@firebase/firestore");function wo(){return _a.logLevel}function me(r,...e){if(_a.logLevel<=Ue.DEBUG){const t=e.map(ig);_a.debug(`Firestore (${Qo}): ${r}`,...t)}}function Vi(r,...e){if(_a.logLevel<=Ue.ERROR){const t=e.map(ig);_a.error(`Firestore (${Qo}): ${r}`,...t)}}function Po(r,...e){if(_a.logLevel<=Ue.WARN){const t=e.map(ig);_a.warn(`Firestore (${Qo}): ${r}`,...t)}}function ig(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Vb(r,s,t)}function Vb(r,e,t){let s=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Vi(s),new Error(s)}function Je(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Vb(e,o,s)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}}class iN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sN{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let s=this.i;const o=d=>this.i!==s?(s=this.i,t(d)):Promise.resolve();let l=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Oi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const d=l;e.enqueueRetryable(async()=>{await d.promise,await o(this.currentUser)})},p=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(d=>p(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?p(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Oi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new Lb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class aN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new aN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=uN(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Oe(r,e){return r<e?-1:r>e?1:0}function _p(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Oe(s,o);{const l=Ub(),h=cN(l.encode(iE(r,t)),l.encode(iE(e,t)));return h!==0?h:Oe(s,o)}}t+=s>65535?2:1}return Oe(r.length,e.length)}function iE(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function cN(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Oe(r[t],e[t]);return Oe(r.length,e.length)}function ko(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=-62135596800,aE=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*aE);return new Xt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sE)throw new pe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aE}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-sE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Xt(0,0))}static max(){return new Ce(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="__name__";class $r{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=$r.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const s=$r.isNumericId(e),o=$r.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?$r.extractNumericId(e).compare($r.extractNumericId(t)):_p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class mt extends $r{construct(e,t,s){return new mt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new mt(t)}static emptyPath(){return new mt([])}}const hN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends $r{construct(e,t,s){return new pn(e,t,s)}static isValidIdentifier(e){return hN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oE}static keyField(){return new pn([oE])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new pe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new pe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[o+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(s+=p,o++):(l(),o++)}if(l(),h)throw new pe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(mt.fromString(e))}static fromName(e){return new Te(mt.fromString(e).popFirst(5))}static empty(){return new Te(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;function fN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new Xt(t+1,0):new Xt(t,s));return new ws(o,Te.empty(),e)}function dN(r){return new ws(r.readTime,r.key,Au)}class ws{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ws(Ce.min(),Te.empty(),Au)}static max(){return new ws(Ce.max(),Te.empty(),Au)}}function mN(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(r.documentKey,e.documentKey),t!==0?t:Oe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==pN)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,s)=>{t(e)})}static reject(e){return new se((t,s)=>{s(e)})}static waitFor(e){return new se((t,s)=>{let o=0,l=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++l,h&&l===o&&t()},d=>s(d))}),h=!0,l===o&&t()})}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next(o=>o?se.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new se((s,o)=>{const l=e.length,h=new Array(l);let p=0;for(let d=0;d<l;d++){const m=d;t(e[m]).next(v=>{h[m]=v,++p,p===l&&s(h)},v=>o(v))}})}static doWhile(e,t){return new se((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function yN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}df.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function mf(r){return r==null}function Hh(r){return r===0&&1/r==-1/0}function vN(r){return typeof r=="number"&&Number.isInteger(r)&&!Hh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="";function _N(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=lE(e)),e=EN(r.get(t),e);return lE(e)}function EN(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case zb:t+="";break;default:t+=l}}return t}function lE(r){return r+zb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ms(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Bb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??mn.RED,this.left=o??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new mn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return mn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cE(this.data.getIterator())}getIteratorFrom(e){return new cE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wt(this.comparator);return t.data=e,t}}class cE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Qn([])}unionWith(e){let t=new Wt(pn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new qb("Invalid base64 string: "+l):l}}(e);return new gn(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const TN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(r){if(Je(!!r,39018),typeof r=="string"){let e=0;const t=TN.exec(r);if(Je(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(r.seconds),nanos:Pt(r.nanos)}}function Pt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Rs(r){return typeof r=="string"?gn.fromBase64String(r):gn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="server_timestamp",Fb="__type__",Gb="__previous_value__",$b="__local_write_time__";function ag(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fb])===null||t===void 0?void 0:t.stringValue)===Hb}function pf(r){const e=r.mapValue.fields[Gb];return ag(e)?pf(e):e}function Ru(r){const e=As(r.mapValue.fields[$b].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,s,o,l,h,p,d,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=v}}const Fh="(default)";class Iu{constructor(e,t){this.projectId=e,this.database=t||Fh}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Fh}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="__type__",SN="__max__",_h={mapValue:{}},Qb="__vector__",Gh="value";function Is(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ag(r)?4:AN(r)?9007199254740991:wN(r)?10:11:Ae(28295,{value:r})}function Wr(r,e){if(r===e)return!0;const t=Is(r);if(t!==Is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ru(r).isEqual(Ru(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=As(o.timestampValue),p=As(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Rs(o.bytesValue).isEqual(Rs(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return Pt(o.geoPointValue.latitude)===Pt(l.geoPointValue.latitude)&&Pt(o.geoPointValue.longitude)===Pt(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Pt(o.integerValue)===Pt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Pt(o.doubleValue),p=Pt(l.doubleValue);return h===p?Hh(h)===Hh(p):isNaN(h)&&isNaN(p)}return!1}(r,e);case 9:return ko(r.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(uE(h)!==uE(p))return!1;for(const d in h)if(h.hasOwnProperty(d)&&(p[d]===void 0||!Wr(h[d],p[d])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function Cu(r,e){return(r.values||[]).find(t=>Wr(t,e))!==void 0}function Vo(r,e){if(r===e)return 0;const t=Is(r),s=Is(e);if(t!==s)return Oe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(r.booleanValue,e.booleanValue);case 2:return function(l,h){const p=Pt(l.integerValue||l.doubleValue),d=Pt(h.integerValue||h.doubleValue);return p<d?-1:p>d?1:p===d?0:isNaN(p)?isNaN(d)?0:-1:1}(r,e);case 3:return hE(r.timestampValue,e.timestampValue);case 4:return hE(Ru(r),Ru(e));case 5:return _p(r.stringValue,e.stringValue);case 6:return function(l,h){const p=Rs(l),d=Rs(h);return p.compareTo(d)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const p=l.split("/"),d=h.split("/");for(let m=0;m<p.length&&m<d.length;m++){const v=Oe(p[m],d[m]);if(v!==0)return v}return Oe(p.length,d.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const p=Oe(Pt(l.latitude),Pt(h.latitude));return p!==0?p:Oe(Pt(l.longitude),Pt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return fE(r.arrayValue,e.arrayValue);case 10:return function(l,h){var p,d,m,v;const E=l.fields||{},S=h.fields||{},I=(p=E[Gh])===null||p===void 0?void 0:p.arrayValue,x=(d=S[Gh])===null||d===void 0?void 0:d.arrayValue,P=Oe(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((v=x==null?void 0:x.values)===null||v===void 0?void 0:v.length)||0);return P!==0?P:fE(I,x)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===_h.mapValue&&h===_h.mapValue)return 0;if(l===_h.mapValue)return 1;if(h===_h.mapValue)return-1;const p=l.fields||{},d=Object.keys(p),m=h.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let E=0;E<d.length&&E<v.length;++E){const S=_p(d[E],v[E]);if(S!==0)return S;const I=Vo(p[d[E]],m[v[E]]);if(I!==0)return I}return Oe(d.length,v.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{Pe:t})}}function hE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Oe(r,e);const t=As(r),s=As(e),o=Oe(t.seconds,s.seconds);return o!==0?o:Oe(t.nanos,s.nanos)}function fE(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Vo(t[o],s[o]);if(l)return l}return Oe(t.length,s.length)}function Lo(r){return Ep(r)}function Ep(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=As(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Rs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Te.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Ep(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Ep(t.fields[h])}`;return o+"}"}(r.mapValue):Ae(61005,{value:r})}function xh(r){switch(Is(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(r);return e?16+xh(e):16;case 5:return 2*r.stringValue.length;case 6:return Rs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+xh(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ms(s.fields,(l,h)=>{o+=l.length+xh(h)}),o}(r.mapValue);default:throw Ae(13486,{value:r})}}function dE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Tp(r){return!!r&&"integerValue"in r}function og(r){return!!r&&"arrayValue"in r}function mE(r){return!!r&&"nullValue"in r}function pE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nh(r){return!!r&&"mapValue"in r}function wN(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kb])===null||t===void 0?void 0:t.stringValue)===Qb}function gu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ms(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=gu(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function AN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===SN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(t)}setAll(e){let t=pn.emptyPath(),s={},o=[];e.forEach((h,p)=>{if(!t.isImmediateParentOf(p)){const d=this.getFieldsMap(t);this.applyChanges(d,s,o),s={},o=[],t=p.popLast()}h?s[p.lastSegment()]=gu(h):o.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ms(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new Vn(gu(this.value))}}function Yb(r){const e=[];return Ms(r.fields,(t,s)=>{const o=new pn([t]);if(Nh(s)){const l=Yb(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,s,o,l,h,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Tn(e,0,Ce.min(),Ce.min(),Ce.min(),Vn.empty(),0)}static newFoundDocument(e,t,s,o){return new Tn(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ce.min(),Ce.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ce.min(),Ce.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.position=e,this.inclusive=t}}function gE(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(h.referenceValue),t.key):s=Vo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function yE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t="asc"){this.field=e,this.dir=t}}function RN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{}class Bt extends Xb{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new CN(e,t,s):t==="array-contains"?new DN(e,s):t==="in"?new ON(e,s):t==="not-in"?new MN(e,s):t==="array-contains-any"?new PN(e,s):new Bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new xN(e,s):new NN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Is(this.value)===Is(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends Xb{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new br(e,t)}matches(e){return Wb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Wb(r){return r.op==="and"}function Zb(r){return IN(r)&&Wb(r)}function IN(r){for(const e of r.filters)if(e instanceof br)return!1;return!0}function bp(r){if(r instanceof Bt)return r.field.canonicalString()+r.op.toString()+Lo(r.value);if(Zb(r))return r.filters.map(e=>bp(e)).join(",");{const e=r.filters.map(t=>bp(t)).join(",");return`${r.op}(${e})`}}function Jb(r,e){return r instanceof Bt?function(s,o){return o instanceof Bt&&s.op===o.op&&s.field.isEqual(o.field)&&Wr(s.value,o.value)}(r,e):r instanceof br?function(s,o){return o instanceof br&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,p)=>l&&Jb(h,o.filters[p]),!0):!1}(r,e):void Ae(19439)}function eS(r){return r instanceof Bt?function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`}(r):r instanceof br?function(t){return t.op.toString()+" {"+t.getFilters().map(eS).join(" ,")+"}"}(r):"Filter"}class CN extends Bt{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class xN extends Bt{constructor(e,t){super(e,"in",t),this.keys=tS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NN extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=tS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tS(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Te.fromName(s.referenceValue))}class DN extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return og(t)&&Cu(t.arrayValue,this.value)}}class ON extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class MN extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cu(this.value.arrayValue,t)}}class PN extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!og(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Cu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t=null,s=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Ie=null}}function vE(r,e=null,t=[],s=[],o=null,l=null,h=null){return new kN(r,e,t,s,o,l,h)}function lg(r){const e=xe(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>bp(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),mf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Lo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Lo(s)).join(",")),e.Ie=t}return e.Ie}function ug(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!RN(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Jb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!yE(r.startAt,e.startAt)&&yE(r.endAt,e.endAt)}function Sp(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t=null,s=[],o=[],l=null,h="F",p=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function VN(r,e,t,s,o,l,h,p){return new Bu(r,e,t,s,o,l,h,p)}function cg(r){return new Bu(r)}function _E(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nS(r){return r.collectionGroup!==null}function yu(r){const e=xe(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Wt(pn.comparator);return h.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(p=p.add(m.field))})}),p})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Kh(l,s))}),t.has(pn.keyField().canonicalString())||e.Ee.push(new Kh(pn.keyField(),s))}return e.Ee}function Qr(r){const e=xe(r);return e.de||(e.de=LN(e,yu(r))),e.de}function LN(r,e){if(r.limitType==="F")return vE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Kh(o.field,l)});const t=r.endAt?new $h(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new $h(r.startAt.position,r.startAt.inclusive):null;return vE(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function wp(r,e){const t=r.filters.concat([e]);return new Bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ap(r,e,t){return new Bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function gf(r,e){return ug(Qr(r),Qr(e))&&r.limitType===e.limitType}function rS(r){return`${lg(Qr(r))}|lt:${r.limitType}`}function Ao(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>eS(o)).join(", ")}]`),mf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Lo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Lo(o)).join(",")),`Target(${s})`}(Qr(r))}; limitType=${r.limitType})`}function yf(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of yu(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,p,d){const m=gE(h,p,d);return h.inclusive?m<=0:m<0}(s.startAt,yu(s),o)||s.endAt&&!function(h,p,d){const m=gE(h,p,d);return h.inclusive?m>=0:m>0}(s.endAt,yu(s),o))}(r,e)}function UN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function iS(r){return(e,t)=>{let s=!1;for(const o of yu(r)){const l=jN(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function jN(r,e,t){const s=r.field.isKeyField()?Te.comparator(e.key,t.key):function(l,h,p){const d=h.data.field(l),m=p.data.field(l);return d!==null&&m!==null?Vo(d,m):Ae(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return Bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new At(Te.comparator);function Li(){return zN}const sS=new At(Te.comparator);function hu(...r){let e=sS;for(const t of r)e=e.insert(t.key,t);return e}function aS(r){let e=sS;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function da(){return vu()}function oS(){return vu()}function vu(){return new Ra(r=>r.toString(),(r,e)=>r.isEqual(e))}const BN=new At(Te.comparator),qN=new Wt(Te.comparator);function je(...r){let e=qN;for(const t of r)e=e.add(t);return e}const HN=new Wt(Oe);function FN(){return HN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function lS(r){return{integerValue:""+r}}function GN(r,e){return vN(e)?lS(e):hg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function $N(r,e,t){return r instanceof xu?function(o,l){const h={fields:{[Fb]:{stringValue:Hb},[$b]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ag(l)&&(l=pf(l)),l&&(h.fields[Gb]=l),{mapValue:h}}(t,e):r instanceof Nu?cS(r,e):r instanceof Du?hS(r,e):function(o,l){const h=uS(o,l),p=EE(h)+EE(o.Re);return Tp(h)&&Tp(o.Re)?lS(p):hg(o.serializer,p)}(r,e)}function KN(r,e,t){return r instanceof Nu?cS(r,e):r instanceof Du?hS(r,e):t}function uS(r,e){return r instanceof Qh?function(s){return Tp(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class xu extends vf{}class Nu extends vf{constructor(e){super(),this.elements=e}}function cS(r,e){const t=fS(e);for(const s of r.elements)t.some(o=>Wr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Du extends vf{constructor(e){super(),this.elements=e}}function hS(r,e){let t=fS(e);for(const s of r.elements)t=t.filter(o=>!Wr(o,s));return{arrayValue:{values:t}}}class Qh extends vf{constructor(e,t){super(),this.serializer=e,this.Re=t}}function EE(r){return Pt(r.integerValue||r.doubleValue)}function fS(r){return og(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t){this.field=e,this.transform=t}}function YN(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Nu&&o instanceof Nu||s instanceof Du&&o instanceof Du?ko(s.elements,o.elements,Wr):s instanceof Qh&&o instanceof Qh?Wr(s.Re,o.Re):s instanceof xu&&o instanceof xu}(r.transform,e.transform)}class XN{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class _f{}function dS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new fg(r.key,cr.none()):new qu(r.key,r.data,cr.none());{const t=r.data,s=Vn.empty();let o=new Wt(pn.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ps(r.key,s,new Qn(o.toArray()),cr.none())}}function WN(r,e,t){r instanceof qu?function(o,l,h){const p=o.value.clone(),d=bE(o.fieldTransforms,l,h.transformResults);p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):r instanceof Ps?function(o,l,h){if(!Dh(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=bE(o.fieldTransforms,l,h.transformResults),d=l.data;d.setAll(mS(o)),d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function _u(r,e,t,s){return r instanceof qu?function(l,h,p,d){if(!Dh(l.precondition,h))return p;const m=l.value.clone(),v=SE(l.fieldTransforms,d,h);return m.setAll(v),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ps?function(l,h,p,d){if(!Dh(l.precondition,h))return p;const m=SE(l.fieldTransforms,d,h),v=h.data;return v.setAll(mS(l)),v.setAll(m),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(r,e,t,s):function(l,h,p){return Dh(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(r,e,t)}function ZN(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=uS(s.transform,o||null);l!=null&&(t===null&&(t=Vn.empty()),t.set(s.field,l))}return t||null}function TE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ko(s,o,(l,h)=>YN(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class qu extends _f{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ps extends _f{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function mS(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function bE(r,e,t){const s=new Map;Je(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);s.set(l.field,KN(h,p,t[o]))}return s}function SE(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,$N(l,h,e))}return s}class fg extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JN extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&WN(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=_u(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=_u(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=oS();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const d=dS(h,p);d!==null&&s.set(o.key,d),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),je())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(t,s)=>TE(t,s))&&ko(this.baseMutations,e.baseMutations,(t,s)=>TE(t,s))}}class dg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Je(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return BN}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new dg(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Ge;function rD(r){switch(r){case ae.OK:return Ae(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function pS(r){if(r===void 0)return Vi("GRPC error has no .code"),ae.UNKNOWN;switch(r){case jt.OK:return ae.OK;case jt.CANCELLED:return ae.CANCELLED;case jt.UNKNOWN:return ae.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ae.INTERNAL;case jt.UNAVAILABLE:return ae.UNAVAILABLE;case jt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case jt.NOT_FOUND:return ae.NOT_FOUND;case jt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case jt.ABORTED:return ae.ABORTED;case jt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case jt.DATA_LOSS:return ae.DATA_LOSS;default:return Ae(39323,{code:r})}}(Ge=jt||(jt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Es([4294967295,4294967295],0);function wE(r){const e=Ub().encode(r),t=new Nb;return t.update(e),new Uint8Array(t.digest())}function AE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Es([t,s],0),new Es([o,l],0)]}class mg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(s<0)throw new fu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Es.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(Es.fromNumber(s)));return o.compare(iD)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=wE(e),[s,o]=AE(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);if(!this.be(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new mg(l,o,t);return s.forEach(p=>h.insert(p)),h}insert(e){if(this.pe===0)return;const t=wE(e),[s,o]=AE(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ef(Ce.min(),o,new At(Oe),Li(),je())}}class Hu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Hu(s,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class gS{constructor(e,t){this.targetId=e,this.Ce=t}}class yS{constructor(e,t,s=gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class RE{constructor(){this.Fe=0,this.Me=IE(),this.xe=gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=je(),t=je(),s=je();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}}),new Hu(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=IE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Je(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sD{constructor(e){this.ze=e,this.je=new Map,this.He=Li(),this.Je=Eh(),this.Ye=Eh(),this.Ze=new At(Oe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(Sp(l))if(s===0){const h=new Te(l.path);this.tt(t,h,Tn.newNoDocument(h,Ce.min()))}else Je(s===1,20013,{expectedCount:s});else{const h=this.ut(t);if(h!==s){const p=this.ct(e),d=p?this.lt(p,e,h):1;if(d!==0){this.st(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Rs(s).toUint8Array()}catch(d){if(d instanceof qb)return Po("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{p=new mg(h,o,l)}catch(d){return Po(d instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return p.pe===0?null:p}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.ze.Pt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const p=this._t(h);if(p){if(l.current&&Sp(p.target)){const d=new Te(p.target.path);this.Et(d).has(h)||this.dt(h,d)||this.tt(h,d,Tn.newNoDocument(d,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let s=je();this.Ye.forEach((l,h)=>{let p=!0;h.forEachWhile(d=>{const m=this._t(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Ef(e,t,this.Ze,this.He,s);return this.He=Li(),this.Je=Eh(),this.Ye=Eh(),this.Ze=new At(Oe),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new RE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Wt(Oe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Wt(Oe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new RE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new At(Te.comparator)}function IE(){return new At(Te.comparator)}const aD={asc:"ASCENDING",desc:"DESCENDING"},oD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lD={and:"AND",or:"OR"};class uD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rp(r,e){return r.useProto3Json||mf(e)?e:{value:e}}function Yh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cD(r,e){return Yh(r,e.toTimestamp())}function Yr(r){return Je(!!r,49232),Ce.fromTimestamp(function(t){const s=As(t);return new Xt(s.seconds,s.nanos)}(r))}function pg(r,e){return Ip(r,e).canonicalString()}function Ip(r,e){const t=function(o){return new mt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function _S(r){const e=mt.fromString(r);return Je(wS(e),10190,{key:e.toString()}),e}function Cp(r,e){return pg(r.databaseId,e.path)}function Km(r,e){const t=_S(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Te(TS(t))}function ES(r,e){return pg(r.databaseId,e)}function hD(r){const e=_S(r);return e.length===4?mt.emptyPath():TS(e)}function xp(r){return new mt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function TS(r){return Je(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function CE(r,e,t){return{name:Cp(r,e),fields:t.value.mapValue.fields}}function fD(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(m,v){return m.useProto3Json?(Je(v===void 0||typeof v=="string",58123),gn.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),gn.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(m){const v=m.code===void 0?ae.UNKNOWN:pS(m.code);return new pe(v,m.message||"")}(h);t=new yS(s,o,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Km(r,s.document.name),l=Yr(s.document.updateTime),h=s.document.createTime?Yr(s.document.createTime):Ce.min(),p=new Vn({mapValue:{fields:s.document.fields}}),d=Tn.newFoundDocument(o,l,h,p),m=s.targetIds||[],v=s.removedTargetIds||[];t=new Oh(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Km(r,s.document),l=s.readTime?Yr(s.readTime):Ce.min(),h=Tn.newNoDocument(o,l),p=s.removedTargetIds||[];t=new Oh([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Km(r,s.document),l=s.removedTargetIds||[];t=new Oh([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new nD(o,l),p=s.targetId;t=new gS(p,h)}}return t}function dD(r,e){let t;if(e instanceof qu)t={update:CE(r,e.key,e.value)};else if(e instanceof fg)t={delete:Cp(r,e.key)};else if(e instanceof Ps)t={update:CE(r,e.key,e.data),updateMask:bD(e.fieldMask)};else{if(!(e instanceof JN))return Ae(16599,{ft:e.type});t={verify:Cp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const p=h.transform;if(p instanceof xu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Nu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Du)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Qh)return{fieldPath:h.field.canonicalString(),increment:p.Re};throw Ae(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:cD(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)}(r,e.precondition)),t}function mD(r,e){return r&&r.length>0?(Je(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?Yr(o.updateTime):Yr(l);return h.isEqual(Ce.min())&&(h=Yr(l)),new XN(h,o.transformResults||[])}(t,e))):[]}function pD(r,e){return{documents:[ES(r,e.path)]}}function gD(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=ES(r,o);const l=function(m){if(m.length!==0)return SS(br.create(m,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(m){if(m.length!==0)return m.map(v=>function(S){return{field:Ro(S.field),direction:_D(S.dir)}}(v))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=Rp(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:t,parent:o}}function yD(r){let e=hD(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Je(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(E){const S=bS(E);return S instanceof br&&Zb(S)?S.getFilters():[S]}(t.where));let h=[];t.orderBy&&(h=function(E){return E.map(S=>function(x){return new Kh(Io(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(t.orderBy));let p=null;t.limit&&(p=function(E){let S;return S=typeof E=="object"?E.value:E,mf(S)?null:S}(t.limit));let d=null;t.startAt&&(d=function(E){const S=!!E.before,I=E.values||[];return new $h(I,S)}(t.startAt));let m=null;return t.endAt&&(m=function(E){const S=!E.before,I=E.values||[];return new $h(I,S)}(t.endAt)),VN(e,o,h,l,p,"F",d,m)}function vD(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bS(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Io(t.unaryFilter.field);return Bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return Bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return Bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return Bt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(t){return Bt.create(Io(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return br.create(t.compositeFilter.filters.map(s=>bS(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(r):Ae(30097,{filter:r})}function _D(r){return aD[r]}function ED(r){return oD[r]}function TD(r){return lD[r]}function Ro(r){return{fieldPath:r.canonicalString()}}function Io(r){return pn.fromServerFormat(r.fieldPath)}function SS(r){return r instanceof Bt?function(t){if(t.op==="=="){if(pE(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(mE(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pE(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(mE(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:ED(t.op),value:t.value}}}(r):r instanceof br?function(t){const s=t.getFilters().map(o=>SS(o));return s.length===1?s[0]:{compositeFilter:{op:TD(t.op),filters:s}}}(r):Ae(54877,{filter:r})}function bD(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,s,o,l=Ce.min(),h=Ce.min(),p=gn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=d}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.wt=e}}function wD(r){const e=yD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.Cn=new RD}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ws.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class RD{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Wt(mt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Wt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AS=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(AS,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Uo(0)}static lr(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="LruGarbageCollector",ID=1048576;function DE([r,e],[t,s]){const o=Oe(r,t);return o===0?Oe(e,s):o}class CD{constructor(e){this.Er=e,this.buffer=new Wt(DE),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();DE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xD{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){me(NE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xo(t)?me(NE,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.mr(3e5)})}}class ND{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return se.resolve(df.le);const s=new CD(t);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(xE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,o,l,h,p,d,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(s=E,p=Date.now(),this.removeTargets(e,s,t))).next(E=>(l=E,d=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(m=Date.now(),wo()<=Ue.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(d-p)+`ms
	Removed ${E} documents in `+(m-d)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function DD(r,e){return new ND(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&_u(s.mutation,o,Qn.empty(),Xt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,je()).next(()=>s))}getLocalViewOfDocuments(e,t,s=je()){const o=da();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=hu();return l.forEach((p,d)=>{h=h.insert(p,d.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=da();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,je()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,p)=>{t.set(h,p)})})}computeViews(e,t,s,o){let l=Li();const h=vu(),p=function(){return vu()}();return t.forEach((d,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Ps)?l=l.insert(m.key,m):v!==void 0?(h.set(m.key,v.mutation.getFieldMask()),_u(v.mutation,m,v.mutation.getFieldMask(),Xt.now())):h.set(m.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,l).next(d=>(d.forEach((m,v)=>h.set(m,v)),t.forEach((m,v)=>{var E;return p.set(m,new MD(v,(E=h.get(m))!==null&&E!==void 0?E:null))}),p))}recalculateAndSaveOverlays(e,t){const s=vu();let o=new At((h,p)=>h-p),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const p of h)p.keys().forEach(d=>{const m=t.get(d);if(m===null)return;let v=s.get(d)||Qn.empty();v=p.applyToLocalView(m,v),s.set(d,v);const E=(o.get(p.batchId)||je()).add(d);o=o.insert(p.batchId,E)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const d=p.getNext(),m=d.key,v=d.value,E=oS();v.forEach(S=>{if(!l.has(S)){const I=dS(t.get(S),s.get(S));I!==null&&E.set(S,I),l=l.add(S)}}),h.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):se.resolve(da());let p=Au,d=l;return h.next(m=>se.forEach(m,(v,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{d=d.insert(v,S)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,d,m,je())).next(v=>({batchId:p,changes:aS(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(s=>{let o=hu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=hu();return this.indexManager.getCollectionParents(e,l).next(p=>se.forEach(p,d=>{const m=function(E,S){return new Bu(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next(v=>{v.forEach((E,S)=>{h=h.insert(E,S)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((d,m)=>{const v=m.getKey();h.get(v)===null&&(h=h.insert(v,Tn.newInvalidDocument(v)))});let p=hu();return h.forEach((d,m)=>{const v=l.get(d);v!==void 0&&_u(v.mutation,m,Qn.empty(),Xt.now()),yf(t,m)&&(p=p.insert(d,m))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return se.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Yr(o.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:wD(o.bundledQuery),readTime:Yr(o.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.overlays=new At(Te.comparator),this.Qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=da();return se.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.St(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=da(),l=t.length+1,h=new Te(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const d=p.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&d.largestBatchId>s&&o.set(d.getKey(),d)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new At((m,v)=>m-v);const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=da(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const p=da(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>p.set(m,v)),!(p.size()>=o)););return se.resolve(p)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new tD(t,s));let l=this.Qr.get(t);l===void 0&&(l=je(),this.Qr.set(t,l)),this.Qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.$r=new Wt(an.Ur),this.Kr=new Wt(an.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new an(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new an(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new Te(new mt([])),s=new an(t,e),o=new an(t,e+1),l=[];return this.Kr.forEachInRange([s,o],h=>{this.zr(h),l.push(h.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Te(new mt([])),s=new an(t,e),o=new an(t,e+1);let l=je();return this.Kr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new an(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class an{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Te.comparator(e.key,t.key)||Oe(e.Zr,t.Zr)}static Wr(e,t){return Oe(e.Zr,t.Zr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Wt(an.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new eD(l,t,s,o);this.mutationQueue.push(h);for(const p of o)this.Xr=this.Xr.add(new an(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return se.resolve(h)}lookupMutationBatch(e,t){return se.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ti(s),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?sg:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new an(t,0),o=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([s,o],h=>{const p=this.ei(h.Zr);l.push(p)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Wt(Oe);return t.forEach(o=>{const l=new an(o,0),h=new an(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,h],p=>{s=s.add(p.Zr)})}),se.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const h=new an(new Te(l),0);let p=new Wt(Oe);return this.Xr.forEachWhile(d=>{const m=d.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(p=p.add(d.Zr)),!0)},h),se.resolve(this.ni(p))}ni(e){const t=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Je(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return se.forEach(t.mutations,o=>{const l=new an(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new an(t,0),o=this.Xr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.ii=e,this.docs=function(){return new At(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let s=Li();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))}),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Li();const h=t.path,p=new Te(h.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(p);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||mN(dN(v),s)<=0||(o.has(v.key)||yf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}si(e,t){return se.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new zD(this)}getSize(e){return se.resolve(this.size)}}class zD extends OD{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),se.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.persistence=e,this.oi=new Ra(t=>lg(t),ug),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this._i=0,this.ai=new gg,this.targetCount=0,this.ui=Uo.cr()}forEachTarget(e,t){return this.oi.forEach((s,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),se.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Tr(t),se.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.oi.forEach((h,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),se.waitFor(l).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.ci={},this.overlays={},this.li=new df(0),this.hi=!1,this.hi=!0,this.Pi=new LD,this.referenceDelegate=e(this),this.Ti=new BD(this),this.indexManager=new AD,this.remoteDocumentCache=function(o){return new jD(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new SD(t),this.Ei=new kD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new UD(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const o=new qD(this.li.next());return this.referenceDelegate.di(),s(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return se.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class qD extends gN{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Vi=new gg,this.mi=null}static fi(e){return new yg(e)}get gi(){if(this.mi)return this.mi;throw Ae(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,s=>{const o=Te.fromPath(s);return this.pi(e,o).next(l=>{l||t.removeEntry(o,Ce.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return se.or([()=>se.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Xh{constructor(e,t){this.persistence=e,this.yi=new Ra(s=>_N(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=DD(this,t)}static fi(e,t){return new Xh(e,t)}di(){}Ai(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}br(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return se.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(l=>l?se.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(p=>{p||(s++,l.removeEntry(h,Ce.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xh(e.data.value)),t}Dr(e,t,s){return se.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ds=s,this.As=o}static Rs(e,t){let s=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new vg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return EI()?8:yN(Sn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ws(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.bs(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new HD;return this.Ss(e,t,h).next(p=>{if(l.result=p,this.fs)return this.Ds(e,t,h,p.size)})}).next(()=>l.result)}Ds(e,t,s,o){return s.documentReadCount<this.gs?(wo()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(wo()<=Ue.DEBUG&&me("QueryEngine","Query:",Ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(wo()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(t))):se.resolve())}ws(e,t){if(_E(t))return se.resolve(null);let s=Qr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ap(t,null,"F"),s=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=je(...l);return this.ys.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,s).next(d=>{const m=this.vs(t,p);return this.Cs(t,m,h,d.readTime)?this.ws(e,Ap(t,null,"F")):this.Fs(e,m,t,d)}))})))}bs(e,t,s,o){return _E(t)||o.isEqual(Ce.min())?se.resolve(null):this.ys.getDocuments(e,s).next(l=>{const h=this.vs(t,l);return this.Cs(t,h,s,o)?se.resolve(null):(wo()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.Fs(e,h,t,fN(o,Au)).next(p=>p))})}vs(e,t){let s=new Wt(iS(e));return t.forEach((o,l)=>{yf(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return wo()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.ys.getDocumentsMatchingQuery(e,t,ws.min(),s)}Fs(e,t,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",GD=3e8;class $D{constructor(e,t,s,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new At(Oe),this.Os=new Ra(l=>lg(l),ug),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function KD(r,e,t,s){return new $D(r,e,t,s)}async function IS(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],p=[];let d=je();for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of l){p.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return t.localDocuments.getDocuments(s,d).next(m=>({ks:m,removedBatchIds:h,addedBatchIds:p}))})})}function QD(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(p,d,m,v){const E=m.batch,S=E.keys();let I=se.resolve();return S.forEach(x=>{I=I.next(()=>v.getEntry(d,x)).next(P=>{const M=m.docVersions.get(x);Je(M!==null,48541),P.version.compareTo(M)<0&&(E.applyToRemoteDocument(P,m),P.isValidDocument()&&(P.setReadTime(m.commitVersion),v.addEntry(P)))})}),I.next(()=>p.mutationQueue.removeMutationBatch(d,E))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let d=je();for(let m=0;m<p.mutationResults.length;++m)p.mutationResults[m].transformResults.length>0&&(d=d.add(p.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function CS(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function YD(r,e){const t=xe(r),s=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const p=[];e.targetChanges.forEach((v,E)=>{const S=o.get(E);if(!S)return;p.push(t.Ti.removeMatchingKeys(l,v.removedDocuments,E).next(()=>t.Ti.addMatchingKeys(l,v.addedDocuments,E)));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(gn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,s)),o=o.insert(E,I),function(P,M,Y){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=GD?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(S,I,v)&&p.push(t.Ti.updateTargetData(l,I))});let d=Li(),m=je();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),p.push(XD(l,h,e.documentUpdates).next(v=>{d=v.qs,m=v.Qs})),!s.isEqual(Ce.min())){const v=t.Ti.getLastRemoteSnapshotVersion(l).next(E=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,s));p.push(v)}return se.waitFor(p).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,d,m)).next(()=>d)}).then(l=>(t.xs=o,l))}function XD(r,e,t){let s=je(),o=je();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Li();return t.forEach((p,d)=>{const m=l.get(p);d.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(p)),d.isNoDocument()&&d.version.isEqual(Ce.min())?(e.removeEntry(p,d.readTime),h=h.insert(p,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),h=h.insert(p,d)):me(_g,"Ignoring outdated watch update for ",p,". Current version:",m.version," Watch version:",d.version)}),{qs:h,Qs:o}})}function WD(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=sg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ZD(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Ti.getTargetData(s,e).next(l=>l?(o=l,se.resolve(o)):t.Ti.allocateTargetId(s).next(h=>(o=new ys(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function Np(r,e,t){const s=xe(r),o=s.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Xo(h))throw h;me(_g,`Failed to update sequence numbers for target ${e}: ${h}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function OE(r,e,t){const s=xe(r);let o=Ce.min(),l=je();return s.persistence.runTransaction("Execute query","readwrite",h=>function(d,m,v){const E=xe(d),S=E.Os.get(v);return S!==void 0?se.resolve(E.xs.get(S)):E.Ti.getTargetData(m,v)}(s,h,Qr(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(h,p.targetId).next(d=>{l=d})}).next(()=>s.Ms.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:je())).next(p=>(JD(s,UN(e),p),{documents:p,$s:l})))}function JD(r,e,t){let s=r.Ns.get(e)||Ce.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Ns.set(e,s)}class ME{constructor(){this.activeTargetIds=FN()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eO{constructor(){this.xo=new ME,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new ME,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="ConnectivityMonitor";class kE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){me(PE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){me(PE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th=null;function Dp(){return Th===null?Th=function(){return 268435456+Math.round(2147483648*Math.random())}():Th++,"0x"+Th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="RestConnection",nO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===Fh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,t,s,o,l){const h=Dp(),p=this.jo(e,t.toUriEncodedString());me(Qm,`Sending RPC '${e}' ${h}:`,p,s);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,o,l);const{host:m}=new URL(p),v=Go(m);return this.Jo(e,p,d,s,v).then(E=>(me(Qm,`Received RPC '${e}' ${h}: `,E),E),E=>{throw Po(Qm,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",s),E})}Yo(e,t,s,o,l,h){return this.zo(e,t,s,o,l)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const s=nO[e];return`${this.Ko}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class sO extends rO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=Dp();return new Promise((p,d)=>{const m=new Db;m.setWithCredentials(!0),m.listenOnce(Ob.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ch.NO_ERROR:const E=m.getResponseJson();me(_n,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case Ch.TIMEOUT:me(_n,`RPC '${e}' ${h} timed out`),d(new pe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const S=m.getStatus();if(me(_n,`RPC '${e}' ${h} failed with status:`,S,"response text:",m.getResponseText()),S>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const x=I==null?void 0:I.error;if(x&&x.status&&x.message){const P=function(Y){const ee=Y.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ee)>=0?ee:ae.UNKNOWN}(x.status);d(new pe(P,x.message))}else d(new pe(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new pe(ae.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{h_:e,streamId:h,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{me(_n,`RPC '${e}' ${h} completed.`)}});const v=JSON.stringify(o);me(_n,`RPC '${e}' ${h} sending request:`,o),m.send(t,"POST",v,s,15)})}I_(e,t,s){const o=Dp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=kb(),p=Pb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,t,s),d.encodeInitMessageHeaders=!0;const v=l.join("");me(_n,`Creating RPC '${e}' stream ${o}: ${v}`,d);const E=h.createWebChannel(v,d);this.E_(E);let S=!1,I=!1;const x=new iO({Zo:M=>{I?me(_n,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(S||(me(_n,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),me(_n,`RPC '${e}' stream ${o} sending:`,M),E.send(M))},Xo:()=>E.close()}),P=(M,Y,ee)=>{M.listen(Y,$=>{try{ee($)}catch(oe){setTimeout(()=>{throw oe},0)}})};return P(E,cu.EventType.OPEN,()=>{I||(me(_n,`RPC '${e}' stream ${o} transport opened.`),x.__())}),P(E,cu.EventType.CLOSE,()=>{I||(I=!0,me(_n,`RPC '${e}' stream ${o} transport closed`),x.u_(),this.d_(E))}),P(E,cu.EventType.ERROR,M=>{I||(I=!0,Po(_n,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),x.u_(new pe(ae.UNAVAILABLE,"The operation could not be completed")))}),P(E,cu.EventType.MESSAGE,M=>{var Y;if(!I){const ee=M.data[0];Je(!!ee,16349);const $=ee,oe=($==null?void 0:$.error)||((Y=$[0])===null||Y===void 0?void 0:Y.error);if(oe){me(_n,`RPC '${e}' stream ${o} received error:`,oe);const le=oe.status;let ve=function(N){const k=jt[N];if(k!==void 0)return pS(k)}(le),V=oe.message;ve===void 0&&(ve=ae.INTERNAL,V="Unknown error status: "+le+" with message "+oe.message),I=!0,x.u_(new pe(ve,V)),E.close()}else me(_n,`RPC '${e}' stream ${o} received:`,ee),x.c_(ee)}}),P(p,Mb.STAT_EVENT,M=>{M.stat===vp.PROXY?me(_n,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===vp.NOPROXY&&me(_n,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(r){return new uD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t,s=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=s,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="PersistentStream";class NS{constructor(e,t,s,o,l,h,p,d){this.xi=e,this.S_=s,this.D_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new xS(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Vi(t.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===t&&this.z_(s,o)},s=>{e(()=>{const o=new pe(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,t){const s=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return me(VE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(me(VE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aO extends NS{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=fD(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?Yr(h.readTime):Ce.min()}(e);return this.listener.Y_(t,s)}Z_(e){const t={};t.database=xp(this.serializer),t.addTarget=function(l,h){let p;const d=h.target;if(p=Sp(d)?{documents:pD(l,d)}:{query:gD(l,d).gt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=vS(l,h.resumeToken);const m=Rp(l,h.expectedCount);m!==null&&(p.expectedCount=m)}else if(h.snapshotVersion.compareTo(Ce.min())>0){p.readTime=Yh(l,h.snapshotVersion.toTimestamp());const m=Rp(l,h.expectedCount);m!==null&&(p.expectedCount=m)}return p}(this.serializer,e);const s=vD(this.serializer,e);s&&(t.labels=s),this.Q_(t)}X_(e){const t={};t.database=xp(this.serializer),t.removeTarget=e,this.Q_(t)}}class oO extends NS{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=mD(e.writeResults,e.commitTime),s=Yr(e.commitTime);return this.listener.ra(s,t)}ia(){const e={};e.database=xp(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>dD(this.serializer,s))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{}class uO extends lO{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new pe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.zo(e,Ip(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ae.UNKNOWN,l.toString())})}Yo(e,t,s,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Yo(e,Ip(t,s),o,h,p,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(ae.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class cO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Vi(t),this.ua=!1):me("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class hO{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(h=>{s.enqueueAndForget(async()=>{Ia(this)&&(me(Ea,"Restarting streams for network reachability change."),await async function(d){const m=xe(d);m.da.add(4),await Fu(m),m.Va.set("Unknown"),m.da.delete(4),await bf(m)}(this))})}),this.Va=new cO(s,o)}}async function bf(r){if(Ia(r))for(const e of r.Aa)await e(!0)}async function Fu(r){for(const e of r.Aa)await e(!1)}function DS(r,e){const t=xe(r);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Sg(t)?bg(t):Wo(t).N_()&&Tg(t,e))}function Eg(r,e){const t=xe(r),s=Wo(t);t.Ea.delete(e),s.N_()&&OS(t,e),t.Ea.size===0&&(s.N_()?s.k_():Ia(t)&&t.Va.set("Unknown"))}function Tg(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(r).Z_(e)}function OS(r,e){r.ma.Ke(e),Wo(r).X_(e)}function bg(r){r.ma=new sD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Wo(r).start(),r.Va.ca()}function Sg(r){return Ia(r)&&!Wo(r).O_()&&r.Ea.size>0}function Ia(r){return xe(r).da.size===0}function MS(r){r.ma=void 0}async function fO(r){r.Va.set("Online")}async function dO(r){r.Ea.forEach((e,t)=>{Tg(r,e)})}async function mO(r,e){MS(r),Sg(r)?(r.Va.Pa(e),bg(r)):r.Va.set("Unknown")}async function pO(r,e,t){if(r.Va.set("Online"),e instanceof yS&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ea.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ea.delete(p),o.ma.removeTarget(p))}(r,e)}catch(s){me(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wh(r,s)}else if(e instanceof Oh?r.ma.Xe(e):e instanceof gS?r.ma.ot(e):r.ma.nt(e),!t.isEqual(Ce.min()))try{const s=await CS(r.localStore);t.compareTo(s)>=0&&await function(l,h){const p=l.ma.It(h);return p.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=l.Ea.get(m);v&&l.Ea.set(m,v.withResumeToken(d.resumeToken,h))}}),p.targetMismatches.forEach((d,m)=>{const v=l.Ea.get(d);if(!v)return;l.Ea.set(d,v.withResumeToken(gn.EMPTY_BYTE_STRING,v.snapshotVersion)),OS(l,d);const E=new ys(v.target,d,m,v.sequenceNumber);Tg(l,E)}),l.remoteSyncer.applyRemoteEvent(p)}(r,t)}catch(s){me(Ea,"Failed to raise snapshot:",s),await Wh(r,s)}}async function Wh(r,e,t){if(!Xo(e))throw e;r.da.add(1),await Fu(r),r.Va.set("Offline"),t||(t=()=>CS(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{me(Ea,"Retrying IndexedDB access"),await t(),r.da.delete(1),await bf(r)})}function PS(r,e){return e().catch(t=>Wh(r,t,e))}async function Sf(r){const e=xe(r),t=Cs(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:sg;for(;gO(e);)try{const o=await WD(e.localStore,s);if(o===null){e.Ia.length===0&&t.k_();break}s=o.batchId,yO(e,o)}catch(o){await Wh(e,o)}kS(e)&&VS(e)}function gO(r){return Ia(r)&&r.Ia.length<10}function yO(r,e){r.Ia.push(e);const t=Cs(r);t.N_()&&t.ea&&t.ta(e.mutations)}function kS(r){return Ia(r)&&!Cs(r).O_()&&r.Ia.length>0}function VS(r){Cs(r).start()}async function vO(r){Cs(r).ia()}async function _O(r){const e=Cs(r);for(const t of r.Ia)e.ta(t.mutations)}async function EO(r,e,t){const s=r.Ia.shift(),o=dg.from(s,e,t);await PS(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Sf(r)}async function TO(r,e){e&&Cs(r).ea&&await async function(s,o){if(function(h){return rD(h)&&h!==ae.ABORTED}(o.code)){const l=s.Ia.shift();Cs(s).L_(),await PS(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Sf(s)}}(r,e),kS(r)&&VS(r)}async function LE(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),me(Ea,"RemoteStore received new credentials");const s=Ia(t);t.da.add(3),await Fu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await bf(t)}async function bO(r,e){const t=xe(r);e?(t.da.delete(2),await bf(t)):e||(t.da.add(2),await Fu(t),t.Va.set("Unknown"))}function Wo(r){return r.fa||(r.fa=function(t,s,o){const l=xe(t);return l.oa(),new aO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{e_:fO.bind(null,r),n_:dO.bind(null,r),i_:mO.bind(null,r),Y_:pO.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Sg(r)?bg(r):r.Va.set("Unknown")):(await r.fa.stop(),MS(r))})),r.fa}function Cs(r){return r.ga||(r.ga=function(t,s,o){const l=xe(t);return l.oa(),new oO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:vO.bind(null,r),i_:TO.bind(null,r),na:_O.bind(null,r),ra:EO.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Sf(r)):(await r.ga.stop(),r.Ia.length>0&&(me(Ea,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,p=new wg(e,t,h,o,l);return p.start(s),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(r,e){if(Vi("AsyncQueue",`${e}: ${r}`),Xo(r))return new pe(ae.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=hu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.pa=new At(Te.comparator)}track(e){const t=e.doc.key,s=this.pa.get(t);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(t,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(t):e.type===1&&s.type===2?this.pa=this.pa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,s)=>{e.push(s)}),e}}class jo{constructor(e,t,s,o,l,h,p,d,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(p=>{h.push({type:0,doc:p})}),new jo(e,t,Oo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class wO{constructor(){this.queries=jE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=xe(t),l=o.queries;o.queries=jE(),l.forEach((h,p)=>{for(const d of p.Sa)d.onError(s)})})(this,new pe(ae.ABORTED,"Firestore shutting down"))}}function jE(){return new Ra(r=>rS(r),gf)}async function LS(r,e){const t=xe(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(s=2):(l=new SO,s=e.va()?0:1);try{switch(s){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Ag(h,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&Rg(t)}async function US(r,e){const t=xe(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function AO(r,e){const t=xe(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.Sa)p.Ma(o)&&(s=!0);h.ba=o}}s&&Rg(t)}function RO(r,e,t){const s=xe(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Rg(r){r.Ca.forEach(e=>{e.next()})}var Op,zE;(zE=Op||(Op={})).xa="default",zE.Cache="cache";class jS{constructor(e,t,s){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const s=t!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.key=e}}class BS{constructor(e){this.key=e}}class IO{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.Za=iS(e),this.Xa=new Oo(this.Za)}get eu(){return this.Ha}tu(e,t){const s=t?t.nu:new UE,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const d=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,E)=>{const S=o.get(v),I=yf(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let M=!1;S&&I?S.data.isEqual(I.data)?x!==P&&(s.track({type:3,doc:I}),M=!0):this.ru(S,I)||(s.track({type:2,doc:I}),M=!0,(d&&this.Za(I,d)>0||m&&this.Za(I,m)<0)&&(p=!0)):!S&&I?(s.track({type:0,doc:I}),M=!0):S&&!I&&(s.track({type:1,doc:S}),M=!0,(d||m)&&(p=!0)),M&&(I?(h=h.add(I),l=P?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{Xa:h,nu:s,Cs:p,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((v,E)=>function(I,x){const P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:M})}};return P(I)-P(x)}(v.type,E.type)||this.Za(v.doc,E.doc)),this.iu(s),o=o!=null&&o;const p=t&&!o?this.su():[],d=this.Ya.size===0&&this.current&&!o?1:0,m=d!==this.Ja;return this.Ja=d,h.length!==0||m?{snapshot:new jo(this.query,e.Xa,l,h,e.mutatedKeys,d===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:p}:{ou:p}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new UE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const t=[];return e.forEach(s=>{this.Ya.has(s)||t.push(new BS(s))}),this.Ya.forEach(s=>{e.has(s)||t.push(new zS(s))}),t}au(e){this.Ha=e.$s,this.Ya=je();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return jo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ig="SyncEngine";class CO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class xO{constructor(e){this.key=e,this.cu=!1}}class NO{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new Ra(p=>rS(p),gf),this.Pu=new Map,this.Tu=new Set,this.Iu=new At(Te.comparator),this.Eu=new Map,this.du=new gg,this.Au={},this.Ru=new Map,this.Vu=Uo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function DO(r,e,t=!0){const s=KS(r);let o;const l=s.hu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await qS(s,e,t,!0),o}async function OO(r,e){const t=KS(r);await qS(t,e,!0,!1)}async function qS(r,e,t,s){const o=await ZD(r.localStore,Qr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await MO(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&DS(r.remoteStore,o),p}async function MO(r,e,t,s,o){r.fu=(E,S,I)=>async function(P,M,Y,ee){let $=M.view.tu(Y);$.Cs&&($=await OE(P.localStore,M.query,!1).then(({documents:V})=>M.view.tu(V,$)));const oe=ee&&ee.targetChanges.get(M.targetId),le=ee&&ee.targetMismatches.get(M.targetId)!=null,ve=M.view.applyChanges($,P.isPrimaryClient,oe,le);return qE(P,M.targetId,ve.ou),ve.snapshot}(r,E,S,I);const l=await OE(r.localStore,e,!0),h=new IO(e,l.$s),p=h.tu(l.documents),d=Hu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),m=h.applyChanges(p,r.isPrimaryClient,d);qE(r,t,m.ou);const v=new CO(e,t,h);return r.hu.set(e,v),r.Pu.has(t)?r.Pu.get(t).push(e):r.Pu.set(t,[e]),m.snapshot}async function PO(r,e,t){const s=xe(r),o=s.hu.get(e),l=s.Pu.get(o.targetId);if(l.length>1)return s.Pu.set(o.targetId,l.filter(h=>!gf(h,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Np(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Eg(s.remoteStore,o.targetId),Mp(s,o.targetId)}).catch(Yo)):(Mp(s,o.targetId),await Np(s.localStore,o.targetId,!0))}async function kO(r,e){const t=xe(r),s=t.hu.get(e),o=t.Pu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Eg(t.remoteStore,s.targetId))}async function VO(r,e,t){const s=HO(r);try{const o=await function(h,p){const d=xe(h),m=Xt.now(),v=p.reduce((I,x)=>I.add(x.key),je());let E,S;return d.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=Li(),P=je();return d.Bs.getEntries(I,v).next(M=>{x=M,x.forEach((Y,ee)=>{ee.isValidDocument()||(P=P.add(Y))})}).next(()=>d.localDocuments.getOverlayedDocuments(I,x)).next(M=>{E=M;const Y=[];for(const ee of p){const $=ZN(ee,E.get(ee.key).overlayedDocument);$!=null&&Y.push(new Ps(ee.key,$,Yb($.value.mapValue),cr.exists(!0)))}return d.mutationQueue.addMutationBatch(I,m,Y,p)}).next(M=>{S=M;const Y=M.applyToLocalDocumentSet(E,P);return d.documentOverlayCache.saveOverlays(I,M.batchId,Y)})}).then(()=>({batchId:S.batchId,changes:aS(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,p,d){let m=h.Au[h.currentUser.toKey()];m||(m=new At(Oe)),m=m.insert(p,d),h.Au[h.currentUser.toKey()]=m}(s,o.batchId,t),await Gu(s,o.changes),await Sf(s.remoteStore)}catch(o){const l=Ag(o,"Failed to persist write");t.reject(l)}}async function HS(r,e){const t=xe(r);try{const s=await YD(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?Je(h.cu,14607):o.removedDocuments.size>0&&(Je(h.cu,42227),h.cu=!1))}),await Gu(t,s,e)}catch(s){await Yo(s)}}function BE(r,e,t){const s=xe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.hu.forEach((l,h)=>{const p=h.view.Fa(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const d=xe(h);d.onlineState=p;let m=!1;d.queries.forEach((v,E)=>{for(const S of E.Sa)S.Fa(p)&&(m=!0)}),m&&Rg(d)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function LO(r,e,t){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let h=new At(Te.comparator);h=h.insert(l,Tn.newNoDocument(l,Ce.min()));const p=je().add(l),d=new Ef(Ce.min(),new Map,new At(Oe),h,p);await HS(s,d),s.Iu=s.Iu.remove(l),s.Eu.delete(e),Cg(s)}else await Np(s.localStore,e,!1).then(()=>Mp(s,e,t)).catch(Yo)}async function UO(r,e){const t=xe(r),s=e.batch.batchId;try{const o=await QD(t.localStore,e);GS(t,s,null),FS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Gu(t,o)}catch(o){await Yo(o)}}async function jO(r,e,t){const s=xe(r);try{const o=await function(h,p){const d=xe(h);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,p).next(E=>(Je(E!==null,37113),v=E.keys(),d.mutationQueue.removeMutationBatch(m,E))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,p)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(s.localStore,e);GS(s,e,t),FS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Gu(s,o)}catch(o){await Yo(o)}}function FS(r,e){(r.Ru.get(e)||[]).forEach(t=>{t.resolve()}),r.Ru.delete(e)}function GS(r,e,t){const s=xe(r);let o=s.Au[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function Mp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),t&&r.lu.gu(s,t);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||$S(r,s)})}function $S(r,e){r.Tu.delete(e.path.canonicalString());const t=r.Iu.get(e);t!==null&&(Eg(r.remoteStore,t),r.Iu=r.Iu.remove(e),r.Eu.delete(t),Cg(r))}function qE(r,e,t){for(const s of t)s instanceof zS?(r.du.addReference(s.key,e),zO(r,s)):s instanceof BS?(me(Ig,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||$S(r,s.key)):Ae(19791,{pu:s})}function zO(r,e){const t=e.key,s=t.path.canonicalString();r.Iu.get(t)||r.Tu.has(s)||(me(Ig,"New document in limbo: "+t),r.Tu.add(s),Cg(r))}function Cg(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const t=new Te(mt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new xO(t)),r.Iu=r.Iu.insert(t,s),DS(r.remoteStore,new ys(Qr(cg(t.path)),s,"TargetPurposeLimboResolution",df.le))}}async function Gu(r,e,t){const s=xe(r),o=[],l=[],h=[];s.hu.isEmpty()||(s.hu.forEach((p,d)=>{h.push(s.fu(d,e,t).then(m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(m){o.push(m);const E=vg.Rs(d.targetId,m);l.push(E)}}))}),await Promise.all(h),s.lu.Y_(o),await async function(d,m){const v=xe(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>se.forEach(m,S=>se.forEach(S.ds,I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I)).next(()=>se.forEach(S.As,I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))}catch(E){if(!Xo(E))throw E;me(_g,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const I=v.xs.get(S),x=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(x);v.xs=v.xs.insert(S,P)}}}(s.localStore,l))}async function BO(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){me(Ig,"User change. New user:",e.toKey());const s=await IS(t.localStore,e);t.currentUser=e,function(l,h){l.Ru.forEach(p=>{p.forEach(d=>{d.reject(new pe(ae.CANCELLED,h))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Gu(t,s.ks)}}function qO(r,e){const t=xe(r),s=t.Eu.get(e);if(s&&s.cu)return je().add(s.key);{let o=je();const l=t.Pu.get(e);if(!l)return o;for(const h of l){const p=t.hu.get(h);o=o.unionWith(p.view.eu)}return o}}function KS(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=HS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LO.bind(null,e),e.lu.Y_=AO.bind(null,e.eventManager),e.lu.gu=RO.bind(null,e.eventManager),e}function HO(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jO.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return KD(this.persistence,new FD,e.initialUser,this.serializer)}Su(e){return new RS(yg.fi,this.serializer)}bu(e){return new eO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class FO extends Zh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Je(this.persistence.referenceDelegate instanceof Xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xD(s,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new RS(s=>Xh.fi(s,t),this.serializer)}}class Pp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>BE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=BO.bind(null,this.syncEngine),await bO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wO}()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),s=function(l){return new sO(l)}(e.databaseInfo);return function(l,h,p,d){return new uO(l,h,p,d)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,p){return new hO(s,o,l,h,p)}(this.localStore,this.datastore,e.asyncQueue,t=>BE(this.syncEngine,t,0),function(){return kE.C()?new kE:new tO}())}createSyncEngine(e,t){return function(o,l,h,p,d,m,v){const E=new NO(o,l,h,p,d,m);return v&&(E.mu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=xe(o);me(Ea,"RemoteStore shutting down."),l.da.add(5),await Fu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class GO{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=jb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{me(xs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(me(xs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ag(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Xm(r,e){r.asyncQueue.verifyOperationInProgress(),me(xs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await IS(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function HE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await $O(r);me(xs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>LE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>LE(e.remoteStore,o)),r._onlineComponents=e}async function $O(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(xs,"Using user provided OfflineComponentProvider");try{await Xm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Xm(r,new Zh)}}else me(xs,"Using default OfflineComponentProvider"),await Xm(r,new FO(void 0));return r._offlineComponents}async function YS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(xs,"Using user provided OnlineComponentProvider"),await HE(r,r._uninitializedComponentsProvider._online)):(me(xs,"Using default OnlineComponentProvider"),await HE(r,new Pp))),r._onlineComponents}function KO(r){return YS(r).then(e=>e.syncEngine)}async function XS(r){const e=await YS(r),t=e.eventManager;return t.onListen=DO.bind(null,e.syncEngine),t.onUnlisten=PO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kO.bind(null,e.syncEngine),t}function QO(r,e,t={}){const s=new Oi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,p,d,m){const v=new QS({next:S=>{v.xu(),h.enqueueAndForget(()=>US(l,E));const I=S.docs.has(p);!I&&S.fromCache?m.reject(new pe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&d&&d.source==="server"?m.reject(new pe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new jS(cg(p.path),v,{includeMetadataChanges:!0,Qa:!0});return LS(l,E)}(await XS(r),r.asyncQueue,e,t,s)),s.promise}function YO(r,e,t={}){const s=new Oi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,p,d,m){const v=new QS({next:S=>{v.xu(),h.enqueueAndForget(()=>US(l,E)),S.fromCache&&d.source==="server"?m.reject(new pe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new jS(p,v,{includeMetadataChanges:!0,Qa:!0});return LS(l,E)}(await XS(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r,e,t){if(!t)throw new pe(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function XO(r,e,t,s){if(e===!0&&s===!0)throw new pe(ae.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function GE(r){if(!Te.isDocumentKey(r))throw new pe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $E(r){if(Te.isDocumentKey(r))throw new pe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function wf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Sr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wf(r);throw new pe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firestore.googleapis.com",KE=!0;class QE{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JS,this.ssl=KE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:KE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ID)throw new pe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new rN;switch(s.type){case"firstParty":return new oN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=FE.get(t);s&&(me("ComponentProvider","Removing Datastore"),FE.delete(t),s.terminate())}(this),Promise.resolve()}}function WO(r,e,t,s={}){var o;r=Sr(r,Af);const l=Go(e),h=r._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),d=`${e}:${t}`;l&&(zT(`https://${d}`),BT("Firestore",!0)),h.host!==JS&&h.host!==d&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},h),{host:d,ssl:l,emulatorOptions:s});if(!Ss(m,p)&&(r._setSettings(m),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=En.MOCK_USER;else{v=fI(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new pe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new En(S)}r._authCredentials=new iN(new Lb(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zo(this.firestore,e,this._query)}}class xn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Ts extends Zo{constructor(e,t,s){super(e,t,cg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Te(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function hr(r,e,...t){if(r=qt(r),ZS("collection","path",e),r instanceof Af){const s=mt.fromString(e,...t);return $E(s),new Ts(r,null,s)}{if(!(r instanceof xn||r instanceof Ts))throw new pe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mt.fromString(e,...t));return $E(s),new Ts(r.firestore,null,s)}}function Ct(r,e,...t){if(r=qt(r),arguments.length===1&&(e=jb.newId()),ZS("doc","path",e),r instanceof Af){const s=mt.fromString(e,...t);return GE(s),new xn(r,null,new Te(s))}{if(!(r instanceof xn||r instanceof Ts))throw new pe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(mt.fromString(e,...t));return GE(s),new xn(r.firestore,r instanceof Ts?r.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="AsyncQueue";class XE{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new xS(this,"async_queue_retry"),this.rc=()=>{const s=Ym();s&&me(YE,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const t=Ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Oi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Xo(e))throw e;me(YE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Vi("INTERNAL UNHANDLED ERROR: ",WE(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=t,t}enqueueAfterDelay(e,t,s){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=wg.createAndSchedule(this,e,t,s,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Ae(47125,{cc:WE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function WE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ca extends Af{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new XE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XE(e),this._firestoreClient=void 0,await e}}}function ZO(r,e){const t=typeof r=="object"?r:$p(),s=typeof r=="string"?r:Fh,o=Aa(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=cI("firestore");l&&WO(o,...l)}return o}function xg(r){if(r._terminated)throw new pe(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||JO(r),r._firestoreClient}function JO(r){var e,t,s;const o=r._freezeSettings(),l=function(p,d,m,v){return new bN(p,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,WS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new GO(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(p){const d=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(d),_online:d}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(gn.fromBase64String(e))}catch(t){throw new pe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zo(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=/^__.*__$/;class tM{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}class ew{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ic:r})}}class Og{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Jh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(tw(this.Ic)&&eM.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class nM{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Tf(e)}bc(e,t,s,o=!1){return new Og({Ic:e,methodName:t,wc:s,path:pn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cf(r){const e=r._freezeSettings(),t=Tf(r._databaseId);return new nM(r._databaseId,!!e.ignoreUndefinedProperties,t)}function nw(r,e,t,s,o,l={}){const h=r.bc(l.merge||l.mergeFields?2:0,e,t,o);Pg("Data must be an object, but it was:",h,s);const p=rw(s,h);let d,m;if(l.merge)d=new Qn(h.fieldMask),m=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=kp(e,E,t);if(!h.contains(S))throw new pe(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sw(v,S)||v.push(S)}d=new Qn(v),m=h.fieldTransforms.filter(E=>d.covers(E.field))}else d=null,m=h.fieldTransforms;return new tM(new Vn(p),d,m)}class xf extends If{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}class Mg extends If{_toFieldTransform(e){return new QN(e.path,new xu)}isEqual(e){return e instanceof Mg}}function rM(r,e,t,s){const o=r.bc(1,e,t);Pg("Data must be an object, but it was:",o,s);const l=[],h=Vn.empty();Ms(s,(d,m)=>{const v=kg(e,d,t);m=qt(m);const E=o.mc(v);if(m instanceof xf)l.push(v);else{const S=$u(m,E);S!=null&&(l.push(v),h.set(v,S))}});const p=new Qn(l);return new ew(h,p,o.fieldTransforms)}function iM(r,e,t,s,o,l){const h=r.bc(1,e,t),p=[kp(e,s,t)],d=[o];if(l.length%2!=0)throw new pe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(kp(e,l[S])),d.push(l[S+1]);const m=[],v=Vn.empty();for(let S=p.length-1;S>=0;--S)if(!sw(m,p[S])){const I=p[S];let x=d[S];x=qt(x);const P=h.mc(I);if(x instanceof xf)m.push(I);else{const M=$u(x,P);M!=null&&(m.push(I),v.set(I,M))}}const E=new Qn(m);return new ew(v,E,h.fieldTransforms)}function sM(r,e,t,s=!1){return $u(t,r.bc(s?4:3,e))}function $u(r,e){if(iw(r=qt(r)))return Pg("Unsupported field value:",e,r),rw(r,e);if(r instanceof If)return function(s,o){if(!tw(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const p of s){let d=$u(p,o.fc(h));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=qt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return GN(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Xt.fromDate(s);return{timestampValue:Yh(o.serializer,l)}}if(s instanceof Xt){const l=new Xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,l)}}if(s instanceof Ng)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zo)return{bytesValue:vS(o.serializer,s._byteString)};if(s instanceof xn){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:pg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Dg)return function(h,p){return{mapValue:{fields:{[Kb]:{stringValue:Qb},[Gh]:{arrayValue:{values:h.toArray().map(m=>{if(typeof m!="number")throw p.gc("VectorValues must only contain numeric values.");return hg(p.serializer,m)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${wf(s)}`)}(r,e)}function rw(r,e){const t={};return Bb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(r,(s,o)=>{const l=$u(o,e.Ac(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function iw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Xt||r instanceof Ng||r instanceof zo||r instanceof xn||r instanceof If||r instanceof Dg)}function Pg(r,e,t){if(!iw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=wf(t);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function kp(r,e,t){if((e=qt(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return kg(r,e);throw Jh("Field path arguments must be of type string or ",r,!1,void 0,t)}const aM=new RegExp("[~\\*/\\[\\]]");function kg(r,e,t){if(e.search(aM)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rf(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Jh(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let d="";return(l||h)&&(d+=" (found",l&&(d+=` in field ${s}`),h&&(d+=` in document ${o}`),d+=")"),new pe(ae.INVALID_ARGUMENT,p+r+d)}function sw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oM extends aw{data(){return super.data()}}function Vg(r,e){return typeof e=="string"?kg(r,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class uM extends Lg{}function Mo(r,e,...t){let s=[];e instanceof Lg&&s.push(e),s=s.concat(t),function(l){const h=l.filter(d=>d instanceof Ug).length,p=l.filter(d=>d instanceof Nf).length;if(h>1||h>0&&p>0)throw new pe(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Nf extends uM{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Nf(e,t,s)}_apply(e){const t=this._parse(e);return ow(e._query,t),new Zo(e.firestore,e.converter,wp(e._query,t))}_parse(e){const t=Cf(e.firestore);return function(l,h,p,d,m,v,E){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){JE(E,v);const x=[];for(const P of E)x.push(ZE(d,l,P));S={arrayValue:{values:x}}}else S=ZE(d,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||JE(E,v),S=sM(p,h,E,v==="in"||v==="not-in");return Bt.create(m,v,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gs(r,e,t){const s=e,o=Vg("where",r);return Nf._create(o,s,t)}class Ug extends Lg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ug(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:br.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const p=l.getFlattenedFilters();for(const d of p)ow(h,d),h=wp(h,d)}(e._query,t),new Zo(e.firestore,e.converter,wp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ZE(r,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new pe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nS(e)&&t.indexOf("/")!==-1)throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(mt.fromString(t));if(!Te.isDocumentKey(s))throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return dE(r,new Te(s))}if(t instanceof xn)return dE(r,t._key);throw new pe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(t)}.`)}function JE(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ow(r,e){const t=function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cM{convertValue(e,t="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ms(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Gh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>Pt(h.doubleValue));return new Dg(l)}convertGeoPoint(e){return new Ng(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=pf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=As(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=mt.fromString(e);Je(wS(s),9688,{name:e});const o=new Iu(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(t)||Vi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uw extends aw{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Mh extends uw{data(e={}){return super.data(e)}}class hM{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new du(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mh(this._firestore,this._userDataWriter,s.key,s,new du(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const d=new Mh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new du(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:d,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{const d=new Mh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new du(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return p.type!==0&&(m=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),v=h.indexOf(p.doc.key)),{type:fM(p.type),doc:d,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(r){r=Sr(r,xn);const e=Sr(r.firestore,Ca);return QO(xg(e),r._key).then(t=>dM(e,r,t))}class cw extends cM{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function ga(r){r=Sr(r,Zo);const e=Sr(r.firestore,Ca),t=xg(e),s=new cw(e);return lM(r._query),YO(t,r._query).then(o=>new hM(e,s,r,o))}function jg(r,e,t){r=Sr(r,xn);const s=Sr(r.firestore,Ca),o=lw(r.converter,e);return Df(s,[nw(Cf(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,cr.none())])}function zg(r,e,t,...s){r=Sr(r,xn);const o=Sr(r.firestore,Ca),l=Cf(o);let h;return h=typeof(e=qt(e))=="string"||e instanceof Rf?iM(l,"updateDoc",r._key,e,t,s):rM(l,"updateDoc",r._key,e),Df(o,[h.toMutation(r._key,cr.exists(!0))])}function Bg(r){return Df(Sr(r.firestore,Ca),[new fg(r._key,cr.none())])}function Ku(r,e){const t=Sr(r.firestore,Ca),s=Ct(r),o=lw(r.converter,e);return Df(t,[nw(Cf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,cr.exists(!1))]).then(()=>s)}function Df(r,e){return function(s,o){const l=new Oi;return s.asyncQueue.enqueueAndForget(async()=>VO(await KO(s),o,l)),l.promise}(xg(r),e)}function dM(r,e,t){const s=t.docs.get(e._key),o=new cw(r);return new uw(r,o,e._key,s,new du(t.hasPendingWrites,t.fromCache),e.converter)}function hw(){return new Mg("serverTimestamp")}(function(e,t=!0){(function(o){Qo=o})($o),Xr(new Tr("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),p=new Ca(new sN(s.getProvider("auth-internal")),new lN(h,s.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(m.options.projectId,v)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),ur(tE,nE,e),ur(tE,nE,"esm2017")})();const fw="@firebase/installations",qg="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=1e4,mw=`w:${qg}`,pw="FIS_v2",mM="https://firebaseinstallations.googleapis.com/v1",pM=60*60*1e3,gM="installations",yM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ta=new wa(gM,yM,vM);function gw(r){return r instanceof Ir&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw({projectId:r}){return`${mM}/projects/${r}/installations`}function vw(r){return{token:r.token,requestStatus:2,expiresIn:EM(r.expiresIn),creationTime:Date.now()}}async function _w(r,e){const s=(await e.json()).error;return Ta.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Ew({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function _M(r,{refreshToken:e}){const t=Ew(r);return t.append("Authorization",TM(e)),t}async function Tw(r){const e=await r();return e.status>=500&&e.status<600?r():e}function EM(r){return Number(r.replace("s","000"))}function TM(r){return`${pw} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=yw(r),o=Ew(r),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const h={fid:t,authVersion:pw,appId:r.appId,sdkVersion:mw},p={method:"POST",headers:o,body:JSON.stringify(h)},d=await Tw(()=>fetch(s,p));if(d.ok){const m=await d.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:vw(m.authToken)}}else throw await _w("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=/^[cdef][\w-]{21}$/,Vp="";function AM(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=RM(r);return wM.test(t)?t:Vp}catch{return Vp}}function RM(r){return SM(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function ww(r,e){const t=Of(r);Aw(t,e),IM(t,e)}function Aw(r,e){const t=Sw.get(r);if(t)for(const s of t)s(e)}function IM(r,e){const t=CM();t&&t.postMessage({key:r,fid:e}),xM()}let ma=null;function CM(){return!ma&&"BroadcastChannel"in self&&(ma=new BroadcastChannel("[Firebase] FID Change"),ma.onmessage=r=>{Aw(r.data.key,r.data.fid)}),ma}function xM(){Sw.size===0&&ma&&(ma.close(),ma=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="firebase-installations-database",DM=1,ba="firebase-installations-store";let Wm=null;function Hg(){return Wm||(Wm=KT(NM,DM,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(ba)}}})),Wm}async function ef(r,e){const t=Of(r),o=(await Hg()).transaction(ba,"readwrite"),l=o.objectStore(ba),h=await l.get(t);return await l.put(e,t),await o.done,(!h||h.fid!==e.fid)&&ww(r,e.fid),e}async function Rw(r){const e=Of(r),s=(await Hg()).transaction(ba,"readwrite");await s.objectStore(ba).delete(e),await s.done}async function Mf(r,e){const t=Of(r),o=(await Hg()).transaction(ba,"readwrite"),l=o.objectStore(ba),h=await l.get(t),p=e(h);return p===void 0?await l.delete(t):await l.put(p,t),await o.done,p&&(!h||h.fid!==p.fid)&&ww(r,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(r){let e;const t=await Mf(r.appConfig,s=>{const o=OM(s),l=MM(r,o);return e=l.registrationPromise,l.installationEntry});return t.fid===Vp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function OM(r){const e=r||{fid:AM(),registrationStatus:0};return Iw(e)}function MM(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ta.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=PM(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kM(r)}:{installationEntry:e}}async function PM(r,e){try{const t=await bM(r,e);return ef(r.appConfig,t)}catch(t){throw gw(t)&&t.customData.serverCode===409?await Rw(r.appConfig):await ef(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function kM(r){let e=await eT(r.appConfig);for(;e.registrationStatus===1;)await bw(100),e=await eT(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Fg(r);return s||t}return e}function eT(r){return Mf(r,e=>{if(!e)throw Ta.create("installation-not-found");return Iw(e)})}function Iw(r){return VM(r)?{fid:r.fid,registrationStatus:0}:r}function VM(r){return r.registrationStatus===1&&r.registrationTime+dw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM({appConfig:r,heartbeatServiceProvider:e},t){const s=UM(r,t),o=_M(r,t),l=e.getImmediate({optional:!0});if(l){const m=await l.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const h={installation:{sdkVersion:mw,appId:r.appId}},p={method:"POST",headers:o,body:JSON.stringify(h)},d=await Tw(()=>fetch(s,p));if(d.ok){const m=await d.json();return vw(m)}else throw await _w("Generate Auth Token",d)}function UM(r,{fid:e}){return`${yw(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gg(r,e=!1){let t;const s=await Mf(r.appConfig,l=>{if(!Cw(l))throw Ta.create("not-registered");const h=l.authToken;if(!e&&BM(h))return l;if(h.requestStatus===1)return t=jM(r,e),l;{if(!navigator.onLine)throw Ta.create("app-offline");const p=HM(l);return t=zM(r,p),p}});return t?await t:s.authToken}async function jM(r,e){let t=await tT(r.appConfig);for(;t.authToken.requestStatus===1;)await bw(100),t=await tT(r.appConfig);const s=t.authToken;return s.requestStatus===0?Gg(r,e):s}function tT(r){return Mf(r,e=>{if(!Cw(e))throw Ta.create("not-registered");const t=e.authToken;return FM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function zM(r,e){try{const t=await LM(r,e),s=Object.assign(Object.assign({},e),{authToken:t});return await ef(r.appConfig,s),t}catch(t){if(gw(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Rw(r.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ef(r.appConfig,s)}throw t}}function Cw(r){return r!==void 0&&r.registrationStatus===2}function BM(r){return r.requestStatus===2&&!qM(r)}function qM(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+pM}function HM(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function FM(r){return r.requestStatus===1&&r.requestTime+dw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(r){const e=r,{installationEntry:t,registrationPromise:s}=await Fg(e);return s?s.catch(console.error):Gg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(r,e=!1){const t=r;return await KM(t),(await Gg(t,e)).token}async function KM(r){const{registrationPromise:e}=await Fg(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(r){if(!r||!r.options)throw Zm("App Configuration");if(!r.name)throw Zm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Zm(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Zm(r){return Ta.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="installations",YM="installations-internal",XM=r=>{const e=r.getProvider("app").getImmediate(),t=QM(e),s=Aa(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},WM=r=>{const e=r.getProvider("app").getImmediate(),t=Aa(e,xw).getImmediate();return{getId:()=>GM(t),getToken:o=>$M(t,o)}};function ZM(){Xr(new Tr(xw,XM,"PUBLIC")),Xr(new Tr(YM,WM,"PRIVATE"))}ZM();ur(fw,qg);ur(fw,qg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="analytics",JM="firebase_id",eP="origin",tP=60*1e3,nP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$g="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new lf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Yn=new wa("analytics","Analytics",rP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(r){if(!r.startsWith($g)){const e=Yn.create("invalid-gtag-resource",{gtagURL:r});return Ln.warn(e.message),""}return r}function Nw(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function sP(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function aP(r,e){const t=sP("firebase-js-sdk-policy",{createScriptURL:iP}),s=document.createElement("script"),o=`${$g}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function oP(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function lP(r,e,t,s,o,l){const h=s[o];try{if(h)await e[h];else{const d=(await Nw(t)).find(m=>m.measurementId===o);d&&await e[d.appId]}}catch(p){Ln.error(p)}r("config",o,l)}async function uP(r,e,t,s,o){try{let l=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const p=await Nw(t);for(const d of h){const m=p.find(E=>E.measurementId===d),v=m&&e[m.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),r("event",s,o||{})}catch(l){Ln.error(l)}}function cP(r,e,t,s){async function o(l,...h){try{if(l==="event"){const[p,d]=h;await uP(r,e,t,p,d)}else if(l==="config"){const[p,d]=h;await lP(r,e,t,s,p,d)}else if(l==="consent"){const[p,d]=h;r("consent",p,d)}else if(l==="get"){const[p,d,m]=h;r("get",p,d,m)}else if(l==="set"){const[p]=h;r("set",p)}else r(l,...h)}catch(p){Ln.error(p)}}return o}function hP(r,e,t,s,o){let l=function(...h){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=cP(l,r,e,t),{gtagCore:l,wrappedGtag:window[o]}}function fP(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($g)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=30,mP=1e3;class pP{constructor(e={},t=mP){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Dw=new pP;function gP(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function yP(r){var e;const{appId:t,apiKey:s}=r,o={method:"GET",headers:gP(s)},l=nP.replace("{app-id}",t),h=await fetch(l,o);if(h.status!==200&&h.status!==304){let p="";try{const d=await h.json();!((e=d.error)===null||e===void 0)&&e.message&&(p=d.error.message)}catch{}throw Yn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:p})}return h.json()}async function vP(r,e=Dw,t){const{appId:s,apiKey:o,measurementId:l}=r.options;if(!s)throw Yn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:s};throw Yn.create("no-api-key")}const h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new TP;return setTimeout(async()=>{p.abort()},tP),Ow({appId:s,apiKey:o,measurementId:l},h,p,e)}async function Ow(r,{throttleEndTimeMillis:e,backoffCount:t},s,o=Dw){var l;const{appId:h,measurementId:p}=r;try{await _P(s,e)}catch(d){if(p)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:h,measurementId:p};throw d}try{const d=await yP(r);return o.deleteThrottleMetadata(h),d}catch(d){const m=d;if(!EP(m)){if(o.deleteThrottleMetadata(h),p)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:h,measurementId:p};throw d}const v=Number((l=m==null?void 0:m.customData)===null||l===void 0?void 0:l.httpStatus)===503?R0(t,o.intervalMillis,dP):R0(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(h,E),Ln.debug(`Calling attemptFetch again in ${v} millis`),Ow(r,E,s,o)}}function _P(r,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);r.addEventListener(()=>{clearTimeout(l),s(Yn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EP(r){if(!(r instanceof Ir)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class TP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function bP(r,e,t,s,o){if(o&&o.global){r("event",t,s);return}else{const l=await e,h=Object.assign(Object.assign({},s),{send_to:l});r("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(){if(HT())try{await FT()}catch(r){return Ln.warn(Yn.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Ln.warn(Yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wP(r,e,t,s,o,l,h){var p;const d=vP(r);d.then(I=>{t[I.measurementId]=I.appId,r.options.measurementId&&I.measurementId!==r.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Ln.error(I)),e.push(d);const m=SP().then(I=>{if(I)return s.getId()}),[v,E]=await Promise.all([d,m]);fP(l)||aP(l,v.measurementId),o("js",new Date);const S=(p=h==null?void 0:h.config)!==null&&p!==void 0?p:{};return S[eP]="firebase",S.update=!0,E!=null&&(S[JM]=E),o("config",v.measurementId,S),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.app=e}_delete(){return delete Eu[this.app.options.appId],Promise.resolve()}}let Eu={},nT=[];const rT={};let Jm="dataLayer",RP="gtag",iT,Mw,sT=!1;function IP(){const r=[];if(qT()&&r.push("This is a browser extension environment."),TI()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=Yn.create("invalid-analytics-context",{errorInfo:e});Ln.warn(t.message)}}function CP(r,e,t){IP();const s=r.options.appId;if(!s)throw Yn.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Yn.create("no-api-key");if(Eu[s]!=null)throw Yn.create("already-exists",{id:s});if(!sT){oP(Jm);const{wrappedGtag:l,gtagCore:h}=hP(Eu,nT,rT,Jm,RP);Mw=l,iT=h,sT=!0}return Eu[s]=wP(r,nT,rT,e,iT,Jm,t),new AP(r)}function xP(r=$p()){r=qt(r);const e=Aa(r,tf);return e.isInitialized()?e.getImmediate():NP(r)}function NP(r,e={}){const t=Aa(r,tf);if(t.isInitialized()){const o=t.getImmediate();if(Ss(e,t.getOptions()))return o;throw Yn.create("already-initialized")}return t.initialize({options:e})}function DP(r,e,t,s){r=qt(r),bP(Mw,Eu[r.app.options.appId],e,t,s).catch(o=>Ln.error(o))}const aT="@firebase/analytics",oT="0.10.16";function OP(){Xr(new Tr(tf,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return CP(s,o,t)},"PUBLIC")),Xr(new Tr("analytics-internal",r,"PRIVATE")),ur(aT,oT),ur(aT,oT,"esm2017");function r(e){try{const t=e.getProvider(tf).getImmediate();return{logEvent:(s,o,l)=>DP(t,s,o,l)}}catch(t){throw Yn.create("interop-component-reg-failed",{reason:t})}}}OP();const MP={apiKey:"AIzaSyCc0cL3rcfrGeC-b1j3qQf6C6AZSN6L8v8",authDomain:"llega-unimet.firebaseapp.com",projectId:"llega-unimet",storageBucket:"llega-unimet.firebasestorage.app",messagingSenderId:"3835931466",appId:"1:3835931466:web:f13bd07386f3f8b7bbafb3",measurementId:"G-2KBB3V67W5"},Kg=QT(MP),wr=Jx(Kg),$e=ZO(Kg);xP(Kg);const Ui=()=>{const[r,e]=j.useState(null),[t,s]=j.useState(!0);return j.useEffect(()=>{const o=q2(wr,async l=>{if(l){const h=Ct($e,"users",l.uid),p=await Un(h);p.exists()?e({...l,...p.data()}):e(l)}else e(null);s(!1)});return()=>o()},[]),{currentUser:r,loading:t}},PP="/assets/unimet-Db0LjtrG.jpg",Pf="/assets/Logo-UNIMET-color-300-dpi-B6J-Ug4e.jpg",kP=[{label:"Deportivo",value:"deportivo",imageUrl:"https://static.wixstatic.com/media/709bfd_416a82333aea4bbdbe02930a0cbceb5b~mv2.webp/v1/fill/w_980,h_735,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/ciudad%20del%20deporte.webp"},{label:"Educativo",value:"educativo",imageUrl:"https://media.licdn.com/dms/image/v2/D4E22AQF9aFMThdhYFQ/feedshare-shrink_800/B4EZedbSjnHIAw-/0/1750692867160?e=2147483647&v=beta&t=C9ppJUdkOS3Nsj989BwNthEWr7ngcQoPjIlnxLdnGt4"},{label:"Tecnología",value:"tecnologia",imageUrl:"https://www.unimet.edu.ve/wp-content/uploads/2024/04/Centro-Mundo-X.jpg"},{label:"Exposiciones",value:"exposiciones",imageUrl:"https://www.unimet.edu.ve/wp-content/uploads/2025/06/FOTOS-DE-CERTIFICADOS-DE-AUDITORIA-1-1024x683.jpg"}],VP=({category:r,onClick:e})=>b.jsxs("div",{className:"space-card",style:{minHeight:"300px",display:"flex",flexDirection:"column"},children:[b.jsx("img",{src:r.imageUrl,alt:r.label,className:"space-card-img"}),b.jsxs("div",{className:"space-card-body",children:[b.jsx("h4",{children:r.label}),b.jsxs("button",{onClick:()=>e(r.value),className:"btn-secondary",style:{backgroundColor:"#007bff",color:"white",marginTop:"auto"},children:["Ir a espacios de ",r.label]})]})]}),LP=()=>{const r=on(),{currentUser:e}=Ui(),t=async()=>{try{await cf(wr),r("/")}catch(o){console.error("Error al cerrar sesión:",o),alert("Hubo un problema al cerrar tu sesión.")}},s=o=>{e&&e.role==="admin"?r(`/admin/espacios?categoria=${o}`):r(`/espacios?categoria=${o}`)};return b.jsxs("div",{className:"home-container",children:[b.jsxs("header",{className:"home-header",children:[b.jsx("h1",{className:"logo",onClick:()=>r("/"),style:{cursor:"pointer"},children:"llega"}),b.jsxs("nav",{children:[b.jsx(bn,{to:"/",children:"Inicio"}),e&&e.role!=="admin"&&b.jsx(bn,{to:"/mis-reservas",children:"Mis Reservas"}),e&&e.role==="admin"&&b.jsx(bn,{to:"/admin/espacios/crear",children:"Crear Espacio"})]}),e?b.jsxs("div",{className:"user-actions",children:[b.jsx("button",{onClick:()=>r("/profile"),className:"btn-profile",children:"Perfil"}),b.jsx("button",{onClick:t,className:"btn-logout",style:{backgroundColor:"red",color:"white"},children:"Cerrar Sesión"})]}):b.jsxs("div",{children:[b.jsx("button",{onClick:()=>r("/register"),className:"btn-primary",style:{width:"auto",padding:"8px 15px"},children:"Crear Cuenta"}),b.jsx("button",{onClick:()=>r("/login"),style:{marginLeft:"10px"},children:"Iniciar Sesión"})]})]}),b.jsxs("main",{children:[b.jsxs("section",{className:"hero-section",style:{backgroundImage:`url(${PP})`},children:[b.jsx("div",{className:"logo-circulo",style:{background:"white",borderRadius:"50%",padding:"20px",marginBottom:"20px",display:"flex",justifyContent:"center",alignItems:"center"},children:b.jsx("h1",{className:"logo",style:{fontSize:"3rem",color:"black"},children:"llega"})}),b.jsx("h2",{children:"Llega al espacio que quieras"})]}),b.jsxs("section",{className:"spaces-section",children:[b.jsx("h3",{children:"Categorías"}),b.jsx("div",{className:"spaces-grid",children:kP.map(o=>b.jsx(VP,{category:o,onClick:s},o.value))})]})]}),b.jsxs("footer",{className:"home-footer",children:[b.jsx("div",{style:{marginBottom:"20px"},children:b.jsx("img",{src:Pf,alt:"Logo Unimet",style:{width:"200px"}})}),b.jsx("p",{children:"© 2025 Universidad Metropolitana. Todos los derechos reservados."})]})]})},UP=()=>{const[r,e]=j.useState(""),[t,s]=j.useState(""),[o,l]=j.useState(null),[h,p]=j.useState(!1),d=on(),m=async E=>{if(E.preventDefault(),!h){p(!0),l(null);try{await j2(wr,r,t),d("/")}catch(S){l("Error al iniciar sesión. Verifica tus credenciales."),console.error("Error en login con email:",S)}p(!1)}},v=async E=>{if(!h){p(!0),l(null);try{const I=(await lx(wr,E)).user,x=Ct($e,"users",I.uid);(await Un(x)).exists()||(console.log("Usuario nuevo detectado desde proveedor externo, creando perfil en Firestore..."),await jg(x,{uid:I.uid,nombre:I.displayName||"Usuario",apellido:"",carnet:"",nombreDeUsuario:I.displayName||I.email,correo:I.email,descripcion:"¡Hola! Soy un nuevo usuario en Llega."})),d("/")}catch(S){S.code==="auth/account-exists-with-different-credential"?l("Ya existe una cuenta con este correo, pero con un método de inicio de sesión diferente."):l("Error al iniciar sesión. Inténtalo de nuevo."),console.error("Error en login con proveedor:",S)}p(!1)}};return b.jsx("div",{className:"auth-container",children:b.jsxs("div",{className:"auth-form",children:[b.jsx("h2",{className:"auth-title",children:"llega"}),b.jsxs("form",{onSubmit:m,children:[b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Correo Electrónico"}),b.jsx("input",{type:"email",placeholder:"example@correo.unimet.edu.ve",value:r,onChange:E=>e(E.target.value),required:!0,disabled:h})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Contraseña"}),b.jsx("input",{type:"password",value:t,onChange:E=>s(E.target.value),required:!0,disabled:h})]}),b.jsx(bn,{to:"/forgot-password",className:"forgot-password",children:"¿Has olvidado la contraseña?"}),o&&b.jsx("p",{className:"error-message",style:{textAlign:"center"},children:o}),b.jsx("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Iniciando...":"Iniciar sesión"})]}),b.jsx("div",{className:"divider",children:"o iniciar sesión con"}),b.jsxs("div",{className:"provider-buttons",children:[b.jsx("button",{onClick:()=>v(new Ri),className:"btn-google",disabled:h,"aria-label":"Iniciar sesión con Google",children:"G"}),b.jsx("button",{onClick:()=>v(new Ii),className:"btn-github",disabled:h,"aria-label":"Iniciar sesión con GitHub",children:b.jsx("svg",{height:"24",viewBox:"0 0 16 16",version:"1.1",width:"24",children:b.jsx("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.19.01-.82.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.43 1.1.16 1.92.08 2.12.51.56.82 1.28.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21-.15.46-.55.38A8.013 8.013 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})})})]}),b.jsxs("div",{className:"switch-auth",children:["¿No tienes una cuenta? ",b.jsx(bn,{to:"/register",children:"Regístrate"})]})]})})},jP=()=>{const[r,e]=j.useState({}),[t,s]=j.useState(null),[o,l]=j.useState(!1),h=on(),p=m=>{e(v=>({...v,[m.target.name]:m.target.value}))},d=async m=>{if(m.preventDefault(),l(!0),s(null),console.log("Form data:",r),r.password!==r.confirmPassword){s("Las contraseñas no coinciden."),l(!1);return}try{const E=(await U2(wr,r.correo,r.password)).user;console.log("User created:",E),await jg(Ct($e,"users",E.uid),{uid:E.uid,nombre:r.nombre,apellido:r.apellido,carnet:r.carnet,nombreDeUsuario:r.usuario,correo:r.correo}),h("/")}catch(v){console.error("Registration error:",v),v.code==="auth/email-already-in-use"?s("Este correo electrónico ya está registrado."):v.code==="auth/weak-password"?s("La contraseña debe tener al menos 6 caracteres."):s("Ocurrió un error al crear la cuenta.")}finally{l(!1)}};return b.jsx("div",{className:"auth-container",children:b.jsxs("div",{className:"auth-form",children:[b.jsx("h2",{className:"auth-title",children:"Crear Cuenta"}),b.jsxs("form",{onSubmit:d,children:[b.jsxs("div",{className:"input-row",children:[b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Nombre"}),b.jsx("input",{type:"text",name:"nombre",onChange:p,required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Apellido"}),b.jsx("input",{type:"text",name:"apellido",onChange:p,required:!0})]})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Carnet"}),b.jsx("input",{type:"text",name:"carnet",onChange:p,required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Correo Unimet"}),b.jsx("input",{type:"email",name:"correo",onChange:p,required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Nombre de usuario"}),b.jsx("input",{type:"text",name:"usuario",onChange:p,required:!0})]}),b.jsxs("div",{className:"input-row",children:[b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Contraseña"}),b.jsx("input",{type:"password",name:"password",onChange:p,required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Confirmar Contraseña"}),b.jsx("input",{type:"password",name:"confirmPassword",onChange:p,required:!0})]})]}),t&&b.jsx("p",{className:"error-message",children:t}),b.jsx("button",{type:"submit",className:"btn-primary",disabled:o,children:o?"Creando cuenta...":"Crear Cuenta"})]}),b.jsxs("div",{className:"switch-auth",children:["¿Ya tienes una cuenta? ",b.jsx(bn,{to:"/login",children:"Iniciar sesión"})]})]})})},zP=()=>{const r=on(),[e,t]=j.useState(null),[s,o]=j.useState(!0),[l,h]=j.useState(""),[p,d]=j.useState("");j.useEffect(()=>{(async()=>{var I,x;const S=wr.currentUser;if(S){const P=Ct($e,"users",S.uid);try{const M=await Un(P);if(M.exists())t(M.data());else{const Y={uid:S.uid,nombre:((I=S.displayName)==null?void 0:I.split(" ")[0])||"",apellido:((x=S.displayName)==null?void 0:x.split(" ")[1])||"",carnet:"",nombreDeUsuario:S.displayName||S.email,correo:S.email,descripcion:"¡Hola! Soy un nuevo usuario en Llega."};await jg(P,Y),t(Y)}}catch(M){console.error("Error al cargar o crear el perfil:",M),h("No se pudieron cargar los datos del perfil.")}}o(!1)})()},[]);const m=E=>{const{name:S,value:I}=E.target;t(x=>({...x,[S]:I}))},v=async E=>{E.preventDefault();const S=wr.currentUser;if(S){d(""),h("");try{const I=Ct($e,"users",S.uid);await zg(I,e),d("¡Perfil actualizado con éxito!"),setTimeout(()=>d(""),3e3)}catch(I){console.error("Error al actualizar el perfil:",I),h("Hubo un error al guardar los cambios.")}}};return s?b.jsx("div",{className:"page-container",children:"Cargando perfil..."}):l?b.jsx("div",{className:"page-container",children:l}):b.jsx("div",{className:"page-container",children:b.jsx("div",{className:"form-container",children:b.jsxs("form",{onSubmit:v,className:"profile-form",children:[b.jsx("h2",{className:"form-title",children:"Modificar Perfil"}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Nombre de usuario"}),b.jsx("input",{type:"text",name:"nombreDeUsuario",value:(e==null?void 0:e.nombreDeUsuario)||"",onChange:m})]}),b.jsxs("div",{className:"input-row",children:[b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Nombre"}),b.jsx("input",{type:"text",name:"nombre",value:(e==null?void 0:e.nombre)||"",onChange:m})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Apellido"}),b.jsx("input",{type:"text",name:"apellido",value:(e==null?void 0:e.apellido)||"",onChange:m})]})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Carnet"}),b.jsx("input",{type:"text",name:"carnet",value:(e==null?void 0:e.carnet)||"",onChange:m})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Descripción"}),b.jsx("textarea",{name:"descripcion",value:(e==null?void 0:e.descripcion)||"",onChange:m,rows:"4"})]}),l&&b.jsx("p",{className:"error-message",children:l}),p&&b.jsx("p",{className:"success-message",children:p}),b.jsx("button",{type:"submit",className:"btn-primary",children:"Actualizar Información"}),b.jsx("button",{type:"button",onClick:()=>r("/"),className:"btn-cancel",children:"Cancelar"})]})})})},dn=[];for(let r=0;r<256;++r)dn.push((r+256).toString(16).slice(1));function BP(r,e=0){return(dn[r[e+0]]+dn[r[e+1]]+dn[r[e+2]]+dn[r[e+3]]+"-"+dn[r[e+4]]+dn[r[e+5]]+"-"+dn[r[e+6]]+dn[r[e+7]]+"-"+dn[r[e+8]]+dn[r[e+9]]+"-"+dn[r[e+10]]+dn[r[e+11]]+dn[r[e+12]]+dn[r[e+13]]+dn[r[e+14]]+dn[r[e+15]]).toLowerCase()}let ep;const qP=new Uint8Array(16);function HP(){if(!ep){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ep=crypto.getRandomValues.bind(crypto)}return ep(qP)}const FP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lT={randomUUID:FP};function GP(r,e,t){var o;if(lT.randomUUID&&!r)return lT.randomUUID();r=r||{};const s=r.random??((o=r.rng)==null?void 0:o.call(r))??HP();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,BP(s)}const $P=()=>{const{spaceId:r}=Fo(),[e]=Fp(),t=e.get("fecha"),s=e.get("hora"),[o,l]=j.useState(null),[h,p]=j.useState(!0),[d,m]=j.useState(null),{currentUser:v}=Ui(),E=on(),[S,I]=j.useState([]),[x,P]=j.useState(!0);j.useEffect(()=>{(async()=>{if(!r){m("No se proporcionó un ID de espacio."),p(!1);return}try{const oe=Ct($e,"spaces",r),le=await Un(oe);le.exists()?l({id:le.id,...le.data()}):m("El documento del espacio no fue encontrado.")}catch(oe){console.error("Error al obtener el documento:",oe),m("Ocurrió un error técnico al buscar el espacio.")}finally{p(!1)}})()},[r]),j.useEffect(()=>{(async()=>{if(r){P(!0);try{const oe=Mo(hr($e,"feedback"),gs("spaceId","==",r)),ve=(await ga(oe)).docs.map(C=>({id:C.id,...C.data()})),V=await Promise.all(ve.map(async C=>{let N="";if(C.userId)try{const k=await Un(Ct($e,"users",C.userId));N=k.exists()&&k.data().name||""}catch{N=""}return{...C,userName:N}}));I(V)}catch(oe){console.error("Error fetching feedbacks:",oe)}finally{P(!1)}}})()},[r]);const M=async()=>{if(!v){E("/login");return}try{const $=GP(),oe={userId:v.uid,spaceId:o.id,spaceName:o.name,status:"pending",createdAt:hw(),price:o.price,fecha:t||null,hora:s||null,verificationCode:$},le=await Ku(hr($e,"reservations"),oe);E(`/pago/${le.id}`)}catch($){console.error("Error al crear la reserva: ",$),alert("Hubo un problema al intentar crear tu reserva.")}},Y=$=>b.jsx("div",{style:{display:"flex",gap:2},children:[1,2,3,4,5].map(oe=>b.jsx("span",{style:{color:oe<=$?"#FFD600":"#ccc",fontSize:20},children:"★"},oe))}),ee=($,oe=80)=>$.length>oe?$.slice(0,oe)+"…":$;return h?b.jsx("div",{className:"page-container",children:b.jsx("h2",{children:"Cargando..."})}):d||!o?b.jsxs("div",{className:"page-container",style:{textAlign:"center"},children:[b.jsx("h1",{children:"Espacio no encontrado"}),b.jsx("p",{children:d||"El espacio que buscas no existe o fue eliminado."}),b.jsx(bn,{to:"/",children:"Volver al inicio"})]}):b.jsxs("div",{className:"page-container",style:{maxWidth:"500px",margin:"40px auto",textAlign:"center"},children:[b.jsx("h1",{className:"page-title",children:"Página de Reserva"}),b.jsxs("div",{className:"reservation-card-detail",style:{background:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},children:[b.jsx("img",{src:o.imageUrl,alt:o.name,style:{width:"100%",borderRadius:"8px",marginBottom:"20px"}}),b.jsx("h2",{children:o.name}),b.jsx("p",{children:o.description}),b.jsx("hr",{style:{margin:"15px 0"}}),b.jsx("p",{children:b.jsxs("strong",{children:["Precio por hora: $",o.price]})}),b.jsxs("p",{children:[b.jsx("strong",{children:"Fecha seleccionada:"})," ",t||"No seleccionada"]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Hora seleccionada:"})," ",s||"No seleccionada"]}),o.supervisorId?b.jsxs("p",{children:["Supervisor de espacio: ",b.jsx("strong",{children:o.supervisorId})]}):b.jsx("p",{children:"Supervisor de espacio: No asignado"}),b.jsx("button",{onClick:M,className:"btn-primary",style:{width:"100%",marginTop:"20px"},children:"Reservar Ya"})]}),b.jsxs("div",{style:{marginTop:40,display:"flex",flexDirection:"column",alignItems:"center"},children:[b.jsx("h3",{style:{marginBottom:16,textAlign:"center"},children:"Comentarios de otros usuarios"}),x?b.jsx("p",{style:{color:"#888",textAlign:"center"},children:"Cargando feedbacks..."}):S.length===0?b.jsx("p",{style:{color:"#888",textAlign:"center"},children:"Aún no hay feedback para este espacio."}):b.jsx("div",{style:{display:"flex",overflowX:"auto",gap:20,paddingBottom:10,justifyContent:"center"},children:S.map($=>b.jsxs("div",{onClick:()=>E(`/feedback-detail/${$.id}`),style:{minWidth:260,maxWidth:260,background:"#fff",border:"1px solid #ddd",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:18,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"flex-start",transition:"box-shadow 0.2s"},children:[Y($.stars),b.jsx("div",{style:{margin:"10px 0",color:"#333",fontSize:15},children:ee($.comment)}),b.jsx("div",{style:{fontSize:13,color:"#888"},children:$.userName?`Usuario: ${$.userName}`:""})]},$.id))})]})]})},KP=()=>b.jsxs("div",{children:[b.jsx("h3",{children:"Gestión de Tickets"}),b.jsx("p",{children:"La funcionalidad para gestionar tickets de soporte o problemas se implementará aquí."}),b.jsx("p",{children:"Actualmente no hay tickets."})]}),QP=()=>{const[r,e]=j.useState([]),[t,s]=j.useState({name:"",type:"",description:"",price:0,imageUrl:""}),o=async()=>{const d=await ga(hr($e,"spaces"));e(d.docs.map(m=>({id:m.id,...m.data()})))};j.useEffect(()=>{o()},[]);const l=d=>{const{name:m,value:v}=d.target;s(E=>({...E,[m]:v}))},h=async d=>{if(d.preventDefault(),!t.name||!t.type){alert("Nombre y tipo son obligatorios.");return}await Ku(hr($e,"spaces"),{...t,price:Number(t.price)}),s({name:"",type:"",description:"",price:0,imageUrl:""}),o()},p=async d=>{window.confirm("¿Estás seguro de que quieres eliminar este espacio?")&&(await Bg(Ct($e,"spaces",d)),o())};return b.jsxs("div",{children:[b.jsx("h3",{children:"Añadir Nuevo Espacio"}),b.jsxs("form",{onSubmit:h,className:"space-form",children:[b.jsx("input",{name:"name",value:t.name,onChange:l,placeholder:"Nombre del Espacio",required:!0}),b.jsx("input",{name:"type",value:t.type,onChange:l,placeholder:"Tipo (ej: Educativo)",required:!0}),b.jsx("textarea",{name:"description",value:t.description,onChange:l,placeholder:"Descripción"}),b.jsx("input",{name:"price",value:t.price,type:"number",onChange:l,placeholder:"Precio"}),b.jsx("input",{name:"imageUrl",value:t.imageUrl,onChange:l,placeholder:"URL de la Imagen"}),b.jsx("button",{type:"submit",className:"btn-primary",children:"Añadir Espacio"})]}),b.jsx("hr",{style:{margin:"30px 0"}}),b.jsx("h3",{children:"Lista de Espacios Actuales"}),b.jsx("ul",{className:"spaces-list",children:r.map(d=>b.jsxs("li",{children:[b.jsxs("span",{children:[d.name," (",d.type,")"]}),b.jsx("div",{children:b.jsx("button",{onClick:()=>p(d.id),className:"btn-delete",children:"Eliminar"})})]},d.id))})]})},YP=()=>{const[r,e]=j.useState("spaces");return b.jsxs("div",{className:"page-container",children:[b.jsx("h1",{className:"page-title",children:"Panel de Administración"}),b.jsxs("div",{className:"admin-nav",children:[b.jsx("button",{onClick:()=>e("tickets"),className:r==="tickets"?"active":"",children:"Gestionar Tickets"}),b.jsx("button",{onClick:()=>e("spaces"),className:r==="spaces"?"active":"",children:"Gestionar Espacios"})]}),b.jsxs("div",{className:"admin-content",children:[r==="tickets"&&b.jsx(KP,{}),r==="spaces"&&b.jsx(QP,{})]})]})};function XP(r,e){if(!r||!e)return null;const[t,s,o]=r.split("-").map(Number),[l,h]=e.split(":").map(Number),p=new Date(t,s-1,o,l,h);return p.setHours(p.getHours()+1),p}const WP={width:320,minHeight:180,background:"#fff",border:"1px solid #ddd",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:20,margin:12,display:"flex",flexDirection:"column",justifyContent:"space-between",boxSizing:"border-box"},ZP=()=>{const[r,e]=j.useState([]),[t,s]=j.useState(!0),[o,l]=j.useState(null),{currentUser:h}=Ui(),p=on();j.useEffect(()=>{if(!h){s(!1);return}(async()=>{try{const M=Mo(hr($e,"reservations"),gs("userId","==",h.uid)),ee=(await ga(M)).docs.map(oe=>({id:oe.id,...oe.data()})),$=await Promise.all(ee.map(async oe=>{if(!oe.spaceId)return{...oe};const le=Ct($e,"spaces",oe.spaceId),ve=await Un(le),V=ve.exists()?ve.data():{};return{...oe,spaceCategory:V.type||"",spaceImage:V.imageUrl||"/placeholder.jpg"}}));e($)}catch{l("Error loading reservations.")}finally{s(!1)}})()},[h]);const d=async()=>{try{await cf(wr),p("/")}catch{alert("Hubo un problema al cerrar tu sesión.")}},m=async P=>{try{await Bg(Ct($e,"reservations",P)),e(M=>M.filter(Y=>Y.id!==P))}catch(M){console.error("Error deleting reservation:",M),alert("No se pudo eliminar la reserva.")}},v=P=>{p(`/qr/${P}`)},E=new Date,S=[],I=[];r.forEach(P=>{const M=XP(P.fecha,P.hora);M&&M<E?I.push(P):S.push(P)});const x=(P,M=!0,Y=!1,ee=!1)=>b.jsxs("div",{style:WP,children:[b.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[b.jsx("img",{src:P.spaceImage||"/placeholder.jpg",alt:P.spaceName,style:{width:70,height:70,objectFit:"cover",borderRadius:8,marginRight:16}}),b.jsxs("div",{style:{flex:1},children:[b.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#111"},children:P.spaceName}),b.jsx("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:P.spaceCategory==="tecnologia"?"Espacio Tecnológico":P.spaceCategory==="exposiciones"?"Espacio de Exposiciones":`Espacio ${P.spaceCategory||"desconocido"}`}),b.jsxs("div",{style:{fontSize:15,color:"#333",marginBottom:8},children:[P.fecha?P.fecha:"No especificada",P.hora?` a las ${P.hora}`:""]})]})]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[b.jsxs("span",{style:{fontSize:15,color:"#333"},children:["Precio: $",P.price]}),M&&b.jsx("button",{style:{marginLeft:16,background:"#1976d2",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:600,cursor:"pointer"},onClick:()=>v(P.id),children:"Ver QR"}),Y&&b.jsx("button",{onClick:()=>m(P.id),style:{marginLeft:16,background:"#e53935",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:600,cursor:"pointer"},children:"Eliminar"}),ee&&b.jsx("button",{onClick:()=>p(`/feedback/${P.id}`),style:{marginLeft:16,background:"#ff7300",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:600,cursor:"pointer"},children:"Dejar Feedback"})]})]},P.id);return b.jsxs("div",{className:"home-container",children:[b.jsxs("header",{className:"home-header",children:[b.jsx("h1",{className:"logo",onClick:()=>p("/"),style:{cursor:"pointer"},children:"llega"}),b.jsxs("nav",{children:[b.jsx(bn,{to:"/",children:"Inicio"}),h&&b.jsx(bn,{to:"/mis-reservas",children:"Mis Reservas"})]}),h?b.jsxs("div",{className:"user-actions",children:[b.jsx("button",{onClick:()=>p("/profile"),className:"btn-profile",children:"Perfil"}),b.jsx("button",{onClick:d,className:"btn-logout",style:{backgroundColor:"red",color:"white"},children:"Cerrar Sesión"})]}):b.jsxs("div",{children:[b.jsx("button",{onClick:()=>p("/register"),className:"btn-primary",style:{width:"auto",padding:"8px 15px"},children:"Crear Cuenta"}),b.jsx("button",{onClick:()=>p("/login"),style:{marginLeft:"10px"},children:"Iniciar Sesión"})]})]}),b.jsx("main",{children:b.jsxs("div",{className:"page-container",style:{padding:"32px"},children:[b.jsx("h2",{style:{textAlign:"center",marginBottom:"32px"},children:"Mis Reservas"}),t?b.jsx("h2",{style:{textAlign:"center"},children:"Cargando tus reservas..."}):o?b.jsx("h2",{style:{textAlign:"center"},children:o}):h?S.length===0?b.jsx("p",{style:{textAlign:"center"},children:"Aún no tienes ninguna reserva activa."}):b.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"flex-start"},children:S.map(P=>x(P,!0,!1,!1))}):b.jsx("h2",{style:{textAlign:"center"},children:"Debes iniciar sesión para ver tus reservas."}),b.jsx("h2",{style:{textAlign:"center",margin:"48px 0 32px 0"},children:"Reservas Anteriores"}),I.length===0?b.jsx("p",{style:{textAlign:"center"},children:"No tienes reservas anteriores."}):b.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"flex-start"},children:I.map(P=>x(P,!1,!0,!0))})]})}),b.jsxs("footer",{className:"home-footer",children:[b.jsx("div",{style:{marginBottom:"20px"},children:b.jsx("img",{src:Pf,alt:"Logo Unimet",style:{width:"200px"}})}),b.jsx("p",{children:"© 2025 Universidad Metropolitana. Todos los derechos reservados."})]})]})};/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(r){r.INITIAL="initial",r.PENDING="pending",r.REJECTED="rejected",r.RESOLVED="resolved"})(kn||(kn={}));var bs;(function(r){r.LOADING_STATUS="setLoadingStatus",r.RESET_OPTIONS="resetOptions",r.SET_BRAINTREE_INSTANCE="braintreeInstance"})(bs||(bs={}));var uT;(function(r){r.NUMBER="number",r.CVV="cvv",r.EXPIRATION_DATE="expirationDate",r.EXPIRATION_MONTH="expirationMonth",r.EXPIRATION_YEAR="expirationYear",r.POSTAL_CODE="postalCode"})(uT||(uT={}));var zt=function(){return zt=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},zt.apply(this,arguments)};function Pw(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function cT(r,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return r.concat(l||Array.prototype.slice.call(e))}var Ou="data-react-paypal-script-id",pa={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},JP="Failed to load the PayPal JS SDK script.",kw="paypal",e4="usePayPalScriptReducer must be used within a PayPalScriptProvider";function t4(r){return r===void 0&&(r=kw),window[r]}function n4(r){for(var e="",t=0;t<r.length;t++){var s=r[t].charCodeAt(0)*t;r[t+1]&&(s+=r[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function r4(r){var e=r.reactComponentName,t=r.sdkComponentKey,s=r.sdkRequestedComponents,o=s===void 0?"":s,l=r.sdkDataNamespace,h=l===void 0?kw:l,p=t.charAt(0).toUpperCase().concat(t.substring(1)),d="Unable to render <".concat(e," /> because window.").concat(h,".").concat(p," is undefined."),m=typeof o=="string"?o:o.join(",");if(!m.includes(t)){var v=[m,t].filter(Boolean).join();d+=`
To fix the issue, add '`.concat(t,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(v,"'}}>`.")}return d}function Vw(r){var e=r,t=Ou;e[t];var s=Pw(e,[t+""]);return"react-paypal-js-".concat(n4(JSON.stringify(s)))}function i4(r){var e=self.document.querySelector("script[".concat(Ou,'="').concat(r,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function s4(r,e){var t,s;switch(e.type){case bs.LOADING_STATUS:return typeof e.value=="object"?zt(zt({},r),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):zt(zt({},r),{loadingStatus:e.value});case bs.RESET_OPTIONS:return i4(r.options[Ou]),zt(zt({},r),{loadingStatus:kn.PENDING,options:zt(zt((t={},t[pa.DATA_SDK_INTEGRATION_SOURCE]=pa.DATA_LIBRARY_VALUE,t),e.value),(s={},s[Ou]="".concat(Vw(e.value)),s))});case bs.SET_BRAINTREE_INSTANCE:return zt(zt({},r),{braintreePayPalCheckoutInstance:e.value});default:return r}}var Lw=j.createContext(null);function a4(r){if(typeof(r==null?void 0:r.dispatch)=="function"&&r.dispatch.length!==0)return r;throw new Error(e4)}function o4(){var r=a4(j.useContext(Lw)),e=zt(zt({},r),{isInitial:r.loadingStatus===kn.INITIAL,isPending:r.loadingStatus===kn.PENDING,isResolved:r.loadingStatus===kn.RESOLVED,isRejected:r.loadingStatus===kn.REJECTED});return[e,r.dispatch]}j.createContext({});function l4(r){var e=j.useRef(new Proxy({},{get:function(t,s,o){return typeof t[s]=="function"?function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return t[s].apply(t,l)}:Reflect.get(t,s,o)}}));return e.current=Object.assign(e.current,r),e.current}var Qg=function(r){var e,t=r.className,s=t===void 0?"":t,o=r.disabled,l=o===void 0?!1:o,h=r.children,p=r.forceReRender,d=p===void 0?[]:p,m=Pw(r,["className","disabled","children","forceReRender"]),v=l?{opacity:.38}:{},E="".concat(s," ").concat(l?"paypal-buttons-disabled":"").trim(),S=j.useRef(null),I=j.useRef(null),x=l4(m),P=o4()[0],M=P.isResolved,Y=P.options,ee=j.useState(null),$=ee[0],oe=ee[1],le=j.useState(!0),ve=le[0],V=le[1],C=j.useState(null),N=C[1];function k(){I.current!==null&&I.current.close().catch(function(){})}return!((e=I.current)===null||e===void 0)&&e.updateProps&&I.current.updateProps({message:m.message}),j.useEffect(function(){if(M===!1)return k;var L=t4(Y.dataNamespace);if(L===void 0||L.Buttons===void 0)return N(function(){throw new Error(r4({reactComponentName:Qg.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:Y.components,sdkDataNamespace:Y[pa.DATA_NAMESPACE]}))}),k;var z=function(D,ot){oe(ot),typeof m.onInit=="function"&&m.onInit(D,ot)};try{I.current=L.Buttons(zt(zt({},x),{onInit:z}))}catch(D){return N(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(D))})}return I.current.isEligible()===!1?(V(!1),k):(S.current&&I.current.render(S.current).catch(function(D){S.current===null||S.current.children.length===0||N(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(D))})}),k)},cT(cT([M],d,!0),[m.fundingSource],!1)),j.useEffect(function(){$!==null&&(l===!0?$.disable().catch(function(){}):$.enable().catch(function(){}))},[l,$]),wt.createElement(wt.Fragment,null,ve?wt.createElement("div",{ref:S,style:v,className:E}):h)};Qg.displayName="PayPalButtons";function u4(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function c4(r,e){var t=document.querySelector('script[src="'.concat(r,'"]'));if(t===null)return null;var s=Uw(r,e),o=t.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(s.dataset).length)return null;var l=!0;return Object.keys(o.dataset).forEach(function(h){o.dataset[h]!==s.dataset[h]&&(l=!1)}),l?t:null}function h4(r){var e=r.url,t=r.attributes,s=r.onSuccess,o=r.onError,l=Uw(e,t);l.onerror=o,l.onload=s,document.head.insertBefore(l,document.head.firstElementChild)}function f4(r){var e=r.sdkBaseUrl,t=r.environment,s=u4(r,["sdkBaseUrl","environment"]),o=e||p4(t),l=s,h=Object.keys(l).filter(function(m){return typeof l[m]<"u"&&l[m]!==null&&l[m]!==""}).reduce(function(m,v){var E=l[v].toString();return v=d4(v),v.substring(0,4)==="data"||v==="crossorigin"?m.attributes[v]=E:m.queryParams[v]=E,m},{queryParams:{},attributes:{}}),p=h.queryParams,d=h.attributes;return p["merchant-id"]&&p["merchant-id"].indexOf(",")!==-1&&(d["data-merchant-id"]=p["merchant-id"],p["merchant-id"]="*"),{url:"".concat(o,"?").concat(m4(p)),attributes:d}}function d4(r){var e=function(t,s){return(s?"-":"")+t.toLowerCase()};return r.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function m4(r){var e="";return Object.keys(r).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+r[t]}),e}function p4(r){return r==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function Uw(r,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=r,Object.keys(e).forEach(function(s){t.setAttribute(s,e[s]),s==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function g4(r,e){if(e===void 0&&(e=Promise),jw(r,e),typeof document>"u")return e.resolve(null);var t=f4(r),s=t.url,o=t.attributes,l=o["data-namespace"]||"paypal",h=hT(l);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),c4(s,o)&&h?e.resolve(h):y4({url:s,attributes:o},e).then(function(){var p=hT(l);if(p)return p;throw new Error("The window.".concat(l," global variable is not available."))})}function y4(r,e){e===void 0&&(e=Promise),jw(r,e);var t=r.url,s=r.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,l){if(typeof document>"u")return o();h4({url:t,attributes:s,onSuccess:function(){return o()},onError:function(){var h=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return l(h)}})})}function hT(r){return window[r]}function jw(r,e){if(typeof r!="object"||r===null)throw new Error("Expected an options object.");var t=r.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var v4=function(r){var e,t=r.options,s=t===void 0?{clientId:"test"}:t,o=r.children,l=r.deferLoading,h=l===void 0?!1:l,p=j.useReducer(s4,{options:zt(zt({},s),(e={},e[pa.DATA_JS_SDK_LIBRARY]=pa.DATA_LIBRARY_VALUE,e[pa.DATA_SDK_INTEGRATION_SOURCE]=pa.DATA_LIBRARY_VALUE,e[Ou]="".concat(Vw(s)),e)),loadingStatus:h?kn.INITIAL:kn.PENDING}),d=p[0],m=p[1];return j.useEffect(function(){if(h===!1&&d.loadingStatus===kn.INITIAL)return m({type:bs.LOADING_STATUS,value:kn.PENDING});if(d.loadingStatus===kn.PENDING){var v=!0;return g4(d.options).then(function(){v&&m({type:bs.LOADING_STATUS,value:kn.RESOLVED})}).catch(function(E){console.error("".concat(JP," ").concat(E)),v&&m({type:bs.LOADING_STATUS,value:{state:kn.REJECTED,message:String(E)}})}),function(){v=!1}}},[d.options,h,d.loadingStatus]),wt.createElement(Lw.Provider,{value:zt(zt({},d),{dispatch:m})},o)};function fT(){}j.createContext({cardFieldsForm:null,fields:{},registerField:fT,unregisterField:fT});const _4="AW949SN6ow8koxf23Cwb7XDWD2aLiR_VPm9KZSuRSD83JJ2h-IMetZhHHHnzpVDyzI4Z3evu01TUvUqS",E4=()=>{const{reservationId:r}=Fo(),[e,t]=j.useState(null),[s,o]=j.useState(null),l=on();return j.useEffect(()=>{(async()=>{if(r)try{const p=Ct($e,"reservations",r),d=await Un(p);d.exists()?t(d.data()):o("La reserva que intentas pagar no existe.")}catch{o("Error al cargar los datos de la reserva.")}})()},[r]),s?b.jsxs("div",{className:"page-container",children:[b.jsx("h2",{children:"Error"}),b.jsx("p",{children:s})]}):e?b.jsxs("div",{className:"page-container",style:{maxWidth:"500px",margin:"40px auto",textAlign:"center"},children:[b.jsx("h2",{children:"Confirmar Pago"}),b.jsxs("div",{className:"reservation-summary",style:{background:"#f9f9f9",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:[b.jsx("p",{children:"Estás a punto de pagar por tu reserva de:"}),b.jsx("h3",{style:{margin:"10px 0"},children:e.spaceName}),b.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:["Total a Pagar: ",b.jsxs("strong",{children:["$",e.price," USD"]})]})]}),b.jsx(v4,{options:{"client-id":_4,currency:"USD"},children:b.jsx(Qg,{style:{layout:"vertical"},createOrder:(h,p)=>p.order.create({purchase_units:[{description:`Reserva para ${e.spaceName} en Llega Unimet`,amount:{value:e.price.toString()}}]}),onApprove:async(h,p)=>{const d=await p.order.capture();console.log("Pago exitoso:",d);try{const m=Ct($e,"reservations",r);await zg(m,{status:"paid",paypalOrderId:d.id,payerEmail:d.payer.email_address}),alert("¡Pago completado con éxito!"),l("/mis-reservas")}catch(m){console.error("Error al actualizar la reserva:",m),alert("Tu pago fue procesado, pero hubo un error al confirmar tu reserva. Contacta a soporte.")}},onError:h=>{console.error("Error de PayPal:",h),alert("Ocurrió un error con el pago. Por favor, inténtalo de nuevo.")}})})]}):b.jsx("div",{className:"page-container",children:b.jsx("h2",{children:"Cargando..."})})},lr=({children:r})=>{const{currentUser:e,loading:t}=Ui();return t?b.jsx("div",{children:"Cargando, por favor espera..."}):e?r:b.jsx(CT,{to:"/"})},T4=r=>{const[e,t]=j.useState(!1),[s,o]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(r){const h=Ct($e,"users",r.uid),p=await Un(h);p.exists()&&p.data().role==="admin"&&t(!0)}o(!1)})()},[r]),{isAdmin:e,loading:s}},b4=({children:r})=>{const{currentUser:e,loading:t}=Ui(),{isAdmin:s,loading:o}=T4(e);return t||o?b.jsx("div",{children:"Verificando permisos de administrador..."}):!e||!s?(console.log("Acceso denegado. No es admin o no está logueado."),b.jsx(CT,{to:"/"})):(console.log("Acceso concedido. ¡Bienvenido, admin!"),r)};var tp={exports:{}},np={exports:{}},dT;function S4(){return dT||(dT=1,(()=>{var r={d:(s,o)=>{for(var l in o)r.o(o,l)&&!r.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:o[l]})},o:(s,o)=>Object.prototype.hasOwnProperty.call(s,o),r:s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})}},e={};r.r(e),r.d(e,{default:()=>t});const t=function(s){var o=s.condition,l=s.show,h=s.elseShow,p=function(m){return typeof m=="function"},d=function(m){return m()||(console.warn("Nothing was returned from your render function. Please make sure you are returning a valid React element."),null)};return o?p(l)?d(l):l:!o&&h?p(h)?d(h):h:null};np.exports=e})()),np.exports}var mT;function w4(){return mT||(mT=1,(()=>{var r={n:W=>{var R=W&&W.__esModule?()=>W.default:()=>W;return r.d(R,{a:R}),R},d:(W,R)=>{for(var q in R)r.o(R,q)&&!r.o(W,q)&&Object.defineProperty(W,q,{enumerable:!0,get:R[q]})},o:(W,R)=>Object.prototype.hasOwnProperty.call(W,R),r:W=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})}},e={};r.r(e),r.d(e,{Chatbot:()=>ce,createChatBotMessage:()=>d,createClientMessage:()=>v,createCustomMessage:()=>m,default:()=>_e,useChatbot:()=>lt});const t=rf();var s=r.n(t);const o=S4();var l=r.n(o),h=function(){return h=Object.assign||function(W){for(var R,q=1,J=arguments.length;q<J;q++)for(var K in R=arguments[q])Object.prototype.hasOwnProperty.call(R,K)&&(W[K]=R[K]);return W},h.apply(this,arguments)},p=function(W,R){return{message:W,type:R,id:Math.round(Date.now()*Math.random())}},d=function(W,R){return h(h(h({},p(W,"bot")),R),{loading:!0})},m=function(W,R,q){return h(h({},p(W,R)),q)},v=function(W,R){return h(h({},p(W,"user")),R)},E=function(W){for(var R=[],q=1;q<arguments.length;q++)R[q-1]=arguments[q];if(W)return W.apply(void 0,R)};function S(){return S=Object.assign||function(W){for(var R=1;R<arguments.length;R++){var q=arguments[R];for(var J in q)Object.prototype.hasOwnProperty.call(q,J)&&(W[J]=q[J])}return W},S.apply(this,arguments)}const I=({styles:W={},...R})=>s().createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R),s().createElement("path",{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"})),x=function(W){var R=W.message,q=W.customComponents;return s().createElement("div",{className:"react-chatbot-kit-user-chat-message-container"},s().createElement(l(),{condition:!!q.userChatMessage,show:E(q.userChatMessage,{message:R}),elseShow:s().createElement("div",{className:"react-chatbot-kit-user-chat-message"},R,s().createElement("div",{className:"react-chatbot-kit-user-chat-message-arrow"}))}),s().createElement(l(),{condition:!!q.userAvatar,show:E(q.userAvatar),elseShow:s().createElement("div",{className:"react-chatbot-kit-user-avatar"},s().createElement("div",{className:"react-chatbot-kit-user-avatar-container"},s().createElement(I,{className:"react-chatbot-kit-user-avatar-icon"})))}))},P=function(){return s().createElement("div",{className:"react-chatbot-kit-chat-bot-avatar"},s().createElement("div",{className:"react-chatbot-kit-chat-bot-avatar-container"},s().createElement("p",{className:"react-chatbot-kit-chat-bot-avatar-letter"},"B")))},M=function(){return s().createElement("div",{className:"chatbot-loader-container"},s().createElement("svg",{id:"dots",width:"50px",height:"21px",viewBox:"0 0 132 58",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s().createElement("g",{stroke:"none",fill:"none"},s().createElement("g",{id:"chatbot-loader",fill:"#fff"},s().createElement("circle",{id:"chatbot-loader-dot1",cx:"25",cy:"30",r:"13"}),s().createElement("circle",{id:"chatbot-loader-dot2",cx:"65",cy:"30",r:"13"}),s().createElement("circle",{id:"chatbot-loader-dot3",cx:"105",cy:"30",r:"13"})))))};var Y=function(){return Y=Object.assign||function(W){for(var R,q=1,J=arguments.length;q<J;q++)for(var K in R=arguments[q])Object.prototype.hasOwnProperty.call(R,K)&&(W[K]=R[K]);return W},Y.apply(this,arguments)};const ee=function(W){var R=W.message,q=W.withAvatar,J=q===void 0||q,K=W.loading,he=W.messages,de=W.customComponents,ye=W.setState,Qe=W.customStyles,Ie=W.delay,_t=W.id,Zt=(0,t.useState)(!1),Ye=Zt[0],ht=Zt[1];(0,t.useEffect)(function(){var pt;return function(Nt,ft){var wn=750;Ie&&(wn+=Ie),pt=setTimeout(function(){var Et=function(Tt,Xe,ze){for(var nt,dt=0,bt=Xe.length;dt<bt;dt++)!nt&&dt in Xe||(nt||(nt=Array.prototype.slice.call(Xe,0,dt)),nt[dt]=Xe[dt]);return Tt.concat(nt||Array.prototype.slice.call(Xe))}([],Nt).find(function(Tt){return Tt.id===_t});Et&&(Et.loading=!1,Et.delay=void 0,ft(function(Tt){var Xe=Tt.messages,ze=Xe.findIndex(function(nt){return nt.id===_t});return Xe[ze]=Et,Y(Y({},Tt),{messages:Xe})}))},wn)}(he,ye),function(){clearTimeout(pt)}},[Ie,_t]),(0,t.useEffect)(function(){Ie?setTimeout(function(){return ht(!0)},Ie):ht(!0)},[Ie]);var Ht={backgroundColor:""},xt={borderRightColor:""};return Qe&&(Ht.backgroundColor=Qe.backgroundColor,xt.borderRightColor=Qe.backgroundColor),s().createElement(l(),{condition:Ye,show:s().createElement("div",{className:"react-chatbot-kit-chat-bot-message-container"},s().createElement(l(),{condition:J,show:s().createElement(l(),{condition:!!(de!=null&&de.botAvatar),show:E(de==null?void 0:de.botAvatar),elseShow:s().createElement(P,null)})}),s().createElement(l(),{condition:!!(de!=null&&de.botChatMessage),show:E(de==null?void 0:de.botChatMessage,{message:R,loader:s().createElement(M,null)}),elseShow:s().createElement("div",{className:"react-chatbot-kit-chat-bot-message",style:Ht},s().createElement(l(),{condition:K,show:s().createElement(M,null),elseShow:s().createElement("span",null,R)}),s().createElement(l(),{condition:J,show:s().createElement("div",{className:"react-chatbot-kit-chat-bot-message-arrow",style:xt})}))}))})};function $(){return $=Object.assign||function(W){for(var R=1;R<arguments.length;R++){var q=arguments[R];for(var J in q)Object.prototype.hasOwnProperty.call(q,J)&&(W[J]=q[J])}return W},$.apply(this,arguments)}const oe=({styles:W={},...R})=>s().createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R),s().createElement("path",{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}));var le=function(){return le=Object.assign||function(W){for(var R,q=1,J=arguments.length;q<J;q++)for(var K in R=arguments[q])Object.prototype.hasOwnProperty.call(R,K)&&(W[K]=R[K]);return W},le.apply(this,arguments)},ve=function(W,R,q){if(q||arguments.length===2)for(var J,K=0,he=R.length;K<he;K++)!J&&K in R||(J||(J=Array.prototype.slice.call(R,0,K)),J[K]=R[K]);return W.concat(J||Array.prototype.slice.call(R))};const V=function(W){var R=W.state,q=W.setState,J=W.widgetRegistry,K=W.messageParser,he=W.parse,de=W.customComponents,ye=W.actionProvider,Qe=W.botName,Ie=W.customStyles,_t=W.headerText,Zt=W.customMessages,Ye=W.placeholderText,ht=W.validator,Ht=W.disableScrollToBottom,xt=W.messageHistory,pt=W.actions,Nt=W.messageContainerRef,ft=R.messages,wn=(0,t.useState)(""),Et=wn[0],Tt=wn[1],Xe=function(){setTimeout(function(){var fe;Nt.current&&(Nt.current.scrollTop=(fe=Nt==null?void 0:Nt.current)===null||fe===void 0?void 0:fe.scrollHeight)},50)};(0,t.useEffect)(function(){Ht||Xe()});var ze=function(){q(function(fe){return le(le({},fe),{messages:ve(ve([],fe.messages,!0),[p(Et,"user")],!1)})}),Xe(),Tt("")},nt={backgroundColor:""};Ie&&Ie.chatButton&&(nt.backgroundColor=Ie.chatButton.backgroundColor);var dt="Conversation with "+Qe;_t&&(dt=_t);var bt="Write your message here";return Ye&&(bt=Ye),s().createElement("div",{className:"react-chatbot-kit-chat-container"},s().createElement("div",{className:"react-chatbot-kit-chat-inner-container"},s().createElement(l(),{condition:!!de.header,show:de.header&&de.header(ye),elseShow:s().createElement("div",{className:"react-chatbot-kit-chat-header"},dt)}),s().createElement("div",{className:"react-chatbot-kit-chat-message-container",ref:Nt},s().createElement(l(),{condition:typeof xt=="string"&&!!xt,show:s().createElement("div",{dangerouslySetInnerHTML:{__html:xt}})}),ft.map(function(fe,Be){return fe.type==="bot"?s().createElement(s().Fragment,{key:fe.id},function(Me,Le){var Jt;Jt=Me.withAvatar?Me.withAvatar:function(ei,xr){if(xr===0)return!0;var Nn=ei[xr-1];return!(Nn.type==="bot"&&!Nn.widget)}(ft,Le);var Cr=le(le({},Me),{setState:q,state:R,customComponents:de,widgetRegistry:J,messages:ft,actions:pt});if(Me.widget){var Jr=J.getWidget(Cr.widget,le(le({},R),{scrollIntoView:Xe,payload:Me.payload,actions:pt}));return s().createElement(s().Fragment,null,s().createElement(ee,le({customStyles:Ie.botMessageBox,withAvatar:Jt},Cr,{key:Me.id})),s().createElement(l(),{condition:!Cr.loading,show:Jr||null}))}return s().createElement(ee,le({customStyles:Ie.botMessageBox,key:Me.id,withAvatar:Jt},Cr,{customComponents:de,messages:ft,setState:q}))}(fe,Be)):fe.type==="user"?s().createElement(s().Fragment,{key:fe.id},function(Me){var Le=J.getWidget(Me.widget,le(le({},R),{scrollIntoView:Xe,payload:Me.payload,actions:pt}));return s().createElement(s().Fragment,null,s().createElement(x,{message:Me.message,key:Me.id,customComponents:de}),Le||null)}(fe)):function(Me,Le){return!!Le[Me.type]}(fe,Zt)?s().createElement(s().Fragment,{key:fe.id},function(Me){var Le=Zt[Me.type],Jt={setState:q,state:R,scrollIntoView:Xe,actionProvider:ye,payload:Me.payload,actions:pt};if(Me.widget){var Cr=J.getWidget(Me.widget,le(le({},R),{scrollIntoView:Xe,payload:Me.payload,actions:pt}));return s().createElement(s().Fragment,null,Le(Jt),Cr||null)}return Le(Jt)}(fe)):void 0}),s().createElement("div",{style:{paddingBottom:"15px"}})),s().createElement("div",{className:"react-chatbot-kit-chat-input-container"},s().createElement("form",{className:"react-chatbot-kit-chat-input-form",onSubmit:function(fe){if(fe.preventDefault(),ht&&typeof ht=="function"){if(ht(Et)){if(ze(),he)return he(Et);K.parse(Et)}}else{if(ze(),he)return he(Et);K.parse(Et)}}},s().createElement("input",{className:"react-chatbot-kit-chat-input",placeholder:bt,value:Et,onChange:function(fe){return Tt(fe.target.value)}}),s().createElement("button",{className:"react-chatbot-kit-chat-btn-send",style:nt},s().createElement(oe,{className:"react-chatbot-kit-chat-btn-send-icon"}))))))},C=function(W){var R=W.message;return s().createElement("div",{className:"react-chatbot-kit-error"},s().createElement("h1",{className:"react-chatbot-kit-error-header"},"Ooops. Something is missing."),s().createElement("div",{className:"react-chatbot-kit-error-container"},s().createElement(ee,{message:R,withAvatar:!0,loading:!1,id:1,customStyles:{backgroundColor:""},messages:[]})),s().createElement("a",{href:"https://fredrikoseberg.github.io/react-chatbot-kit-docs/",rel:"noopener norefferer",target:"_blank",className:"react-chatbot-kit-error-docs"},"View the docs"))};var N=function(W){return W.widgets?W.widgets:[]},k=function(W){try{new W}catch{return!1}return!0},L=function(){return L=Object.assign||function(W){for(var R,q=1,J=arguments.length;q<J;q++)for(var K in R=arguments[q])Object.prototype.hasOwnProperty.call(R,K)&&(W[K]=R[K]);return W},L.apply(this,arguments)};const z=function(W,R){var q=this;this.addWidget=function(J,K){var he=J.widgetName,de=J.widgetFunc,ye=J.mapStateToProps,Qe=J.props;q[he]={widget:de,props:Qe,mapStateToProps:ye,parentProps:L({},K)}},this.getWidget=function(J,K){var he=q[J];if(he){var de,ye=L(L(L(L({scrollIntoView:K.scrollIntoView},he.parentProps),typeof(de=he.props)=="object"?de:{}),q.mapStateToProps(he.mapStateToProps,K)),{setState:q.setState,actionProvider:q.actionProvider||K.actions,actions:K.actions,state:K,payload:K.payload});return he.widget(ye)||null}},this.mapStateToProps=function(J,K){if(J)return J.reduce(function(he,de){return he[de]=K[de],he},{})},this.setState=W,this.actionProvider=R};var D=function(){return D=Object.assign||function(W){for(var R,q=1,J=arguments.length;q<J;q++)for(var K in R=arguments[q])Object.prototype.hasOwnProperty.call(R,K)&&(W[K]=R[K]);return W},D.apply(this,arguments)},ot=function(W,R,q){for(var J,K=0,he=R.length;K<he;K++)!J&&K in R||(J||(J=Array.prototype.slice.call(R,0,K)),J[K]=R[K]);return W.concat(J||Array.prototype.slice.call(R))};const lt=function(W){var R=W.config,q=W.actionProvider,J=W.messageParser,K=W.messageHistory,he=W.runInitialMessagesWithHistory,de=W.saveMessages,ye=function(ze,nt){var dt={};for(var bt in ze)Object.prototype.hasOwnProperty.call(ze,bt)&&nt.indexOf(bt)<0&&(dt[bt]=ze[bt]);if(ze!=null&&typeof Object.getOwnPropertySymbols=="function"){var fe=0;for(bt=Object.getOwnPropertySymbols(ze);fe<bt.length;fe++)nt.indexOf(bt[fe])<0&&Object.prototype.propertyIsEnumerable.call(ze,bt[fe])&&(dt[bt[fe]]=ze[bt[fe]])}return dt}(W,["config","actionProvider","messageParser","messageHistory","runInitialMessagesWithHistory","saveMessages"]),Qe="",Ie="";if(!R||!q||!J)return{configurationError:Qe="I think you forgot to feed me some props. Did you remember to pass a config, a messageparser and an actionprovider?"};var _t=function(ze,nt){var dt=[];return ze.initialMessages||dt.push("Config must contain property 'initialMessages', and it expects it to be an array of chatbotmessages."),dt}(R);if(_t.length)return{invalidPropsError:Ie=_t.reduce(function(ze,nt){return ze+nt},"")};var Zt=function(ze){return ze.state?ze.state:{}}(R);K&&Array.isArray(K)?R.initialMessages=ot([],K):typeof K=="string"&&K&&(he||(R.initialMessages=[]));var Ye,ht,Ht,xt=s().useState(D({messages:ot([],R.initialMessages)},Zt)),pt=xt[0],Nt=xt[1],ft=s().useRef(pt.messages),wn=s().useRef(),Et=s().useRef();(0,t.useEffect)(function(){ft.current=pt.messages}),(0,t.useEffect)(function(){K&&Array.isArray(K)&&Nt(function(ze){return D(D({},ze),{messages:K})})},[]),(0,t.useEffect)(function(){var ze=Et.current;return function(){if(de&&typeof de=="function"){var nt=ze.innerHTML.toString();de(ft.current,nt)}}},[]),(0,t.useEffect)(function(){wn.current=pt},[pt]);var Tt=q,Xe=J;return k(Tt)&&k(Xe)?(Ye=new q(d,Nt,v,wn.current,m,ye),ht=new z(Nt,Ye),Ht=new J(Ye,wn.current),N(R).forEach(function(ze){return ht==null?void 0:ht.addWidget(ze,ye)})):(Ye=q,Ht=J,ht=new z(Nt,null),N(R).forEach(function(ze){return ht==null?void 0:ht.addWidget(ze,ye)})),{widgetRegistry:ht,actionProv:Ye,messagePars:Ht,configurationError:Qe,invalidPropsError:Ie,state:pt,setState:Nt,messageContainerRef:Et,ActionProvider:Tt,MessageParser:Xe}};var te=function(){return te=Object.assign||function(W){for(var R,q=1,J=arguments.length;q<J;q++)for(var K in R=arguments[q])Object.prototype.hasOwnProperty.call(R,K)&&(W[K]=R[K]);return W},te.apply(this,arguments)};const ce=function(W){var R=W.actionProvider,q=W.messageParser,J=W.config,K=W.headerText,he=W.placeholderText,de=W.saveMessages,ye=W.messageHistory,Qe=W.runInitialMessagesWithHistory,Ie=W.disableScrollToBottom,_t=W.validator,Zt=function(fe,Be){var Me={};for(var Le in fe)Object.prototype.hasOwnProperty.call(fe,Le)&&Be.indexOf(Le)<0&&(Me[Le]=fe[Le]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function"){var Jt=0;for(Le=Object.getOwnPropertySymbols(fe);Jt<Le.length;Jt++)Be.indexOf(Le[Jt])<0&&Object.prototype.propertyIsEnumerable.call(fe,Le[Jt])&&(Me[Le[Jt]]=fe[Le[Jt]])}return Me}(W,["actionProvider","messageParser","config","headerText","placeholderText","saveMessages","messageHistory","runInitialMessagesWithHistory","disableScrollToBottom","validator"]),Ye=lt(te({config:J,actionProvider:R,messageParser:q,messageHistory:ye,saveMessages:de,runInitialMessagesWithHistory:Qe},Zt)),ht=Ye.configurationError,Ht=Ye.invalidPropsError,xt=Ye.ActionProvider,pt=Ye.MessageParser,Nt=Ye.widgetRegistry,ft=Ye.messageContainerRef,wn=Ye.actionProv,Et=Ye.messagePars,Tt=Ye.state,Xe=Ye.setState;if(ht)return s().createElement(C,{message:ht});if(Ht.length)return s().createElement(C,{message:Ht});var ze=function(fe){return fe.customStyles?fe.customStyles:{}}(J),nt=function(fe){return fe.customComponents?fe.customComponents:{}}(J),dt=function(fe){return fe.botName?fe.botName:"Bot"}(J),bt=function(fe){return fe.customMessages?fe.customMessages:{}}(J);return k(xt)&&k(pt)?s().createElement(V,{state:Tt,setState:Xe,widgetRegistry:Nt,actionProvider:wn,messageParser:Et,customMessages:bt,customComponents:te({},nt),botName:dt,customStyles:te({},ze),headerText:K,placeholderText:he,validator:_t,messageHistory:ye,disableScrollToBottom:Ie,messageContainerRef:ft}):s().createElement(xt,{state:Tt,setState:Xe,createChatBotMessage:d},s().createElement(pt,null,s().createElement(V,{state:Tt,setState:Xe,widgetRegistry:Nt,actionProvider:xt,messageParser:pt,customMessages:bt,customComponents:te({},nt),botName:dt,customStyles:te({},ze),headerText:K,placeholderText:he,validator:_t,messageHistory:ye,disableScrollToBottom:Ie,messageContainerRef:ft})))},_e=ce;tp.exports=e})()),tp.exports}var A4=w4();const R4=vT(A4),I4={botName:"LlegaBot",initialMessages:[D4('¡Hola! Soy LlegaBot. ¿En qué puedo ayudarte? Escribe "ayuda" para ver opciones.')],customStyles:{botMessageBox:{backgroundColor:"#ff8c00"},chatButton:{backgroundColor:"#ff8c00"}}},C4=({children:r,actions:e})=>{const t=s=>{const o=s.toLowerCase();o.includes("hola")||o.includes("buenas")?e.handleGreeting():o.includes("reserva")||o.includes("modificar")?e.handleModifyReservation():o.includes("supervisor")||o.includes("contacto")?e.handleContactSupervisor():o.includes("perfil")?e.handleModifyProfile():o.includes("ticket")||o.includes("admin")||o.includes("problema")?e.handleCreateTicket(s):o.includes("ayuda")?e.handleHelp():e.handleUnknown()};return b.jsx("div",{children:wt.Children.map(r,s=>wt.cloneElement(s,{parse:t,actions:e}))})},x4=({createChatBotMessage:r,setState:e,children:t})=>{const s=on(),o=S=>{e(I=>({...I,messages:[...I.messages,S]}))},l=()=>o(r("¡Hola! Un placer ayudarte.")),h=()=>o(r("Puedes gestionar tus reservas en la sección 'Mis Reservas'.")),p=()=>o(r("Encontrarás la información del supervisor en los detalles de cada espacio.")),d=()=>o(r("Puedes pedirme cosas como: 'modificar mi reserva', 'ver mi perfil', o 'crear un ticket'.")),m=()=>o(r("Lo siento, no te he entendido. Prueba a escribir 'ayuda'.")),v=()=>{o(r("¡Claro! Te llevo a tu perfil para que lo modifiques.")),s("/profile")},E=async S=>{const I=r("Entendido. Estoy creando un ticket con tu mensaje. Un administrador se pondrá en contacto pronto.");o(I);try{const x=wr.currentUser;x?await Ku(hr($e,"tickets"),{userId:x.uid,userEmail:x.email,message:S,status:"abierto",createdAt:hw()}):o(r("Error: Debes estar autenticado para crear un ticket."))}catch(x){console.error("Error al crear el ticket: ",x),o(r("Lo siento, hubo un problema al crear tu ticket."))}};return b.jsx("div",{children:wt.Children.map(t,S=>wt.cloneElement(S,{actions:{handleGreeting:l,handleModifyReservation:h,handleContactSupervisor:p,handleModifyProfile:v,handleCreateTicket:E,handleHelp:d,handleUnknown:m}}))})},N4=()=>{const[r,e]=j.useState(!0),t=()=>{e(!r)};return b.jsx("div",{className:"chatbot-wrapper",children:r?b.jsxs("div",{className:"chatbot-container",children:[b.jsx("button",{className:"close-button",onClick:t,children:"✖"}),b.jsx(R4,{config:I4,messageParser:C4,actionProvider:x4})]}):b.jsx("button",{className:"open-button",onClick:t,children:"💬"})})};function D4(r,e){return{message:r,type:"bot",...e}}const O4=[{label:"Deportivo",value:"deportivo"},{label:"Educativo",value:"educativo"},{label:"Tecnología",value:"tecnologia"},{label:"Exposiciones",value:"exposiciones"}],rp={width:"250px",borderRadius:"8px",border:"2px solid #333",padding:"8px 12px",color:"#fff",background:"#333",backgroundColor:"#333",fontSize:"1rem",outline:"none",display:"block"},ip={marginBottom:"6px",fontWeight:"bold",display:"block"};function sp(r){const[e,t]=r.split(":").map(Number);return{hour:e,minute:t}}function M4(r,e,t,s){return r<s&&t<e}function P4(r,e){let t=e+1;for(;t<=17;){if(!r.includes(t))return t;t++}return null}const k4=()=>{const[r]=Fp(),e=on(),{currentUser:t}=Ui(),s=r.get("categoria")||"",[o,l]=j.useState(s),[h,p]=j.useState(""),[d,m]=j.useState(""),[v,E]=j.useState([]),[S,I]=j.useState(!1);j.useEffect(()=>{if(!o){E([]);return}I(!0),(async()=>{const Y=Mo(hr($e,"spaces"),gs("type","==",o)),ee=await ga(Y);E(ee.docs.map($=>({id:$.id,...$.data()}))),I(!1)})()},[o]);const x=async()=>{try{await cf(wr),e("/")}catch{alert("Hubo un problema al cerrar tu sesión.")}},P=async M=>{if(!h){alert("Por favor selecciona una fecha.");return}if(!d){alert("Por favor selecciona una hora.");return}const Y=new Date;if(new Date(h+"T"+d)<Y.setSeconds(0,0)){alert("La fecha y hora seleccionadas no pueden ser en el pasado.");return}const{hour:$,minute:oe}=sp(d);if($<8||$>=17||$===17&&oe>0){alert("La hora debe estar entre 08:00 y 17:00.");return}if(!t){alert("Para ver los detalles y reservar, primero necesitas iniciar sesión."),e("/login");return}try{const le=Mo(hr($e,"reservations"),gs("spaceId","==",M),gs("fecha","==",h)),V=(await ga(le)).docs.map(L=>sp(L.data().hora).hour);if(V.includes($)){const L=V.sort((D,ot)=>D-ot),z=P4(L,$);alert(z?`El espacio no está disponible a esa hora. El siguiente horario disponible es a las ${z}:00.`:"El espacio no está disponible en ningún horario posterior hoy.");return}const C=Mo(hr($e,"reservations"),gs("userId","==",t.uid),gs("fecha","==",h));if((await ga(C)).docs.map(L=>sp(L.data().hora).hour).some(L=>M4(L,L+1,$,$+1))){alert("Ya tienes una reservación en ese horario.");return}e(`/reserva/${M}?fecha=${h}&hora=${d}`)}catch(le){console.error("Error verificando disponibilidad:",le),alert("Error verificando disponibilidad.")}};return b.jsxs("div",{className:"home-container",children:[b.jsxs("header",{className:"home-header",children:[b.jsx("h1",{className:"logo",onClick:()=>e("/"),style:{cursor:"pointer"},children:"llega"}),b.jsxs("nav",{children:[b.jsx(bn,{to:"/",children:"Inicio"}),t&&b.jsx(bn,{to:"/mis-reservas",children:"Mis Reservas"})]}),t?b.jsxs("div",{className:"user-actions",children:[b.jsx("button",{onClick:()=>e("/profile"),className:"btn-profile",children:"Perfil"}),b.jsx("button",{onClick:x,className:"btn-logout",style:{backgroundColor:"red",color:"white"},children:"Cerrar Sesión"})]}):b.jsxs("div",{children:[b.jsx("button",{onClick:()=>e("/register"),className:"btn-primary",style:{width:"auto",padding:"8px 15px"},children:"Crear Cuenta"}),b.jsx("button",{onClick:()=>e("/login"),style:{marginLeft:"10px"},children:"Iniciar Sesión"})]})]}),b.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"32px 16px"},children:[b.jsx("h2",{style:{marginBottom:"32px",marginTop:"16px"},children:"Espacios por Categoría"}),b.jsxs("div",{style:{display:"flex",gap:"32px",marginBottom:"48px"},children:[b.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[b.jsx("label",{style:ip,children:"Categoría"}),b.jsxs("select",{value:o,onChange:M=>l(M.target.value),style:rp,children:[b.jsx("option",{value:"",children:"Selecciona una categoría"}),O4.map(M=>b.jsx("option",{value:M.value,children:M.label},M.value))]})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[b.jsx("label",{style:ip,children:"Fecha"}),b.jsx("input",{type:"date",value:h,onChange:M=>p(M.target.value),style:rp})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[b.jsx("label",{style:ip,children:"Hora"}),b.jsx("input",{type:"time",value:d,onChange:M=>m(M.target.value),style:rp})]})]}),b.jsx("div",{className:"spaces-grid",children:S?b.jsx("p",{children:"Cargando espacios..."}):v.length>0?v.map(M=>b.jsxs("div",{className:"space-card",children:[b.jsx("img",{src:M.imageUrl,alt:M.name,className:"space-card-img"}),b.jsxs("div",{className:"space-card-body",children:[b.jsx("h4",{children:M.name}),b.jsx("p",{children:M.description}),b.jsx("button",{onClick:()=>P(M.id),className:"btn-primary",style:{marginTop:"12px"},children:"Ver espacio"})]})]},M.id)):b.jsx("p",{children:"No hay espacios para esta categoría."})})]}),b.jsxs("footer",{className:"home-footer",children:[b.jsx("div",{style:{marginBottom:"20px"},children:b.jsx("img",{src:Pf,alt:"Logo Unimet",style:{width:"200px"}})}),b.jsx("p",{children:"© 2025 Universidad Metropolitana. Todos los derechos reservados."})]})]})},V4=[{label:"Deportivo",value:"deportivo"},{label:"Educativo",value:"educativo"},{label:"Tecnología",value:"tecnologia"},{label:"Exposiciones",value:"exposiciones"}],L4=()=>{const r=on(),e=Zr(),{currentUser:t,loading:s}=Ui(),l=new URLSearchParams(e.search).get("categoria")||"",[h,p]=j.useState(l),[d,m]=j.useState([]),[v,E]=j.useState(!1);j.useEffect(()=>{p(l)},[l]),j.useEffect(()=>{s||(!t||t.role!=="admin")&&r("/")},[t,s,r]),j.useEffect(()=>{if(!h){m([]);return}E(!0),(async()=>{const x=Mo(hr($e,"spaces"),gs("type","==",h)),P=await ga(x);m(P.docs.map(M=>({id:M.id,...M.data()}))),E(!1)})()},[h]);const S=async()=>{try{await cf(wr),r("/")}catch{alert("Hubo un problema al cerrar tu sesión.")}};return b.jsxs("div",{className:"home-container",children:[b.jsxs("header",{className:"home-header",children:[b.jsx("h1",{className:"logo",onClick:()=>r("/"),style:{cursor:"pointer"},children:"llega"}),b.jsxs("nav",{children:[b.jsx(bn,{to:"/",children:"Inicio"}),t&&t.role!=="admin"&&b.jsx(bn,{to:"/mis-reservas",children:"Mis Reservas"}),t&&t.role==="admin"&&b.jsx(bn,{to:"/admin/espacios/crear",children:"Crear Espacio"})]}),t?b.jsxs("div",{className:"user-actions",children:[b.jsx("button",{onClick:()=>r("/profile"),className:"btn-profile",children:"Perfil"}),b.jsx("button",{onClick:S,className:"btn-logout",style:{backgroundColor:"red",color:"white"},children:"Cerrar Sesión"})]}):b.jsxs("div",{children:[b.jsx("button",{onClick:()=>r("/register"),className:"btn-primary",style:{width:"auto",padding:"8px 15px"},children:"Crear Cuenta"}),b.jsx("button",{onClick:()=>r("/login"),style:{marginLeft:"10px"},children:"Iniciar Sesión"})]})]}),b.jsx("main",{children:b.jsxs("section",{className:"spaces-section",children:[b.jsx("h2",{style:{marginBottom:"32px",marginTop:"16px"},children:"Editar Espacios por Categoría"}),b.jsx("div",{style:{display:"flex",gap:"32px",marginBottom:"48px"},children:b.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[b.jsx("label",{style:{marginBottom:"6px",fontWeight:"bold",display:"block"},children:"Categoría"}),b.jsxs("select",{value:h,onChange:I=>p(I.target.value),style:{width:"250px",borderRadius:"8px",border:"2px solid #333",padding:"8px 12px",color:"#333",background:"#fff",fontSize:"1rem",outline:"none",display:"block"},children:[b.jsx("option",{value:"",children:"Selecciona una categoría"}),V4.map(I=>b.jsx("option",{value:I.value,children:I.label},I.value))]})]})}),b.jsx("div",{className:"spaces-grid",children:v?b.jsx("p",{children:"Cargando espacios..."}):d.length>0?d.map(I=>b.jsxs("div",{className:"space-card",children:[b.jsx("img",{src:I.imageUrl,alt:I.name,className:"space-card-img"}),b.jsxs("div",{className:"space-card-body",children:[b.jsx("h4",{children:I.name}),b.jsx("p",{children:I.description}),b.jsx("button",{onClick:()=>r(`/admin/editar-espacio/${I.id}`),className:"btn-primary",style:{marginTop:"12px"},children:"Editar espacio"})]})]},I.id)):b.jsx("p",{children:"No hay espacios para esta categoría."})})]})}),b.jsxs("footer",{className:"home-footer",children:[b.jsx("div",{style:{marginBottom:"20px"},children:b.jsx("img",{src:Pf,alt:"Logo Unimet",style:{width:"200px"}})}),b.jsx("p",{children:"© 2025 Universidad Metropolitana. Todos los derechos reservados."})]})]})},U4=[{label:"Deportivo",value:"deportivo"},{label:"Educativo",value:"educativo"},{label:"Tecnología",value:"tecnologia"},{label:"Exposiciones",value:"exposiciones"}],Eo={width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #222",background:"#333",color:"#fff",fontSize:16,outline:"none",boxSizing:"border-box"},To={display:"block",marginBottom:6,fontWeight:500},j4=()=>{const r=on(),{id:e}=Fo(),[t,s]=j.useState({name:"",description:"",imageUrl:"",type:"",price:"",supervisorId:""}),[o,l]=j.useState(!1);j.useEffect(()=>{(async()=>{const m=Ct($e,"spaces",e),v=await Un(m);if(v.exists()){const E=v.data();s({name:E.name||"",description:E.description||"",imageUrl:E.imageUrl||"",type:E.type||"",price:E.price!==void 0?E.price:"",supervisorId:E.supervisorId||""})}})()},[e]);const h=d=>{s({...t,[d.target.name]:d.target.value})},p=async d=>{d.preventDefault(),l(!0);try{const m={...t,price:Number(t.price)};await zg(Ct($e,"spaces",e),m),alert("Espacio actualizado correctamente."),r("/")}catch{alert("Error al actualizar el espacio.")}l(!1)};return b.jsxs("div",{style:{maxWidth:1e3,width:"100%",margin:"48px auto",background:"#fff",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.10)",padding:32,display:"flex",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box"},children:[b.jsx("h2",{style:{textAlign:"center",marginBottom:32},children:"Editar Espacio"}),b.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:20},children:[b.jsxs("div",{children:[b.jsx("label",{style:To,children:"Nombre"}),b.jsx("input",{name:"name",value:t.name,onChange:h,required:!0,style:Eo})]}),b.jsxs("div",{children:[b.jsx("label",{style:To,children:"Descripción"}),b.jsx("textarea",{name:"description",value:t.description,onChange:h,required:!0,rows:3,style:{...Eo,resize:"vertical"}})]}),b.jsxs("div",{children:[b.jsx("label",{style:To,children:"Imagen (URL)"}),b.jsx("input",{name:"imageUrl",value:t.imageUrl,onChange:h,required:!0,style:Eo})]}),b.jsxs("div",{children:[b.jsx("label",{style:To,children:"Categoría"}),b.jsxs("select",{name:"type",value:t.type,onChange:h,required:!0,style:Eo,children:[b.jsx("option",{value:"",children:"Selecciona una categoría"}),U4.map(d=>b.jsx("option",{value:d.value,children:d.label},d.value))]})]}),b.jsxs("div",{children:[b.jsx("label",{style:To,children:"Precio"}),b.jsx("input",{name:"price",type:"number",value:t.price,onChange:h,required:!0,style:Eo,min:0})]}),b.jsxs("div",{children:[b.jsx("label",{style:To,children:"Supervisor"}),b.jsx("input",{name:"supervisorId",value:t.supervisorId,onChange:h,required:!0,style:Eo})]}),b.jsx("button",{type:"submit",style:{marginTop:12,background:"#ff7300",color:"#fff",border:"none",borderRadius:8,padding:"12px 0",fontWeight:600,fontSize:17,cursor:"pointer",transition:"background 0.2s"},disabled:o,children:o?"Actualizando...":"Actualizar Espacio"})]})]})},z4=[{label:"Deportivo",value:"deportivo"},{label:"Educativo",value:"educativo"},{label:"Tecnología",value:"tecnologia"},{label:"Exposiciones",value:"exposiciones"}],bo={width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #222",background:"#333",color:"#fff",fontSize:16,outline:"none",boxSizing:"border-box"},So={display:"block",marginBottom:6,fontWeight:500},B4=()=>{const r=on(),[e,t]=j.useState({name:"",description:"",imageUrl:"",type:"",price:"",supervisorId:""}),[s,o]=j.useState(!1),l=p=>{t({...e,[p.target.name]:p.target.value})},h=async p=>{p.preventDefault(),o(!0);try{const d={...e,price:Number(e.price)};await Ku(hr($e,"spaces"),d),alert("Espacio creado correctamente."),r("/")}catch{alert("Error al crear el espacio.")}o(!1)};return b.jsxs("div",{style:{maxWidth:1e3,width:"100%",margin:"48px auto",background:"#fff",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.10)",padding:32,display:"flex",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box"},children:[b.jsx("h2",{style:{textAlign:"center",marginBottom:32},children:"Crear Espacio"}),b.jsxs("form",{onSubmit:h,style:{display:"flex",flexDirection:"column",gap:20},children:[b.jsxs("div",{children:[b.jsx("label",{style:So,children:"Nombre"}),b.jsx("input",{name:"name",value:e.name,onChange:l,required:!0,style:bo})]}),b.jsxs("div",{children:[b.jsx("label",{style:So,children:"Descripción"}),b.jsx("textarea",{name:"description",value:e.description,onChange:l,required:!0,rows:3,style:{...bo,resize:"vertical"}})]}),b.jsxs("div",{children:[b.jsx("label",{style:So,children:"Imagen (URL)"}),b.jsx("input",{name:"imageUrl",value:e.imageUrl,onChange:l,required:!0,style:bo})]}),b.jsxs("div",{children:[b.jsx("label",{style:So,children:"Categoría"}),b.jsxs("select",{name:"type",value:e.type,onChange:l,required:!0,style:bo,children:[b.jsx("option",{value:"",children:"Selecciona una categoría"}),z4.map(p=>b.jsx("option",{value:p.value,children:p.label},p.value))]})]}),b.jsxs("div",{children:[b.jsx("label",{style:So,children:"Precio"}),b.jsx("input",{name:"price",type:"number",value:e.price,onChange:l,required:!0,style:bo,min:0})]}),b.jsxs("div",{children:[b.jsx("label",{style:So,children:"Supervisor"}),b.jsx("input",{name:"supervisorId",value:e.supervisorId,onChange:l,required:!0,style:bo})]}),b.jsx("button",{type:"submit",style:{marginTop:12,background:"#ff7300",color:"#fff",border:"none",borderRadius:8,padding:"12px 0",fontWeight:600,fontSize:17,cursor:"pointer",transition:"background 0.2s"},disabled:s,children:s?"Creando...":"Crear Espacio"})]})]})},q4=r=>b.jsx("div",{style:{display:"flex",gap:2},children:[1,2,3,4,5].map(e=>b.jsx("span",{style:{color:e<=r?"#FFD600":"#ccc",fontSize:28},children:"★"},e))}),H4=()=>{const{id:r}=Fo(),e=on(),[t,s]=j.useState(null),[o,l]=j.useState("");return j.useEffect(()=>{(async()=>{try{const p=await Un(Ct($e,"feedback",r));if(p.exists()){const d=p.data();if(s(d),d.userId){const m=await Un(Ct($e,"users",d.userId));m.exists()&&l(m.data().nombre||"")}}else e("/")}catch{e("/")}})()},[r,e]),t?b.jsxs("div",{style:{maxWidth:600,margin:"60px auto",padding:32},children:[b.jsxs("div",{style:{background:"#fff",border:"1px solid #ddd",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.10)",padding:32,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[q4(t.stars),b.jsx("div",{style:{margin:"18px 0",color:"#333",fontSize:18},children:t.comment}),b.jsx("div",{style:{fontSize:14,color:"#888"},children:o?`Usuario: ${o}`:""})]}),b.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:24},children:b.jsx("button",{onClick:()=>e(-1),children:"Volver"})})]}):b.jsx("div",{style:{textAlign:"center",marginTop:60},children:"Cargando..."})},F4={width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #222",background:"#333",color:"#fff",fontSize:16,outline:"none",boxSizing:"border-box"},pT={display:"block",marginBottom:6,fontWeight:500},G4=()=>{const{id:r}=Fo(),e=on(),{currentUser:t}=Ui(),[s,o]=j.useState(""),[l,h]=j.useState(5),[p,d]=j.useState(!1),[m,v]=j.useState(""),[E,S]=j.useState(!1);j.useEffect(()=>{t&&(async()=>{const M=Ct($e,"reservations",r),Y=await Un(M);if(Y.exists()){const ee=Y.data();v(ee.spaceId),t&&ee.userId===t.uid?S(!0):(alert("No tienes permiso para dejar feedback en esta reserva."),e("/mis-reservas"))}else alert("Reserva no encontrada."),e("/mis-reservas")})()},[r,e,t]);const I=async P=>{if(P.preventDefault(),!(!t||!E)){d(!0);try{await Ku(hr($e,"feedback"),{comment:s,spaceId:m,userId:t.uid,stars:Number(l),createdAt:new Date}),await Bg(Ct($e,"reservations",r)),alert("¡Gracias por tu feedback!"),e("/mis-reservas")}catch{alert("Error al enviar feedback.")}d(!1)}},x=()=>b.jsx("div",{style:{display:"flex",gap:6,cursor:"pointer",fontSize:28},children:[1,2,3,4,5].map(P=>b.jsx("span",{onClick:()=>h(P),style:{color:P<=l?"#FFD600":"#ccc",transition:"color 0.2s",userSelect:"none"},role:"button","aria-label":`${P} estrella${P>1?"s":""}`,tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&h(P)},children:"★"},P))});return E?b.jsxs("div",{style:{maxWidth:600,width:"100%",margin:"48px auto",background:"#fff",borderRadius:16,boxShadow:"0 4px 24px rgba(0,0,0,0.10)",padding:32,display:"flex",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box"},children:[b.jsx("h2",{style:{textAlign:"center",marginBottom:32},children:"Dejar Feedback"}),b.jsxs("form",{onSubmit:I,style:{display:"flex",flexDirection:"column",gap:20},children:[b.jsxs("div",{children:[b.jsx("label",{style:pT,children:"Comentario"}),b.jsx("textarea",{value:s,onChange:P=>o(P.target.value),required:!0,rows:4,style:{...F4,resize:"vertical"}})]}),b.jsxs("div",{children:[b.jsx("label",{style:pT,children:"Estrellas"}),x()]}),b.jsx("button",{type:"submit",style:{marginTop:12,background:"#ff7300",color:"#fff",border:"none",borderRadius:8,padding:"12px 0",fontWeight:600,fontSize:17,cursor:"pointer",transition:"background 0.2s"},disabled:p,children:p?"Enviando...":"Enviar Feedback"})]})]}):null};var $4=Object.defineProperty,nf=Object.getOwnPropertySymbols,zw=Object.prototype.hasOwnProperty,Bw=Object.prototype.propertyIsEnumerable,gT=(r,e,t)=>e in r?$4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mu=(r,e)=>{for(var t in e||(e={}))zw.call(e,t)&&gT(r,t,e[t]);if(nf)for(var t of nf(e))Bw.call(e,t)&&gT(r,t,e[t]);return r},Yg=(r,e)=>{var t={};for(var s in r)zw.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&nf)for(var s of nf(r))e.indexOf(s)<0&&Bw.call(r,s)&&(t[s]=r[s]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Sa;(r=>{const e=class{constructor(d,m,v,E){if(this.version=d,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],d<e.MIN_VERSION||d>e.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let S=[];for(let x=0;x<this.size;x++)S.push(!1);for(let x=0;x<this.size;x++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const I=this.addEccAndInterleave(v);if(this.drawCodewords(I),E==-1){let x=1e9;for(let P=0;P<8;P++){this.applyMask(P),this.drawFormatBits(P);const M=this.getPenaltyScore();M<x&&(E=P,x=M),this.applyMask(P)}}l(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(d,m){const v=r.QrSegment.makeSegments(d);return e.encodeSegments(v,m)}static encodeBinary(d,m){const v=r.QrSegment.makeBytes(d);return e.encodeSegments([v],m)}static encodeSegments(d,m,v=1,E=40,S=-1,I=!0){if(!(e.MIN_VERSION<=v&&v<=E&&E<=e.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let x,P;for(x=v;;x++){const $=e.getNumDataCodewords(x,m)*8,oe=p.getTotalBits(d,x);if(oe<=$){P=oe;break}if(x>=E)throw new RangeError("Data too long")}for(const $ of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])I&&P<=e.getNumDataCodewords(x,$)*8&&(m=$);let M=[];for(const $ of d){s($.mode.modeBits,4,M),s($.numChars,$.mode.numCharCountBits(x),M);for(const oe of $.getData())M.push(oe)}l(M.length==P);const Y=e.getNumDataCodewords(x,m)*8;l(M.length<=Y),s(0,Math.min(4,Y-M.length),M),s(0,(8-M.length%8)%8,M),l(M.length%8==0);for(let $=236;M.length<Y;$^=253)s($,8,M);let ee=[];for(;ee.length*8<M.length;)ee.push(0);return M.forEach(($,oe)=>ee[oe>>>3]|=$<<7-(oe&7)),new e(x,m,ee,S)}getModule(d,m){return 0<=d&&d<this.size&&0<=m&&m<this.size&&this.modules[m][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),m=d.length;for(let v=0;v<m;v++)for(let E=0;E<m;E++)v==0&&E==0||v==0&&E==m-1||v==m-1&&E==0||this.drawAlignmentPattern(d[v],d[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const m=this.errorCorrectionLevel.formatBits<<3|d;let v=m;for(let S=0;S<10;S++)v=v<<1^(v>>>9)*1335;const E=(m<<10|v)^21522;l(E>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,o(E,S));this.setFunctionModule(8,7,o(E,6)),this.setFunctionModule(8,8,o(E,7)),this.setFunctionModule(7,8,o(E,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,o(E,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,o(E,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,o(E,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let v=0;v<12;v++)d=d<<1^(d>>>11)*7973;const m=this.version<<12|d;l(m>>>18==0);for(let v=0;v<18;v++){const E=o(m,v),S=this.size-11+v%3,I=Math.floor(v/3);this.setFunctionModule(S,I,E),this.setFunctionModule(I,S,E)}}drawFinderPattern(d,m){for(let v=-4;v<=4;v++)for(let E=-4;E<=4;E++){const S=Math.max(Math.abs(E),Math.abs(v)),I=d+E,x=m+v;0<=I&&I<this.size&&0<=x&&x<this.size&&this.setFunctionModule(I,x,S!=2&&S!=4)}}drawAlignmentPattern(d,m){for(let v=-2;v<=2;v++)for(let E=-2;E<=2;E++)this.setFunctionModule(d+E,m+v,Math.max(Math.abs(E),Math.abs(v))!=1)}setFunctionModule(d,m,v){this.modules[m][d]=v,this.isFunction[m][d]=!0}addEccAndInterleave(d){const m=this.version,v=this.errorCorrectionLevel;if(d.length!=e.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const E=e.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],S=e.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],I=Math.floor(e.getNumRawDataModules(m)/8),x=E-I%E,P=Math.floor(I/E);let M=[];const Y=e.reedSolomonComputeDivisor(S);for(let $=0,oe=0;$<E;$++){let le=d.slice(oe,oe+P-S+($<x?0:1));oe+=le.length;const ve=e.reedSolomonComputeRemainder(le,Y);$<x&&le.push(0),M.push(le.concat(ve))}let ee=[];for(let $=0;$<M[0].length;$++)M.forEach((oe,le)=>{($!=P-S||le>=x)&&ee.push(oe[$])});return l(ee.length==I),ee}drawCodewords(d){if(d.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let E=0;E<this.size;E++)for(let S=0;S<2;S++){const I=v-S,P=(v+1&2)==0?this.size-1-E:E;!this.isFunction[P][I]&&m<d.length*8&&(this.modules[P][I]=o(d[m>>>3],7-(m&7)),m++)}}l(m==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let E;switch(d){case 0:E=(v+m)%2==0;break;case 1:E=m%2==0;break;case 2:E=v%3==0;break;case 3:E=(v+m)%3==0;break;case 4:E=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:E=v*m%2+v*m%3==0;break;case 6:E=(v*m%2+v*m%3)%2==0;break;case 7:E=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&E&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let d=0;for(let S=0;S<this.size;S++){let I=!1,x=0,P=[0,0,0,0,0,0,0];for(let M=0;M<this.size;M++)this.modules[S][M]==I?(x++,x==5?d+=e.PENALTY_N1:x>5&&d++):(this.finderPenaltyAddHistory(x,P),I||(d+=this.finderPenaltyCountPatterns(P)*e.PENALTY_N3),I=this.modules[S][M],x=1);d+=this.finderPenaltyTerminateAndCount(I,x,P)*e.PENALTY_N3}for(let S=0;S<this.size;S++){let I=!1,x=0,P=[0,0,0,0,0,0,0];for(let M=0;M<this.size;M++)this.modules[M][S]==I?(x++,x==5?d+=e.PENALTY_N1:x>5&&d++):(this.finderPenaltyAddHistory(x,P),I||(d+=this.finderPenaltyCountPatterns(P)*e.PENALTY_N3),I=this.modules[M][S],x=1);d+=this.finderPenaltyTerminateAndCount(I,x,P)*e.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let I=0;I<this.size-1;I++){const x=this.modules[S][I];x==this.modules[S][I+1]&&x==this.modules[S+1][I]&&x==this.modules[S+1][I+1]&&(d+=e.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((I,x)=>I+(x?1:0),m);const v=this.size*this.size,E=Math.ceil(Math.abs(m*20-v*10)/v)-1;return l(0<=E&&E<=9),d+=E*e.PENALTY_N4,l(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let v=[6];for(let E=this.size-7;v.length<d;E-=m)v.splice(1,0,E);return v}}static getNumRawDataModules(d){if(d<e.MIN_VERSION||d>e.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*d+128)*d+64;if(d>=2){const v=Math.floor(d/7)+2;m-=(25*v-10)*v-55,d>=7&&(m-=36)}return l(208<=m&&m<=29648),m}static getNumDataCodewords(d,m){return Math.floor(e.getNumRawDataModules(d)/8)-e.ECC_CODEWORDS_PER_BLOCK[m.ordinal][d]*e.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let m=[];for(let E=0;E<d-1;E++)m.push(0);m.push(1);let v=1;for(let E=0;E<d;E++){for(let S=0;S<m.length;S++)m[S]=e.reedSolomonMultiply(m[S],v),S+1<m.length&&(m[S]^=m[S+1]);v=e.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(d,m){let v=m.map(E=>0);for(const E of d){const S=E^v.shift();v.push(0),m.forEach((I,x)=>v[x]^=e.reedSolomonMultiply(I,S))}return v}static reedSolomonMultiply(d,m){if(d>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let E=7;E>=0;E--)v=v<<1^(v>>>7)*285,v^=(m>>>E&1)*d;return l(v>>>8==0),v}finderPenaltyCountPatterns(d){const m=d[1];l(m<=this.size*3);const v=m>0&&d[2]==m&&d[3]==m*3&&d[4]==m&&d[5]==m;return(v&&d[0]>=m*4&&d[6]>=m?1:0)+(v&&d[6]>=m*4&&d[0]>=m?1:0)}finderPenaltyTerminateAndCount(d,m,v){return d&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(d,m){m[0]==0&&(d+=this.size),m.pop(),m.unshift(d)}};let t=e;t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=t;function s(d,m,v){if(m<0||m>31||d>>>m)throw new RangeError("Value out of range");for(let E=m-1;E>=0;E--)v.push(d>>>E&1)}function o(d,m){return(d>>>m&1)!=0}function l(d){if(!d)throw new Error("Assertion error")}const h=class{constructor(d,m,v){if(this.mode=d,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(d){let m=[];for(const v of d)s(v,8,m);return new h(h.Mode.BYTE,d.length,m)}static makeNumeric(d){if(!h.isNumeric(d))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<d.length;){const E=Math.min(d.length-v,3);s(parseInt(d.substr(v,E),10),E*3+1,m),v+=E}return new h(h.Mode.NUMERIC,d.length,m)}static makeAlphanumeric(d){if(!h.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=d.length;v+=2){let E=h.ALPHANUMERIC_CHARSET.indexOf(d.charAt(v))*45;E+=h.ALPHANUMERIC_CHARSET.indexOf(d.charAt(v+1)),s(E,11,m)}return v<d.length&&s(h.ALPHANUMERIC_CHARSET.indexOf(d.charAt(v)),6,m),new h(h.Mode.ALPHANUMERIC,d.length,m)}static makeSegments(d){return d==""?[]:h.isNumeric(d)?[h.makeNumeric(d)]:h.isAlphanumeric(d)?[h.makeAlphanumeric(d)]:[h.makeBytes(h.toUtf8ByteArray(d))]}static makeEci(d){let m=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)s(d,8,m);else if(d<16384)s(2,2,m),s(d,14,m);else if(d<1e6)s(6,3,m),s(d,21,m);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,m)}static isNumeric(d){return h.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return h.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,m){let v=0;for(const E of d){const S=E.mode.numCharCountBits(m);if(E.numChars>=1<<S)return 1/0;v+=4+S+E.bitData.length}return v}static toUtf8ByteArray(d){d=encodeURI(d);let m=[];for(let v=0;v<d.length;v++)d.charAt(v)!="%"?m.push(d.charCodeAt(v)):(m.push(parseInt(d.substr(v+1,2),16)),v+=2);return m}};let p=h;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.QrSegment=p})(Sa||(Sa={}));(r=>{(e=>{const t=class{constructor(o,l){this.ordinal=o,this.formatBits=l}};let s=t;s.LOW=new t(0,1),s.MEDIUM=new t(1,0),s.QUARTILE=new t(2,3),s.HIGH=new t(3,2),e.Ecc=s})(r.QrCode||(r.QrCode={}))})(Sa||(Sa={}));(r=>{(e=>{const t=class{constructor(o,l){this.modeBits=o,this.numBitsCharCount=l}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let s=t;s.NUMERIC=new t(1,[10,12,14]),s.ALPHANUMERIC=new t(2,[9,11,13]),s.BYTE=new t(4,[8,16,16]),s.KANJI=new t(8,[8,10,12]),s.ECI=new t(7,[0,0,0]),e.Mode=s})(r.QrSegment||(r.QrSegment={}))})(Sa||(Sa={}));var Co=Sa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var qw={L:Co.QrCode.Ecc.LOW,M:Co.QrCode.Ecc.MEDIUM,Q:Co.QrCode.Ecc.QUARTILE,H:Co.QrCode.Ecc.HIGH},Hw=128,Fw="L",Gw="#FFFFFF",$w="#000000",Kw=!1,Xg=4,K4=.1;function Qw(r,e=0){const t=[];return r.forEach(function(s,o){let l=null;s.forEach(function(h,p){if(!h&&l!==null){t.push(`M${l+e} ${o+e}h${p-l}v1H${l+e}z`),l=null;return}if(p===s.length-1){if(!h)return;l===null?t.push(`M${p+e},${o+e} h1v1H${p+e}z`):t.push(`M${l+e},${o+e} h${p+1-l}v1H${l+e}z`);return}h&&l===null&&(l=p)})}),t.join("")}function Yw(r,e){return r.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((o,l)=>l<e.x||l>=e.x+e.w?o:!1))}function Xw(r,e,t,s){if(s==null)return null;const o=t?Xg:0,l=r.length+o*2,h=Math.floor(e*K4),p=l/e,d=(s.width||h)*p,m=(s.height||h)*p,v=s.x==null?r.length/2-d/2:s.x*p,E=s.y==null?r.length/2-m/2:s.y*p;let S=null;if(s.excavate){let I=Math.floor(v),x=Math.floor(E),P=Math.ceil(d+v-I),M=Math.ceil(m+E-x);S={x:I,y:x,w:P,h:M}}return{x:v,y:E,h:m,w:d,excavation:S}}var Q4=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Y4(r){const e=r,{value:t,size:s=Hw,level:o=Fw,bgColor:l=Gw,fgColor:h=$w,includeMargin:p=Kw,style:d,imageSettings:m}=e,v=Yg(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),E=m==null?void 0:m.src,S=wt.useRef(null),I=wt.useRef(null),[x,P]=wt.useState(!1);wt.useEffect(()=>{if(S.current!=null){const ee=S.current,$=ee.getContext("2d");if(!$)return;let oe=Co.QrCode.encodeText(t,qw[o]).getModules();const le=p?Xg:0,ve=oe.length+le*2,V=Xw(oe,s,p,m),C=I.current,N=V!=null&&C!==null&&C.complete&&C.naturalHeight!==0&&C.naturalWidth!==0;N&&V.excavation!=null&&(oe=Yw(oe,V.excavation));const k=window.devicePixelRatio||1;ee.height=ee.width=s*k;const L=s/ve*k;$.scale(L,L),$.fillStyle=l,$.fillRect(0,0,ve,ve),$.fillStyle=h,Q4?$.fill(new Path2D(Qw(oe,le))):oe.forEach(function(z,D){z.forEach(function(ot,lt){ot&&$.fillRect(lt+le,D+le,1,1)})}),N&&$.drawImage(C,V.x+le,V.y+le,V.w,V.h)}}),wt.useEffect(()=>{P(!1)},[E]);const M=Mu({height:s,width:s},d);let Y=null;return E!=null&&(Y=wt.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{P(!0)},ref:I})),wt.createElement(wt.Fragment,null,wt.createElement("canvas",Mu({style:M,height:s,width:s,ref:S},v)),Y)}function X4(r){const e=r,{value:t,size:s=Hw,level:o=Fw,bgColor:l=Gw,fgColor:h=$w,includeMargin:p=Kw,imageSettings:d}=e,m=Yg(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let v=Co.QrCode.encodeText(t,qw[o]).getModules();const E=p?Xg:0,S=v.length+E*2,I=Xw(v,s,p,d);let x=null;d!=null&&I!=null&&(I.excavation!=null&&(v=Yw(v,I.excavation)),x=wt.createElement("image",{xlinkHref:d.src,height:I.h,width:I.w,x:I.x+E,y:I.y+E,preserveAspectRatio:"none"}));const P=Qw(v,E);return wt.createElement("svg",Mu({height:s,width:s,viewBox:`0 0 ${S} ${S}`},m),wt.createElement("path",{fill:l,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),wt.createElement("path",{fill:h,d:P,shapeRendering:"crispEdges"}),x)}var W4=r=>{const e=r,{renderAs:t}=e,s=Yg(e,["renderAs"]);return t==="svg"?wt.createElement(X4,Mu({},s)):wt.createElement(Y4,Mu({},s))};const Z4=()=>{const{id:r}=Fo(),[e,t]=j.useState(null),[s,o]=j.useState(!0),l=on();if(j.useEffect(()=>{(async()=>{try{const d=Ct($e,"reservations",r),m=await Un(d);m.exists()&&t({id:m.id,...m.data()})}finally{o(!1)}})()},[r]),s)return b.jsx("h2",{children:"Cargando QR..."});if(!e)return b.jsx("h2",{children:"Reserva no encontrada."});const h=`https://llega-unimet-1bd09.web.app/admin-qr-verify?reservationId=${e.id}&verificationCode=${e.verificationCode}`;return b.jsxs("div",{style:{textAlign:"center",marginTop:40},children:[b.jsx("h2",{children:"QR de tu Reserva"}),b.jsx(W4,{value:h,size:220}),b.jsx("div",{style:{marginTop:20,wordBreak:"break-all"},children:h}),b.jsx("div",{style:{marginTop:20},children:b.jsx("button",{onClick:()=>l("/mis-reservas"),children:"Volver"})})]})},yT=()=>{const[r]=Fp(),[e,t]=j.useState("Verificando...");return j.useEffect(()=>{const s=r.get("reservationId"),o=r.get("verificationCode");if(!s||!o){t("QR inválido.");return}(async()=>{const h=Ct($e,"reservations",s),p=await Un(h);if(!p.exists()){t("Reserva no encontrada.");return}p.data().verificationCode===o?t("Reserva válida ✅"):t("Código de verificación incorrecto ❌")})()},[r]),b.jsxs("div",{style:{textAlign:"center",marginTop:40},children:[b.jsx("h2",{children:"Verificación de Reserva"}),b.jsx("div",{style:{fontWeight:700,marginTop:10},children:e})]})};function J4(){const{currentUser:r,loading:e}=Ui();return e?b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:b.jsx("h2",{children:"Cargando aplicación..."})}):b.jsxs($R,{children:[b.jsxs(TR,{children:[b.jsx(Yt,{path:"/",element:b.jsx(LP,{})}),b.jsx(Yt,{path:"/login",element:b.jsx(UP,{})}),b.jsx(Yt,{path:"/register",element:b.jsx(jP,{})}),b.jsx(Yt,{path:"/profile",element:b.jsx(lr,{children:b.jsx(zP,{})})}),b.jsx(Yt,{path:"/reserva/:spaceId",element:b.jsx(lr,{children:b.jsx($P,{})})}),b.jsx(Yt,{path:"/espacios",element:b.jsx(k4,{})}),b.jsx(Yt,{path:"/feedback/:id",element:b.jsx(lr,{children:b.jsx(G4,{})})}),b.jsx(Yt,{path:"/feedback-detail/:id",element:b.jsx(lr,{children:b.jsx(H4,{})})}),b.jsx(Yt,{path:"/pago/:reservationId",element:b.jsx(lr,{children:b.jsx(E4,{})})}),b.jsx(Yt,{path:"/mis-reservas",element:b.jsx(lr,{children:b.jsx(ZP,{})})}),b.jsx(Yt,{path:"/admin",element:b.jsx(b4,{children:b.jsx(YP,{})})}),b.jsx(Yt,{path:"/admin/espacios",element:b.jsx(lr,{children:b.jsx(L4,{})})}),b.jsx(Yt,{path:"/admin/editar-espacio/:id",element:b.jsx(lr,{children:b.jsx(j4,{})})}),b.jsx(Yt,{path:"/admin/espacios/crear",element:b.jsx(lr,{children:b.jsx(B4,{})})}),b.jsx(Yt,{path:"/qr/:id",element:b.jsx(lr,{children:b.jsx(Z4,{})})}),b.jsx(Yt,{path:"/admin/qr-verify",element:b.jsx(lr,{children:b.jsx(yT,{})})}),b.jsx(Yt,{path:"/admin-qr-verify",element:b.jsx(lr,{children:b.jsx(yT,{})})}),b.jsx(Yt,{path:"*",element:b.jsx("div",{style:{textAlign:"center",marginTop:"50px"},children:b.jsx("h1",{children:"404 - Página No Encontrada"})})})]}),r&&b.jsx(N4,{})]})}N1.createRoot(document.getElementById("root")).render(b.jsx(j.StrictMode,{children:b.jsx(J4,{})}));
